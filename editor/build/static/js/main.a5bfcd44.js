!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/editor/",n(n.s=74)}([function(t,e,n){var r;try{r=n(4)}catch(t){}r||(r=window._),t.exports=r},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(0),i=n(7).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function s(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,u=t.width/2,l=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(a)*u>Math.abs(s)*l?(a<0&&(l=-l),n=l*s/a,r=l):(s<0&&(u=-u),n=u,r=u*a/s);return{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(s(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)}),e},normalizeRanks:function(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})},removeEmptyRanks:function(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%o!==0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return o(t,"border",i,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(t,r){var i;(function(){var o,s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",f=1,d=2,p=4,g=1,v=2,m=1,y=2,b=4,w=8,x=16,_=32,S=64,k=128,T=256,C=512,E=30,O="...",M=800,A=16,P=1,D=2,N=1/0,L=9007199254740991,I=1.7976931348623157e308,R=NaN,j=4294967295,F=j-1,B=j>>>1,z=[["ary",k],["bind",m],["bindKey",y],["curry",w],["curryRight",x],["flip",C],["partial",_],["partialRight",S],["rearg",T]],W="[object Arguments]",U="[object Array]",V="[object AsyncFunction]",G="[object Boolean]",q="[object Date]",H="[object DOMException]",$="[object Error]",Y="[object Function]",X="[object GeneratorFunction]",K="[object Map]",Q="[object Number]",J="[object Null]",Z="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",ot="[object Undefined]",st="[object WeakMap]",at="[object WeakSet]",ut="[object ArrayBuffer]",lt="[object DataView]",ct="[object Float32Array]",ht="[object Float64Array]",ft="[object Int8Array]",dt="[object Int16Array]",pt="[object Int32Array]",gt="[object Uint8Array]",vt="[object Uint8ClampedArray]",mt="[object Uint16Array]",yt="[object Uint32Array]",bt=/\b__p \+= '';/g,wt=/\b(__p \+=) '' \+/g,xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,kt=RegExp(_t.source),Tt=RegExp(St.source),Ct=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,Ot=/<%=([\s\S]+?)%>/g,Mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Nt=RegExp(Dt.source),Lt=/^\s+|\s+$/g,It=/^\s+/,Rt=/\s+$/,jt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ft=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,Gt=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Ht=/^\[object .+?Constructor\]$/,$t=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Zt+"]",ne="["+Jt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",se="[^\\ud800-\\udfff"+Zt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ae="\\ud83c[\\udffb-\\udfff]",ue="[^\\ud800-\\udfff]",le="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",fe="(?:"+oe+"|"+se+")",de="(?:"+he+"|"+se+")",pe="(?:"+ne+"|"+ae+")"+"?",ge="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[ue,le,ce].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),ve="(?:"+[ie,le,ce].join("|")+")"+ge,me="(?:"+[ue+ne+"?",ne,le,ce,te].join("|")+")",ye=RegExp("['\u2019]","g"),be=RegExp(ne,"g"),we=RegExp(ae+"(?="+ae+")|"+me+ge,"g"),xe=RegExp([he+"?"+oe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ee,he,"$"].join("|")+")",de+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ee,he+fe,"$"].join("|")+")",he+"?"+fe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",he+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,ve].join("|"),"g"),_e=RegExp("[\\u200d\\ud800-\\udfff"+Jt+"\\ufe0e\\ufe0f]"),Se=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Te=-1,Ce={};Ce[ct]=Ce[ht]=Ce[ft]=Ce[dt]=Ce[pt]=Ce[gt]=Ce[vt]=Ce[mt]=Ce[yt]=!0,Ce[W]=Ce[U]=Ce[ut]=Ce[G]=Ce[lt]=Ce[q]=Ce[$]=Ce[Y]=Ce[K]=Ce[Q]=Ce[Z]=Ce[et]=Ce[nt]=Ce[rt]=Ce[st]=!1;var Ee={};Ee[W]=Ee[U]=Ee[ut]=Ee[lt]=Ee[G]=Ee[q]=Ee[ct]=Ee[ht]=Ee[ft]=Ee[dt]=Ee[pt]=Ee[K]=Ee[Q]=Ee[Z]=Ee[et]=Ee[nt]=Ee[rt]=Ee[it]=Ee[gt]=Ee[vt]=Ee[mt]=Ee[yt]=!0,Ee[$]=Ee[Y]=Ee[st]=!1;var Oe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Me=parseFloat,Ae=parseInt,Pe="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Ne=Pe||De||Function("return this")(),Le="object"==typeof e&&e&&!e.nodeType&&e,Ie=Le&&"object"==typeof r&&r&&!r.nodeType&&r,Re=Ie&&Ie.exports===Le,je=Re&&Pe.process,Fe=function(){try{var t=Ie&&Ie.require&&Ie.require("util").types;return t||je&&je.binding&&je.binding("util")}catch(t){}}(),Be=Fe&&Fe.isArrayBuffer,ze=Fe&&Fe.isDate,We=Fe&&Fe.isMap,Ue=Fe&&Fe.isRegExp,Ve=Fe&&Fe.isSet,Ge=Fe&&Fe.isTypedArray;function qe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function He(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function $e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ye(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Xe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ke(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Qe(t,e){return!!(null==t?0:t.length)&&un(t,e,0)>-1}function Je(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ze(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=fn("length");function sn(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function an(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function un(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):an(t,cn,n)}function ln(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function cn(t){return t!==t}function hn(t,e){var n=null==t?0:t.length;return n?gn(t,e)/n:R}function fn(t){return function(e){return null==e?o:e[t]}}function dn(t){return function(e){return null==t?o:t[e]}}function pn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function gn(t,e){for(var n,r=-1,i=t.length;++r<i;){var s=e(t[r]);s!==o&&(n=n===o?s:n+s)}return n}function vn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function mn(t){return function(e){return t(e)}}function yn(t,e){return Ze(e,function(e){return t[e]})}function bn(t,e){return t.has(e)}function wn(t,e){for(var n=-1,r=t.length;++n<r&&un(e,t[n],0)>-1;);return n}function xn(t,e){for(var n=t.length;n--&&un(e,t[n],0)>-1;);return n}var _n=dn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Sn=dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function kn(t){return"\\"+Oe[t]}function Tn(t){return _e.test(t)}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function En(t,e){return function(n){return t(e(n))}}function On(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==h||(t[n]=h,o[i++]=n)}return o}function Mn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function An(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Pn(t){return Tn(t)?function(t){var e=we.lastIndex=0;for(;we.test(t);)++e;return e}(t):on(t)}function Dn(t){return Tn(t)?function(t){return t.match(we)||[]}(t):function(t){return t.split("")}(t)}var Nn=dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ln=function t(e){var n,r=(e=null==e?Ne:Ln.defaults(Ne.Object(),e,Ln.pick(Ne,ke))).Array,i=e.Date,Jt=e.Error,Zt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,re=e.String,ie=e.TypeError,oe=r.prototype,se=Zt.prototype,ae=ee.prototype,ue=e["__core-js_shared__"],le=se.toString,ce=ae.hasOwnProperty,he=0,fe=(n=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",de=ae.toString,pe=le.call(ee),ge=Ne._,ve=ne("^"+le.call(ce).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=Re?e.Buffer:o,we=e.Symbol,_e=e.Uint8Array,Oe=me?me.allocUnsafe:o,Pe=En(ee.getPrototypeOf,ee),De=ee.create,Le=ae.propertyIsEnumerable,Ie=oe.splice,je=we?we.isConcatSpreadable:o,Fe=we?we.iterator:o,on=we?we.toStringTag:o,dn=function(){try{var t=Bo(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),In=e.clearTimeout!==Ne.clearTimeout&&e.clearTimeout,Rn=i&&i.now!==Ne.Date.now&&i.now,jn=e.setTimeout!==Ne.setTimeout&&e.setTimeout,Fn=te.ceil,Bn=te.floor,zn=ee.getOwnPropertySymbols,Wn=me?me.isBuffer:o,Un=e.isFinite,Vn=oe.join,Gn=En(ee.keys,ee),qn=te.max,Hn=te.min,$n=i.now,Yn=e.parseInt,Xn=te.random,Kn=oe.reverse,Qn=Bo(e,"DataView"),Jn=Bo(e,"Map"),Zn=Bo(e,"Promise"),tr=Bo(e,"Set"),er=Bo(e,"WeakMap"),nr=Bo(ee,"create"),rr=er&&new er,ir={},or=hs(Qn),sr=hs(Jn),ar=hs(Zn),ur=hs(tr),lr=hs(er),cr=we?we.prototype:o,hr=cr?cr.valueOf:o,fr=cr?cr.toString:o;function dr(t){if(Oa(t)&&!ma(t)&&!(t instanceof mr)){if(t instanceof vr)return t;if(ce.call(t,"__wrapped__"))return fs(t)}return new vr(t)}var pr=function(){function t(){}return function(e){if(!Ea(e))return{};if(De)return De(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function gr(){}function vr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function mr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function yr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wr;++e<n;)this.add(t[e])}function _r(t){var e=this.__data__=new br(t);this.size=e.size}function Sr(t,e){var n=ma(t),r=!n&&va(t),i=!n&&!r&&xa(t),o=!n&&!r&&!i&&Ra(t),s=n||r||i||o,a=s?vn(t.length,re):[],u=a.length;for(var l in t)!e&&!ce.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ho(l,u))||a.push(l);return a}function kr(t){var e=t.length;return e?t[xi(0,e-1)]:o}function Tr(t,e){return us(no(t),Lr(e,0,t.length))}function Cr(t){return us(no(t))}function Er(t,e,n){(n===o||da(t[e],n))&&(n!==o||e in t)||Dr(t,e,n)}function Or(t,e,n){var r=t[e];ce.call(t,e)&&da(r,n)&&(n!==o||e in t)||Dr(t,e,n)}function Mr(t,e){for(var n=t.length;n--;)if(da(t[n][0],e))return n;return-1}function Ar(t,e,n,r){return Br(t,function(t,i,o){e(r,t,n(t),o)}),r}function Pr(t,e){return t&&ro(e,iu(e),t)}function Dr(t,e,n){"__proto__"==e&&dn?dn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Nr(t,e){for(var n=-1,i=e.length,s=r(i),a=null==t;++n<i;)s[n]=a?o:Za(t,e[n]);return s}function Lr(t,e,n){return t===t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Ir(t,e,n,r,i,s){var a,u=e&f,l=e&d,c=e&p;if(n&&(a=i?n(t,r,i,s):n(t)),a!==o)return a;if(!Ea(t))return t;var h=ma(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ce.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return no(t,a)}else{var g=Uo(t),v=g==Y||g==X;if(xa(t))return Ki(t,u);if(g==Z||g==W||v&&!i){if(a=l||v?{}:Go(t),!u)return l?function(t,e){return ro(t,Wo(t),e)}(t,function(t,e){return t&&ro(e,ou(e),t)}(a,t)):function(t,e){return ro(t,zo(t),e)}(t,Pr(a,t))}else{if(!Ee[g])return i?t:{};a=function(t,e,n){var r,i,o,s=t.constructor;switch(e){case ut:return Qi(t);case G:case q:return new s(+t);case lt:return function(t,e){var n=e?Qi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ct:case ht:case ft:case dt:case pt:case gt:case vt:case mt:case yt:return Ji(t,n);case K:return new s;case Q:case rt:return new s(t);case et:return(o=new(i=t).constructor(i.source,Vt.exec(i))).lastIndex=i.lastIndex,o;case nt:return new s;case it:return r=t,hr?ee(hr.call(r)):{}}}(t,g,u)}}s||(s=new _r);var m=s.get(t);if(m)return m;if(s.set(t,a),Na(t))return t.forEach(function(r){a.add(Ir(r,e,n,r,t,s))}),a;if(Ma(t))return t.forEach(function(r,i){a.set(i,Ir(r,e,n,i,t,s))}),a;var y=h?o:(c?l?Do:Po:l?ou:iu)(t);return $e(y||t,function(r,i){y&&(r=t[i=r]),Or(a,i,Ir(r,e,n,i,t,s))}),a}function Rr(t,e,n){var r=n.length;if(null==t)return!r;for(t=ee(t);r--;){var i=n[r],s=e[i],a=t[i];if(a===o&&!(i in t)||!s(a))return!1}return!0}function jr(t,e,n){if("function"!=typeof t)throw new ie(u);return is(function(){t.apply(o,n)},e)}function Fr(t,e,n,r){var i=-1,o=Qe,a=!0,u=t.length,l=[],c=e.length;if(!u)return l;n&&(e=Ze(e,mn(n))),r?(o=Je,a=!1):e.length>=s&&(o=bn,a=!1,e=new xr(e));t:for(;++i<u;){var h=t[i],f=null==n?h:n(h);if(h=r||0!==h?h:0,a&&f===f){for(var d=c;d--;)if(e[d]===f)continue t;l.push(h)}else o(e,f,r)||l.push(h)}return l}dr.templateSettings={escape:Ct,evaluate:Et,interpolate:Ot,variable:"",imports:{_:dr}},dr.prototype=gr.prototype,dr.prototype.constructor=dr,vr.prototype=pr(gr.prototype),vr.prototype.constructor=vr,mr.prototype=pr(gr.prototype),mr.prototype.constructor=mr,yr.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},yr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yr.prototype.get=function(t){var e=this.__data__;if(nr){var n=e[t];return n===l?o:n}return ce.call(e,t)?e[t]:o},yr.prototype.has=function(t){var e=this.__data__;return nr?e[t]!==o:ce.call(e,t)},yr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nr&&e===o?l:e,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=Mr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ie.call(e,n,1),--this.size,!0)},br.prototype.get=function(t){var e=this.__data__,n=Mr(e,t);return n<0?o:e[n][1]},br.prototype.has=function(t){return Mr(this.__data__,t)>-1},br.prototype.set=function(t,e){var n=this.__data__,r=Mr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new yr,map:new(Jn||br),string:new yr}},wr.prototype.delete=function(t){var e=jo(this,t).delete(t);return this.size-=e?1:0,e},wr.prototype.get=function(t){return jo(this,t).get(t)},wr.prototype.has=function(t){return jo(this,t).has(t)},wr.prototype.set=function(t,e){var n=jo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},xr.prototype.add=xr.prototype.push=function(t){return this.__data__.set(t,l),this},xr.prototype.has=function(t){return this.__data__.has(t)},_r.prototype.clear=function(){this.__data__=new br,this.size=0},_r.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},_r.prototype.get=function(t){return this.__data__.get(t)},_r.prototype.has=function(t){return this.__data__.has(t)},_r.prototype.set=function(t,e){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!Jn||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(t,e),this.size=n.size,this};var Br=so($r),zr=so(Yr,!0);function Wr(t,e){var n=!0;return Br(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ur(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(null!=a&&(u===o?a===a&&!Ia(a):n(a,u)))var u=a,l=s}return l}function Vr(t,e){var n=[];return Br(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Gr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=qo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Gr(a,e-1,n,r,i):tn(i,a):r||(i[i.length]=a)}return i}var qr=ao(),Hr=ao(!0);function $r(t,e){return t&&qr(t,e,iu)}function Yr(t,e){return t&&Hr(t,e,iu)}function Xr(t,e){return Ke(e,function(e){return ka(t[e])})}function Kr(t,e){for(var n=0,r=(e=Hi(e,t)).length;null!=t&&n<r;)t=t[cs(e[n++])];return n&&n==r?t:o}function Qr(t,e,n){var r=e(t);return ma(t)?r:tn(r,n(t))}function Jr(t){return null==t?t===o?ot:J:on&&on in ee(t)?function(t){var e=ce.call(t,on),n=t[on];try{t[on]=o;var r=!0}catch(t){}var i=de.call(t);return r&&(e?t[on]=n:delete t[on]),i}(t):function(t){return de.call(t)}(t)}function Zr(t,e){return t>e}function ti(t,e){return null!=t&&ce.call(t,e)}function ei(t,e){return null!=t&&e in ee(t)}function ni(t,e,n){for(var i=n?Je:Qe,s=t[0].length,a=t.length,u=a,l=r(a),c=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Ze(f,mn(e))),c=Hn(f.length,c),l[u]=!n&&(e||s>=120&&f.length>=120)?new xr(u&&f):o}f=t[0];var d=-1,p=l[0];t:for(;++d<s&&h.length<c;){var g=f[d],v=e?e(g):g;if(g=n||0!==g?g:0,!(p?bn(p,v):i(h,v,n))){for(u=a;--u;){var m=l[u];if(!(m?bn(m,v):i(t[u],v,n)))continue t}p&&p.push(v),h.push(g)}}return h}function ri(t,e,n){var r=null==(t=es(t,e=Hi(e,t)))?t:t[cs(Ss(e))];return null==r?o:qe(r,t,n)}function ii(t){return Oa(t)&&Jr(t)==W}function oi(t,e,n,r,i){return t===e||(null==t||null==e||!Oa(t)&&!Oa(e)?t!==t&&e!==e:function(t,e,n,r,i,s){var a=ma(t),u=ma(e),l=a?U:Uo(t),c=u?U:Uo(e),h=(l=l==W?Z:l)==Z,f=(c=c==W?Z:c)==Z,d=l==c;if(d&&xa(t)){if(!xa(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new _r),a||Ra(t)?Mo(t,e,n,r,i,s):function(t,e,n,r,i,o,s){switch(n){case lt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ut:return!(t.byteLength!=e.byteLength||!o(new _e(t),new _e(e)));case G:case q:case Q:return da(+t,+e);case $:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case K:var a=Cn;case nt:var u=r&g;if(a||(a=Mn),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;r|=v,s.set(t,e);var c=Mo(a(t),a(e),r,i,o,s);return s.delete(t),c;case it:if(hr)return hr.call(t)==hr.call(e)}return!1}(t,e,l,n,r,i,s);if(!(n&g)){var p=h&&ce.call(t,"__wrapped__"),m=f&&ce.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,b=m?e.value():e;return s||(s=new _r),i(y,b,n,r,s)}}return!!d&&(s||(s=new _r),function(t,e,n,r,i,s){var a=n&g,u=Po(t),l=u.length,c=Po(e).length;if(l!=c&&!a)return!1;for(var h=l;h--;){var f=u[h];if(!(a?f in e:ce.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var v=a;++h<l;){f=u[h];var m=t[f],y=e[f];if(r)var b=a?r(y,m,f,e,t,s):r(m,y,f,t,e,s);if(!(b===o?m===y||i(m,y,n,r,s):b)){p=!1;break}v||(v="constructor"==f)}if(p&&!v){var w=t.constructor,x=e.constructor;w!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,i,s))}(t,e,n,r,oi,i))}function si(t,e,n,r){var i=n.length,s=i,a=!r;if(null==t)return!s;for(t=ee(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<s;){var l=(u=n[i])[0],c=t[l],h=u[1];if(a&&u[2]){if(c===o&&!(l in t))return!1}else{var f=new _r;if(r)var d=r(c,h,l,t,e,f);if(!(d===o?oi(h,c,g|v,r,f):d))return!1}}return!0}function ai(t){return!(!Ea(t)||fe&&fe in t)&&(ka(t)?ve:Ht).test(hs(t))}function ui(t){return"function"==typeof t?t:null==t?Au:"object"==typeof t?ma(t)?pi(t[0],t[1]):di(t):Bu(t)}function li(t){if(!Qo(t))return Gn(t);var e=[];for(var n in ee(t))ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ci(t){if(!Ea(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Qo(t),n=[];for(var r in t)("constructor"!=r||!e&&ce.call(t,r))&&n.push(r);return n}function hi(t,e){return t<e}function fi(t,e){var n=-1,i=ba(t)?r(t.length):[];return Br(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function di(t){var e=Fo(t);return 1==e.length&&e[0][2]?Zo(e[0][0],e[0][1]):function(n){return n===t||si(n,t,e)}}function pi(t,e){return Yo(t)&&Jo(e)?Zo(cs(t),e):function(n){var r=Za(n,t);return r===o&&r===e?tu(n,t):oi(e,r,g|v)}}function gi(t,e,n,r,i){t!==e&&qr(e,function(s,a){if(Ea(s))i||(i=new _r),function(t,e,n,r,i,s,a){var u=ns(t,n),l=ns(e,n),c=a.get(l);if(c)Er(t,n,c);else{var h=s?s(u,l,n+"",t,e,a):o,f=h===o;if(f){var d=ma(l),p=!d&&xa(l),g=!d&&!p&&Ra(l);h=l,d||p||g?ma(u)?h=u:wa(u)?h=no(u):p?(f=!1,h=Ki(l,!0)):g?(f=!1,h=Ji(l,!0)):h=[]:Pa(l)||va(l)?(h=u,va(u)?h=Ga(u):Ea(u)&&!ka(u)||(h=Go(l))):f=!1}f&&(a.set(l,h),i(h,l,r,s,a),a.delete(l)),Er(t,n,h)}}(t,e,a,n,gi,r,i);else{var u=r?r(ns(t,a),s,a+"",t,e,i):o;u===o&&(u=s),Er(t,a,u)}},ou)}function vi(t,e){var n=t.length;if(n)return Ho(e+=e<0?n:0,n)?t[e]:o}function mi(t,e,n){var r=-1;return e=Ze(e.length?e:[Au],mn(Ro())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fi(t,function(t,n,i){return{criteria:Ze(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Zi(i[r],o[r]);if(u){if(r>=a)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function yi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Kr(t,s);n(a,s)&&Ci(o,Hi(s,t),a)}return o}function bi(t,e,n,r){var i=r?ln:un,o=-1,s=e.length,a=t;for(t===e&&(e=no(e)),n&&(a=Ze(t,mn(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(a,c,u,r))>-1;)a!==t&&Ie.call(a,u,1),Ie.call(t,u,1);return t}function wi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Ho(i)?Ie.call(t,i,1):Fi(t,i)}}return t}function xi(t,e){return t+Bn(Xn()*(e-t+1))}function _i(t,e){var n="";if(!t||e<1||e>L)return n;do{e%2&&(n+=t),(e=Bn(e/2))&&(t+=t)}while(e);return n}function Si(t,e){return os(ts(t,e,Au),t+"")}function ki(t){return kr(du(t))}function Ti(t,e){var n=du(t);return us(n,Lr(e,0,n.length))}function Ci(t,e,n,r){if(!Ea(t))return t;for(var i=-1,s=(e=Hi(e,t)).length,a=s-1,u=t;null!=u&&++i<s;){var l=cs(e[i]),c=n;if(i!=a){var h=u[l];(c=r?r(h,l,u):o)===o&&(c=Ea(h)?h:Ho(e[i+1])?[]:{})}Or(u,l,c),u=u[l]}return t}var Ei=rr?function(t,e){return rr.set(t,e),t}:Au,Oi=dn?function(t,e){return dn(t,"toString",{configurable:!0,enumerable:!1,value:Eu(e),writable:!0})}:Au;function Mi(t){return us(du(t))}function Ai(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function Pi(t,e){var n;return Br(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Di(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=B){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!Ia(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return Ni(t,e,Au,n)}function Ni(t,e,n,r){e=n(e);for(var i=0,s=null==t?0:t.length,a=e!==e,u=null===e,l=Ia(e),c=e===o;i<s;){var h=Bn((i+s)/2),f=n(t[h]),d=f!==o,p=null===f,g=f===f,v=Ia(f);if(a)var m=r||g;else m=c?g&&(r||d):u?g&&d&&(r||!p):l?g&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);m?i=h+1:s=h}return Hn(s,F)}function Li(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!da(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Ii(t){return"number"==typeof t?t:Ia(t)?R:+t}function Ri(t){if("string"==typeof t)return t;if(ma(t))return Ze(t,Ri)+"";if(Ia(t))return fr?fr.call(t):"";var e=t+"";return"0"==e&&1/t==-N?"-0":e}function ji(t,e,n){var r=-1,i=Qe,o=t.length,a=!0,u=[],l=u;if(n)a=!1,i=Je;else if(o>=s){var c=e?null:So(t);if(c)return Mn(c);a=!1,i=bn,l=new xr}else l=e?[]:u;t:for(;++r<o;){var h=t[r],f=e?e(h):h;if(h=n||0!==h?h:0,a&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue t;e&&l.push(f),u.push(h)}else i(l,f,n)||(l!==u&&l.push(f),u.push(h))}return u}function Fi(t,e){return null==(t=es(t,e=Hi(e,t)))||delete t[cs(Ss(e))]}function Bi(t,e,n,r){return Ci(t,e,n(Kr(t,e)),r)}function zi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ai(t,r?0:o,r?o+1:i):Ai(t,r?o+1:0,r?i:o)}function Wi(t,e){var n=t;return n instanceof mr&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Ui(t,e,n){var i=t.length;if(i<2)return i?ji(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=Fr(s[o]||a,t[u],e,n));return ji(Gr(s,1),e,n)}function Vi(t,e,n){for(var r=-1,i=t.length,s=e.length,a={};++r<i;){var u=r<s?e[r]:o;n(a,t[r],u)}return a}function Gi(t){return wa(t)?t:[]}function qi(t){return"function"==typeof t?t:Au}function Hi(t,e){return ma(t)?t:Yo(t,e)?[t]:ls(qa(t))}var $i=Si;function Yi(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Ai(t,e,n)}var Xi=In||function(t){return Ne.clearTimeout(t)};function Ki(t,e){if(e)return t.slice();var n=t.length,r=Oe?Oe(n):new t.constructor(n);return t.copy(r),r}function Qi(t){var e=new t.constructor(t.byteLength);return new _e(e).set(new _e(t)),e}function Ji(t,e){var n=e?Qi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Zi(t,e){if(t!==e){var n=t!==o,r=null===t,i=t===t,s=Ia(t),a=e!==o,u=null===e,l=e===e,c=Ia(e);if(!u&&!c&&!s&&t>e||s&&a&&l&&!u&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||u&&n&&i||!a&&i||!l)return-1}return 0}function to(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,l=e.length,c=qn(s-a,0),h=r(l+c),f=!i;++u<l;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function eo(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,l=-1,c=e.length,h=qn(s-u,0),f=r(h+c),d=!i;++o<h;)f[o]=t[o];for(var p=o;++l<c;)f[p+l]=e[l];for(;++a<u;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function no(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function ro(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],l=r?r(n[u],t[u],u,n,t):o;l===o&&(l=t[u]),i?Dr(n,u,l):Or(n,u,l)}return n}function io(t,e){return function(n,r){var i=ma(n)?He:Ar,o=e?e():{};return i(n,t,Ro(r,2),o)}}function oo(t){return Si(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:o,a=i>2?n[2]:o;for(s=t.length>3&&"function"==typeof s?(i--,s):o,a&&$o(n[0],n[1],a)&&(s=i<3?o:s,i=1),e=ee(e);++r<i;){var u=n[r];u&&t(e,u,r,s)}return e})}function so(t,e){return function(n,r){if(null==n)return n;if(!ba(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=ee(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function ao(t){return function(e,n,r){for(var i=-1,o=ee(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function uo(t){return function(e){var n=Tn(e=qa(e))?Dn(e):o,r=n?n[0]:e.charAt(0),i=n?Yi(n,1).join(""):e.slice(1);return r[t]()+i}}function lo(t){return function(e){return en(ku(vu(e).replace(ye,"")),t,"")}}function co(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=pr(t.prototype),r=t.apply(n,e);return Ea(r)?r:n}}function ho(t){return function(e,n,r){var i=ee(e);if(!ba(e)){var s=Ro(n,3);e=iu(e),n=function(t){return s(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:o}}function fo(t){return Ao(function(e){var n=e.length,r=n,i=vr.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new ie(u);if(i&&!a&&"wrapper"==Lo(s))var a=new vr([],!0)}for(r=a?r:n;++r<n;){var l=Lo(s=e[r]),c="wrapper"==l?No(s):o;a=c&&Xo(c[0])&&c[1]==(k|w|_|T)&&!c[4].length&&1==c[9]?a[Lo(c[0])].apply(a,c[3]):1==s.length&&Xo(s)?a[l]():a.thru(s)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&ma(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function po(t,e,n,i,s,a,u,l,c,h){var f=e&k,d=e&m,p=e&y,g=e&(w|x),v=e&C,b=p?o:co(t);return function m(){for(var y=arguments.length,w=r(y),x=y;x--;)w[x]=arguments[x];if(g)var _=Io(m),S=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,_);if(i&&(w=to(w,i,s,g)),a&&(w=eo(w,a,u,g)),y-=S,g&&y<h){var k=On(w,_);return xo(t,e,po,m.placeholder,n,w,k,l,c,h-y)}var T=d?n:this,C=p?T[t]:t;return y=w.length,l?w=function(t,e){for(var n=t.length,r=Hn(e.length,n),i=no(t);r--;){var s=e[r];t[r]=Ho(s,n)?i[s]:o}return t}(w,l):v&&y>1&&w.reverse(),f&&c<y&&(w.length=c),this&&this!==Ne&&this instanceof m&&(C=b||co(C)),C.apply(T,w)}}function go(t,e){return function(n,r){return function(t,e,n,r){return $r(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function vo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Ri(n),r=Ri(r)):(n=Ii(n),r=Ii(r)),i=t(n,r)}return i}}function mo(t){return Ao(function(e){return e=Ze(e,mn(Ro())),Si(function(n){var r=this;return t(e,function(t){return qe(t,r,n)})})})}function yo(t,e){var n=(e=e===o?" ":Ri(e)).length;if(n<2)return n?_i(e,t):e;var r=_i(e,Fn(t/Pn(e)));return Tn(e)?Yi(Dn(r),0,t).join(""):r.slice(0,t)}function bo(t){return function(e,n,i){return i&&"number"!=typeof i&&$o(e,n,i)&&(n=i=o),e=za(e),n===o?(n=e,e=0):n=za(n),function(t,e,n,i){for(var o=-1,s=qn(Fn((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,i=i===o?e<n?1:-1:za(i),t)}}function wo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Va(e),n=Va(n)),t(e,n)}}function xo(t,e,n,r,i,s,a,u,l,c){var h=e&w;e|=h?_:S,(e&=~(h?S:_))&b||(e&=~(m|y));var f=[t,e,i,h?s:o,h?a:o,h?o:s,h?o:a,u,l,c],d=n.apply(o,f);return Xo(t)&&rs(d,f),d.placeholder=r,ss(d,t,e)}function _o(t){var e=te[t];return function(t,n){if(t=Va(t),n=null==n?0:Hn(Wa(n),292)){var r=(qa(t)+"e").split("e");return+((r=(qa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var So=tr&&1/Mn(new tr([,-0]))[1]==N?function(t){return new tr(t)}:Iu;function ko(t){return function(e){var n=Uo(e);return n==K?Cn(e):n==nt?An(e):function(t,e){return Ze(e,function(e){return[e,t[e]]})}(e,t(e))}}function To(t,e,n,i,s,a,l,c){var f=e&y;if(!f&&"function"!=typeof t)throw new ie(u);var d=i?i.length:0;if(d||(e&=~(_|S),i=s=o),l=l===o?l:qn(Wa(l),0),c=c===o?c:Wa(c),d-=s?s.length:0,e&S){var p=i,g=s;i=s=o}var v=f?o:No(t),C=[t,e,n,i,s,p,g,a,l,c];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(m|y|k),s=r==k&&n==w||r==k&&n==T&&t[7].length<=e[8]||r==(k|T)&&e[7].length<=e[8]&&n==w;if(!o&&!s)return t;r&m&&(t[2]=e[2],i|=n&m?0:b);var a=e[3];if(a){var u=t[3];t[3]=u?to(u,a,e[4]):a,t[4]=u?On(t[3],h):e[4]}(a=e[5])&&(u=t[5],t[5]=u?eo(u,a,e[6]):a,t[6]=u?On(t[5],h):e[6]),(a=e[7])&&(t[7]=a),r&k&&(t[8]=null==t[8]?e[8]:Hn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(C,v),t=C[0],e=C[1],n=C[2],i=C[3],s=C[4],!(c=C[9]=C[9]===o?f?0:t.length:qn(C[9]-d,0))&&e&(w|x)&&(e&=~(w|x)),e&&e!=m)E=e==w||e==x?function(t,e,n){var i=co(t);return function s(){for(var a=arguments.length,u=r(a),l=a,c=Io(s);l--;)u[l]=arguments[l];var h=a<3&&u[0]!==c&&u[a-1]!==c?[]:On(u,c);return(a-=h.length)<n?xo(t,e,po,s.placeholder,o,u,h,o,o,n-a):qe(this&&this!==Ne&&this instanceof s?i:t,this,u)}}(t,e,c):e!=_&&e!=(m|_)||s.length?po.apply(o,C):function(t,e,n,i){var o=e&m,s=co(t);return function e(){for(var a=-1,u=arguments.length,l=-1,c=i.length,h=r(c+u),f=this&&this!==Ne&&this instanceof e?s:t;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++a];return qe(f,o?n:this,h)}}(t,e,n,i);else var E=function(t,e,n){var r=e&m,i=co(t);return function e(){return(this&&this!==Ne&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return ss((v?Ei:rs)(E,C),t,e)}function Co(t,e,n,r){return t===o||da(t,ae[n])&&!ce.call(r,n)?e:t}function Eo(t,e,n,r,i,s){return Ea(t)&&Ea(e)&&(s.set(e,t),gi(t,e,o,Eo,s),s.delete(e)),t}function Oo(t){return Pa(t)?o:t}function Mo(t,e,n,r,i,s){var a=n&g,u=t.length,l=e.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var h=-1,f=!0,d=n&v?new xr:o;for(s.set(t,e),s.set(e,t);++h<u;){var p=t[h],m=e[h];if(r)var y=a?r(m,p,h,e,t,s):r(p,m,h,t,e,s);if(y!==o){if(y)continue;f=!1;break}if(d){if(!rn(e,function(t,e){if(!bn(d,e)&&(p===t||i(p,t,n,r,s)))return d.push(e)})){f=!1;break}}else if(p!==m&&!i(p,m,n,r,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function Ao(t){return os(ts(t,o,ys),t+"")}function Po(t){return Qr(t,iu,zo)}function Do(t){return Qr(t,ou,Wo)}var No=rr?function(t){return rr.get(t)}:Iu;function Lo(t){for(var e=t.name+"",n=ir[e],r=ce.call(ir,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Io(t){return(ce.call(dr,"placeholder")?dr:t).placeholder}function Ro(){var t=dr.iteratee||Pu;return t=t===Pu?ui:t,arguments.length?t(arguments[0],arguments[1]):t}function jo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Fo(t){for(var e=iu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Jo(i)]}return e}function Bo(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return ai(n)?n:o}var zo=zn?function(t){return null==t?[]:(t=ee(t),Ke(zn(t),function(e){return Le.call(t,e)}))}:Uu,Wo=zn?function(t){for(var e=[];t;)tn(e,zo(t)),t=Pe(t);return e}:Uu,Uo=Jr;function Vo(t,e,n){for(var r=-1,i=(e=Hi(e,t)).length,o=!1;++r<i;){var s=cs(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ca(i)&&Ho(s,i)&&(ma(t)||va(t))}function Go(t){return"function"!=typeof t.constructor||Qo(t)?{}:pr(Pe(t))}function qo(t){return ma(t)||va(t)||!!(je&&t&&t[je])}function Ho(t,e){var n=typeof t;return!!(e=null==e?L:e)&&("number"==n||"symbol"!=n&&Yt.test(t))&&t>-1&&t%1==0&&t<e}function $o(t,e,n){if(!Ea(n))return!1;var r=typeof e;return!!("number"==r?ba(n)&&Ho(e,n.length):"string"==r&&e in n)&&da(n[e],t)}function Yo(t,e){if(ma(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ia(t))||At.test(t)||!Mt.test(t)||null!=e&&t in ee(e)}function Xo(t){var e=Lo(t),n=dr[e];if("function"!=typeof n||!(e in mr.prototype))return!1;if(t===n)return!0;var r=No(n);return!!r&&t===r[0]}(Qn&&Uo(new Qn(new ArrayBuffer(1)))!=lt||Jn&&Uo(new Jn)!=K||Zn&&"[object Promise]"!=Uo(Zn.resolve())||tr&&Uo(new tr)!=nt||er&&Uo(new er)!=st)&&(Uo=function(t){var e=Jr(t),n=e==Z?t.constructor:o,r=n?hs(n):"";if(r)switch(r){case or:return lt;case sr:return K;case ar:return"[object Promise]";case ur:return nt;case lr:return st}return e});var Ko=ue?ka:Vu;function Qo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ae)}function Jo(t){return t===t&&!Ea(t)}function Zo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in ee(n))}}function ts(t,e,n){return e=qn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=qn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),qe(t,this,u)}}function es(t,e){return e.length<2?t:Kr(t,Ai(e,0,-1))}function ns(t,e){if("__proto__"!=e)return t[e]}var rs=as(Ei),is=jn||function(t,e){return Ne.setTimeout(t,e)},os=as(Oi);function ss(t,e,n){var r=e+"";return os(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(jt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return $e(z,function(n){var r="_."+n[0];e&n[1]&&!Qe(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Ft);return e?e[1].split(Bt):[]}(r),n)))}function as(t){var e=0,n=0;return function(){var r=$n(),i=A-(r-n);if(n=r,i>0){if(++e>=M)return arguments[0]}else e=0;return t.apply(o,arguments)}}function us(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var s=xi(n,i),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var ls=function(t){var e=aa(t,function(t){return n.size===c&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Pt,function(t,n,r,i){e.push(r?i.replace(Wt,"$1"):n||t)}),e});function cs(t){if("string"==typeof t||Ia(t))return t;var e=t+"";return"0"==e&&1/t==-N?"-0":e}function hs(t){if(null!=t){try{return le.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function fs(t){if(t instanceof mr)return t.clone();var e=new vr(t.__wrapped__,t.__chain__);return e.__actions__=no(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ds=Si(function(t,e){return wa(t)?Fr(t,Gr(e,1,wa,!0)):[]}),ps=Si(function(t,e){var n=Ss(e);return wa(n)&&(n=o),wa(t)?Fr(t,Gr(e,1,wa,!0),Ro(n,2)):[]}),gs=Si(function(t,e){var n=Ss(e);return wa(n)&&(n=o),wa(t)?Fr(t,Gr(e,1,wa,!0),o,n):[]});function vs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Wa(n);return i<0&&(i=qn(r+i,0)),an(t,Ro(e,3),i)}function ms(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Wa(n),i=n<0?qn(r+i,0):Hn(i,r-1)),an(t,Ro(e,3),i,!0)}function ys(t){return null!=t&&t.length?Gr(t,1):[]}function bs(t){return t&&t.length?t[0]:o}var ws=Si(function(t){var e=Ze(t,Gi);return e.length&&e[0]===t[0]?ni(e):[]}),xs=Si(function(t){var e=Ss(t),n=Ze(t,Gi);return e===Ss(n)?e=o:n.pop(),n.length&&n[0]===t[0]?ni(n,Ro(e,2)):[]}),_s=Si(function(t){var e=Ss(t),n=Ze(t,Gi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?ni(n,o,e):[]});function Ss(t){var e=null==t?0:t.length;return e?t[e-1]:o}var ks=Si(Ts);function Ts(t,e){return t&&t.length&&e&&e.length?bi(t,e):t}var Cs=Ao(function(t,e){var n=null==t?0:t.length,r=Nr(t,e);return wi(t,Ze(e,function(t){return Ho(t,n)?+t:t}).sort(Zi)),r});function Es(t){return null==t?t:Kn.call(t)}var Os=Si(function(t){return ji(Gr(t,1,wa,!0))}),Ms=Si(function(t){var e=Ss(t);return wa(e)&&(e=o),ji(Gr(t,1,wa,!0),Ro(e,2))}),As=Si(function(t){var e=Ss(t);return e="function"==typeof e?e:o,ji(Gr(t,1,wa,!0),o,e)});function Ps(t){if(!t||!t.length)return[];var e=0;return t=Ke(t,function(t){if(wa(t))return e=qn(t.length,e),!0}),vn(e,function(e){return Ze(t,fn(e))})}function Ds(t,e){if(!t||!t.length)return[];var n=Ps(t);return null==e?n:Ze(n,function(t){return qe(e,o,t)})}var Ns=Si(function(t,e){return wa(t)?Fr(t,e):[]}),Ls=Si(function(t){return Ui(Ke(t,wa))}),Is=Si(function(t){var e=Ss(t);return wa(e)&&(e=o),Ui(Ke(t,wa),Ro(e,2))}),Rs=Si(function(t){var e=Ss(t);return e="function"==typeof e?e:o,Ui(Ke(t,wa),o,e)}),js=Si(Ps);var Fs=Si(function(t){var e=t.length,n=e>1?t[e-1]:o;return Ds(t,n="function"==typeof n?(t.pop(),n):o)});function Bs(t){var e=dr(t);return e.__chain__=!0,e}function zs(t,e){return e(t)}var Ws=Ao(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Nr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof mr&&Ho(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:zs,args:[i],thisArg:o}),new vr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(i)});var Us=io(function(t,e,n){ce.call(t,n)?++t[n]:Dr(t,n,1)});var Vs=ho(vs),Gs=ho(ms);function qs(t,e){return(ma(t)?$e:Br)(t,Ro(e,3))}function Hs(t,e){return(ma(t)?Ye:zr)(t,Ro(e,3))}var $s=io(function(t,e,n){ce.call(t,n)?t[n].push(e):Dr(t,n,[e])});var Ys=Si(function(t,e,n){var i=-1,o="function"==typeof e,s=ba(t)?r(t.length):[];return Br(t,function(t){s[++i]=o?qe(e,t,n):ri(t,e,n)}),s}),Xs=io(function(t,e,n){Dr(t,n,e)});function Ks(t,e){return(ma(t)?Ze:fi)(t,Ro(e,3))}var Qs=io(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Js=Si(function(t,e){if(null==t)return[];var n=e.length;return n>1&&$o(t,e[0],e[1])?e=[]:n>2&&$o(e[0],e[1],e[2])&&(e=[e[0]]),mi(t,Gr(e,1),[])}),Zs=Rn||function(){return Ne.Date.now()};function ta(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,To(t,k,o,o,o,o,e)}function ea(t,e){var n;if("function"!=typeof e)throw new ie(u);return t=Wa(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var na=Si(function(t,e,n){var r=m;if(n.length){var i=On(n,Io(na));r|=_}return To(t,r,e,n,i)}),ra=Si(function(t,e,n){var r=m|y;if(n.length){var i=On(n,Io(ra));r|=_}return To(e,r,t,n,i)});function ia(t,e,n){var r,i,s,a,l,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new ie(u);function g(e){var n=r,s=i;return r=i=o,h=e,a=t.apply(s,n)}function v(t){var n=t-c;return c===o||n>=e||n<0||d&&t-h>=s}function m(){var t=Zs();if(v(t))return y(t);l=is(m,function(t){var n=e-(t-c);return d?Hn(n,s-(t-h)):n}(t))}function y(t){return l=o,p&&r?g(t):(r=i=o,a)}function b(){var t=Zs(),n=v(t);if(r=arguments,i=this,c=t,n){if(l===o)return function(t){return h=t,l=is(m,e),f?g(t):a}(c);if(d)return l=is(m,e),g(c)}return l===o&&(l=is(m,e)),a}return e=Va(e)||0,Ea(n)&&(f=!!n.leading,s=(d="maxWait"in n)?qn(Va(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==o&&Xi(l),h=0,r=c=i=l=o},b.flush=function(){return l===o?a:y(Zs())},b}var oa=Si(function(t,e){return jr(t,1,e)}),sa=Si(function(t,e,n){return jr(t,Va(e)||0,n)});function aa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(u);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(aa.Cache||wr),n}function ua(t){if("function"!=typeof t)throw new ie(u);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}aa.Cache=wr;var la=$i(function(t,e){var n=(e=1==e.length&&ma(e[0])?Ze(e[0],mn(Ro())):Ze(Gr(e,1),mn(Ro()))).length;return Si(function(r){for(var i=-1,o=Hn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return qe(t,this,r)})}),ca=Si(function(t,e){var n=On(e,Io(ca));return To(t,_,o,e,n)}),ha=Si(function(t,e){var n=On(e,Io(ha));return To(t,S,o,e,n)}),fa=Ao(function(t,e){return To(t,T,o,o,o,e)});function da(t,e){return t===e||t!==t&&e!==e}var pa=wo(Zr),ga=wo(function(t,e){return t>=e}),va=ii(function(){return arguments}())?ii:function(t){return Oa(t)&&ce.call(t,"callee")&&!Le.call(t,"callee")},ma=r.isArray,ya=Be?mn(Be):function(t){return Oa(t)&&Jr(t)==ut};function ba(t){return null!=t&&Ca(t.length)&&!ka(t)}function wa(t){return Oa(t)&&ba(t)}var xa=Wn||Vu,_a=ze?mn(ze):function(t){return Oa(t)&&Jr(t)==q};function Sa(t){if(!Oa(t))return!1;var e=Jr(t);return e==$||e==H||"string"==typeof t.message&&"string"==typeof t.name&&!Pa(t)}function ka(t){if(!Ea(t))return!1;var e=Jr(t);return e==Y||e==X||e==V||e==tt}function Ta(t){return"number"==typeof t&&t==Wa(t)}function Ca(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=L}function Ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Oa(t){return null!=t&&"object"==typeof t}var Ma=We?mn(We):function(t){return Oa(t)&&Uo(t)==K};function Aa(t){return"number"==typeof t||Oa(t)&&Jr(t)==Q}function Pa(t){if(!Oa(t)||Jr(t)!=Z)return!1;var e=Pe(t);if(null===e)return!0;var n=ce.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&le.call(n)==pe}var Da=Ue?mn(Ue):function(t){return Oa(t)&&Jr(t)==et};var Na=Ve?mn(Ve):function(t){return Oa(t)&&Uo(t)==nt};function La(t){return"string"==typeof t||!ma(t)&&Oa(t)&&Jr(t)==rt}function Ia(t){return"symbol"==typeof t||Oa(t)&&Jr(t)==it}var Ra=Ge?mn(Ge):function(t){return Oa(t)&&Ca(t.length)&&!!Ce[Jr(t)]};var ja=wo(hi),Fa=wo(function(t,e){return t<=e});function Ba(t){if(!t)return[];if(ba(t))return La(t)?Dn(t):no(t);if(Fe&&t[Fe])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Fe]());var e=Uo(t);return(e==K?Cn:e==nt?Mn:du)(t)}function za(t){return t?(t=Va(t))===N||t===-N?(t<0?-1:1)*I:t===t?t:0:0===t?t:0}function Wa(t){var e=za(t),n=e%1;return e===e?n?e-n:e:0}function Ua(t){return t?Lr(Wa(t),0,j):0}function Va(t){if("number"==typeof t)return t;if(Ia(t))return R;if(Ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Lt,"");var n=qt.test(t);return n||$t.test(t)?Ae(t.slice(2),n?2:8):Gt.test(t)?R:+t}function Ga(t){return ro(t,ou(t))}function qa(t){return null==t?"":Ri(t)}var Ha=oo(function(t,e){if(Qo(e)||ba(e))ro(e,iu(e),t);else for(var n in e)ce.call(e,n)&&Or(t,n,e[n])}),$a=oo(function(t,e){ro(e,ou(e),t)}),Ya=oo(function(t,e,n,r){ro(e,ou(e),t,r)}),Xa=oo(function(t,e,n,r){ro(e,iu(e),t,r)}),Ka=Ao(Nr);var Qa=Si(function(t,e){t=ee(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&$o(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],a=ou(s),u=-1,l=a.length;++u<l;){var c=a[u],h=t[c];(h===o||da(h,ae[c])&&!ce.call(t,c))&&(t[c]=s[c])}return t}),Ja=Si(function(t){return t.push(o,Eo),qe(au,o,t)});function Za(t,e,n){var r=null==t?o:Kr(t,e);return r===o?n:r}function tu(t,e){return null!=t&&Vo(t,e,ei)}var eu=go(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=n},Eu(Au)),nu=go(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),ce.call(t,e)?t[e].push(n):t[e]=[n]},Ro),ru=Si(ri);function iu(t){return ba(t)?Sr(t):li(t)}function ou(t){return ba(t)?Sr(t,!0):ci(t)}var su=oo(function(t,e,n){gi(t,e,n)}),au=oo(function(t,e,n,r){gi(t,e,n,r)}),uu=Ao(function(t,e){var n={};if(null==t)return n;var r=!1;e=Ze(e,function(e){return e=Hi(e,t),r||(r=e.length>1),e}),ro(t,Do(t),n),r&&(n=Ir(n,f|d|p,Oo));for(var i=e.length;i--;)Fi(n,e[i]);return n});var lu=Ao(function(t,e){return null==t?{}:function(t,e){return yi(t,e,function(e,n){return tu(t,n)})}(t,e)});function cu(t,e){if(null==t)return{};var n=Ze(Do(t),function(t){return[t]});return e=Ro(e),yi(t,n,function(t,n){return e(t,n[0])})}var hu=ko(iu),fu=ko(ou);function du(t){return null==t?[]:yn(t,iu(t))}var pu=lo(function(t,e,n){return e=e.toLowerCase(),t+(n?gu(e):e)});function gu(t){return Su(qa(t).toLowerCase())}function vu(t){return(t=qa(t))&&t.replace(Xt,_n).replace(be,"")}var mu=lo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),yu=lo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),bu=uo("toLowerCase");var wu=lo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var xu=lo(function(t,e,n){return t+(n?" ":"")+Su(e)});var _u=lo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Su=uo("toUpperCase");function ku(t,e,n){return t=qa(t),(e=n?o:e)===o?function(t){return Se.test(t)}(t)?function(t){return t.match(xe)||[]}(t):function(t){return t.match(zt)||[]}(t):t.match(e)||[]}var Tu=Si(function(t,e){try{return qe(t,o,e)}catch(t){return Sa(t)?t:new Jt(t)}}),Cu=Ao(function(t,e){return $e(e,function(e){e=cs(e),Dr(t,e,na(t[e],t))}),t});function Eu(t){return function(){return t}}var Ou=fo(),Mu=fo(!0);function Au(t){return t}function Pu(t){return ui("function"==typeof t?t:Ir(t,f))}var Du=Si(function(t,e){return function(n){return ri(n,t,e)}}),Nu=Si(function(t,e){return function(n){return ri(t,n,e)}});function Lu(t,e,n){var r=iu(e),i=Xr(e,r);null!=n||Ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Xr(e,iu(e)));var o=!(Ea(n)&&"chain"in n)||!!n.chain,s=ka(t);return $e(i,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=no(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function Iu(){}var Ru=mo(Ze),ju=mo(Xe),Fu=mo(rn);function Bu(t){return Yo(t)?fn(cs(t)):function(t){return function(e){return Kr(e,t)}}(t)}var zu=bo(),Wu=bo(!0);function Uu(){return[]}function Vu(){return!1}var Gu=vo(function(t,e){return t+e},0),qu=_o("ceil"),Hu=vo(function(t,e){return t/e},1),$u=_o("floor");var Yu,Xu=vo(function(t,e){return t*e},1),Ku=_o("round"),Qu=vo(function(t,e){return t-e},0);return dr.after=function(t,e){if("function"!=typeof e)throw new ie(u);return t=Wa(t),function(){if(--t<1)return e.apply(this,arguments)}},dr.ary=ta,dr.assign=Ha,dr.assignIn=$a,dr.assignInWith=Ya,dr.assignWith=Xa,dr.at=Ka,dr.before=ea,dr.bind=na,dr.bindAll=Cu,dr.bindKey=ra,dr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ma(t)?t:[t]},dr.chain=Bs,dr.chunk=function(t,e,n){e=(n?$o(t,e,n):e===o)?1:qn(Wa(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var s=0,a=0,u=r(Fn(i/e));s<i;)u[a++]=Ai(t,s,s+=e);return u},dr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},dr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(ma(n)?no(n):[n],Gr(e,1))},dr.cond=function(t){var e=null==t?0:t.length,n=Ro();return t=e?Ze(t,function(t){if("function"!=typeof t[1])throw new ie(u);return[n(t[0]),t[1]]}):[],Si(function(n){for(var r=-1;++r<e;){var i=t[r];if(qe(i[0],this,n))return qe(i[1],this,n)}})},dr.conforms=function(t){return function(t){var e=iu(t);return function(n){return Rr(n,t,e)}}(Ir(t,f))},dr.constant=Eu,dr.countBy=Us,dr.create=function(t,e){var n=pr(t);return null==e?n:Pr(n,e)},dr.curry=function t(e,n,r){var i=To(e,w,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},dr.curryRight=function t(e,n,r){var i=To(e,x,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},dr.debounce=ia,dr.defaults=Qa,dr.defaultsDeep=Ja,dr.defer=oa,dr.delay=sa,dr.difference=ds,dr.differenceBy=ps,dr.differenceWith=gs,dr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Ai(t,(e=n||e===o?1:Wa(e))<0?0:e,r):[]},dr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Ai(t,0,(e=r-(e=n||e===o?1:Wa(e)))<0?0:e):[]},dr.dropRightWhile=function(t,e){return t&&t.length?zi(t,Ro(e,3),!0,!0):[]},dr.dropWhile=function(t,e){return t&&t.length?zi(t,Ro(e,3),!0):[]},dr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&$o(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Wa(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:Wa(r))<0&&(r+=i),r=n>r?0:Ua(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},dr.filter=function(t,e){return(ma(t)?Ke:Vr)(t,Ro(e,3))},dr.flatMap=function(t,e){return Gr(Ks(t,e),1)},dr.flatMapDeep=function(t,e){return Gr(Ks(t,e),N)},dr.flatMapDepth=function(t,e,n){return n=n===o?1:Wa(n),Gr(Ks(t,e),n)},dr.flatten=ys,dr.flattenDeep=function(t){return null!=t&&t.length?Gr(t,N):[]},dr.flattenDepth=function(t,e){return null!=t&&t.length?Gr(t,e=e===o?1:Wa(e)):[]},dr.flip=function(t){return To(t,C)},dr.flow=Ou,dr.flowRight=Mu,dr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},dr.functions=function(t){return null==t?[]:Xr(t,iu(t))},dr.functionsIn=function(t){return null==t?[]:Xr(t,ou(t))},dr.groupBy=$s,dr.initial=function(t){return null!=t&&t.length?Ai(t,0,-1):[]},dr.intersection=ws,dr.intersectionBy=xs,dr.intersectionWith=_s,dr.invert=eu,dr.invertBy=nu,dr.invokeMap=Ys,dr.iteratee=Pu,dr.keyBy=Xs,dr.keys=iu,dr.keysIn=ou,dr.map=Ks,dr.mapKeys=function(t,e){var n={};return e=Ro(e,3),$r(t,function(t,r,i){Dr(n,e(t,r,i),t)}),n},dr.mapValues=function(t,e){var n={};return e=Ro(e,3),$r(t,function(t,r,i){Dr(n,r,e(t,r,i))}),n},dr.matches=function(t){return di(Ir(t,f))},dr.matchesProperty=function(t,e){return pi(t,Ir(e,f))},dr.memoize=aa,dr.merge=su,dr.mergeWith=au,dr.method=Du,dr.methodOf=Nu,dr.mixin=Lu,dr.negate=ua,dr.nthArg=function(t){return t=Wa(t),Si(function(e){return vi(e,t)})},dr.omit=uu,dr.omitBy=function(t,e){return cu(t,ua(Ro(e)))},dr.once=function(t){return ea(2,t)},dr.orderBy=function(t,e,n,r){return null==t?[]:(ma(e)||(e=null==e?[]:[e]),ma(n=r?o:n)||(n=null==n?[]:[n]),mi(t,e,n))},dr.over=Ru,dr.overArgs=la,dr.overEvery=ju,dr.overSome=Fu,dr.partial=ca,dr.partialRight=ha,dr.partition=Qs,dr.pick=lu,dr.pickBy=cu,dr.property=Bu,dr.propertyOf=function(t){return function(e){return null==t?o:Kr(t,e)}},dr.pull=ks,dr.pullAll=Ts,dr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,Ro(n,2)):t},dr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,o,n):t},dr.pullAt=Cs,dr.range=zu,dr.rangeRight=Wu,dr.rearg=fa,dr.reject=function(t,e){return(ma(t)?Ke:Vr)(t,ua(Ro(e,3)))},dr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Ro(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return wi(t,i),n},dr.rest=function(t,e){if("function"!=typeof t)throw new ie(u);return Si(t,e=e===o?e:Wa(e))},dr.reverse=Es,dr.sampleSize=function(t,e,n){return e=(n?$o(t,e,n):e===o)?1:Wa(e),(ma(t)?Tr:Ti)(t,e)},dr.set=function(t,e,n){return null==t?t:Ci(t,e,n)},dr.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Ci(t,e,n,r)},dr.shuffle=function(t){return(ma(t)?Cr:Mi)(t)},dr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&$o(t,e,n)?(e=0,n=r):(e=null==e?0:Wa(e),n=n===o?r:Wa(n)),Ai(t,e,n)):[]},dr.sortBy=Js,dr.sortedUniq=function(t){return t&&t.length?Li(t):[]},dr.sortedUniqBy=function(t,e){return t&&t.length?Li(t,Ro(e,2)):[]},dr.split=function(t,e,n){return n&&"number"!=typeof n&&$o(t,e,n)&&(e=n=o),(n=n===o?j:n>>>0)?(t=qa(t))&&("string"==typeof e||null!=e&&!Da(e))&&!(e=Ri(e))&&Tn(t)?Yi(Dn(t),0,n):t.split(e,n):[]},dr.spread=function(t,e){if("function"!=typeof t)throw new ie(u);return e=null==e?0:qn(Wa(e),0),Si(function(n){var r=n[e],i=Yi(n,0,e);return r&&tn(i,r),qe(t,this,i)})},dr.tail=function(t){var e=null==t?0:t.length;return e?Ai(t,1,e):[]},dr.take=function(t,e,n){return t&&t.length?Ai(t,0,(e=n||e===o?1:Wa(e))<0?0:e):[]},dr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Ai(t,(e=r-(e=n||e===o?1:Wa(e)))<0?0:e,r):[]},dr.takeRightWhile=function(t,e){return t&&t.length?zi(t,Ro(e,3),!1,!0):[]},dr.takeWhile=function(t,e){return t&&t.length?zi(t,Ro(e,3)):[]},dr.tap=function(t,e){return e(t),t},dr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ie(u);return Ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ia(t,e,{leading:r,maxWait:e,trailing:i})},dr.thru=zs,dr.toArray=Ba,dr.toPairs=hu,dr.toPairsIn=fu,dr.toPath=function(t){return ma(t)?Ze(t,cs):Ia(t)?[t]:no(ls(qa(t)))},dr.toPlainObject=Ga,dr.transform=function(t,e,n){var r=ma(t),i=r||xa(t)||Ra(t);if(e=Ro(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ea(t)&&ka(o)?pr(Pe(t)):{}}return(i?$e:$r)(t,function(t,r,i){return e(n,t,r,i)}),n},dr.unary=function(t){return ta(t,1)},dr.union=Os,dr.unionBy=Ms,dr.unionWith=As,dr.uniq=function(t){return t&&t.length?ji(t):[]},dr.uniqBy=function(t,e){return t&&t.length?ji(t,Ro(e,2)):[]},dr.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?ji(t,o,e):[]},dr.unset=function(t,e){return null==t||Fi(t,e)},dr.unzip=Ps,dr.unzipWith=Ds,dr.update=function(t,e,n){return null==t?t:Bi(t,e,qi(n))},dr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Bi(t,e,qi(n),r)},dr.values=du,dr.valuesIn=function(t){return null==t?[]:yn(t,ou(t))},dr.without=Ns,dr.words=ku,dr.wrap=function(t,e){return ca(qi(e),t)},dr.xor=Ls,dr.xorBy=Is,dr.xorWith=Rs,dr.zip=js,dr.zipObject=function(t,e){return Vi(t||[],e||[],Or)},dr.zipObjectDeep=function(t,e){return Vi(t||[],e||[],Ci)},dr.zipWith=Fs,dr.entries=hu,dr.entriesIn=fu,dr.extend=$a,dr.extendWith=Ya,Lu(dr,dr),dr.add=Gu,dr.attempt=Tu,dr.camelCase=pu,dr.capitalize=gu,dr.ceil=qu,dr.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=Va(n))===n?n:0),e!==o&&(e=(e=Va(e))===e?e:0),Lr(Va(t),e,n)},dr.clone=function(t){return Ir(t,p)},dr.cloneDeep=function(t){return Ir(t,f|p)},dr.cloneDeepWith=function(t,e){return Ir(t,f|p,e="function"==typeof e?e:o)},dr.cloneWith=function(t,e){return Ir(t,p,e="function"==typeof e?e:o)},dr.conformsTo=function(t,e){return null==e||Rr(t,e,iu(e))},dr.deburr=vu,dr.defaultTo=function(t,e){return null==t||t!==t?e:t},dr.divide=Hu,dr.endsWith=function(t,e,n){t=qa(t),e=Ri(e);var r=t.length,i=n=n===o?r:Lr(Wa(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},dr.eq=da,dr.escape=function(t){return(t=qa(t))&&Tt.test(t)?t.replace(St,Sn):t},dr.escapeRegExp=function(t){return(t=qa(t))&&Nt.test(t)?t.replace(Dt,"\\$&"):t},dr.every=function(t,e,n){var r=ma(t)?Xe:Wr;return n&&$o(t,e,n)&&(e=o),r(t,Ro(e,3))},dr.find=Vs,dr.findIndex=vs,dr.findKey=function(t,e){return sn(t,Ro(e,3),$r)},dr.findLast=Gs,dr.findLastIndex=ms,dr.findLastKey=function(t,e){return sn(t,Ro(e,3),Yr)},dr.floor=$u,dr.forEach=qs,dr.forEachRight=Hs,dr.forIn=function(t,e){return null==t?t:qr(t,Ro(e,3),ou)},dr.forInRight=function(t,e){return null==t?t:Hr(t,Ro(e,3),ou)},dr.forOwn=function(t,e){return t&&$r(t,Ro(e,3))},dr.forOwnRight=function(t,e){return t&&Yr(t,Ro(e,3))},dr.get=Za,dr.gt=pa,dr.gte=ga,dr.has=function(t,e){return null!=t&&Vo(t,e,ti)},dr.hasIn=tu,dr.head=bs,dr.identity=Au,dr.includes=function(t,e,n,r){t=ba(t)?t:du(t),n=n&&!r?Wa(n):0;var i=t.length;return n<0&&(n=qn(i+n,0)),La(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&un(t,e,n)>-1},dr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Wa(n);return i<0&&(i=qn(r+i,0)),un(t,e,i)},dr.inRange=function(t,e,n){return e=za(e),n===o?(n=e,e=0):n=za(n),function(t,e,n){return t>=Hn(e,n)&&t<qn(e,n)}(t=Va(t),e,n)},dr.invoke=ru,dr.isArguments=va,dr.isArray=ma,dr.isArrayBuffer=ya,dr.isArrayLike=ba,dr.isArrayLikeObject=wa,dr.isBoolean=function(t){return!0===t||!1===t||Oa(t)&&Jr(t)==G},dr.isBuffer=xa,dr.isDate=_a,dr.isElement=function(t){return Oa(t)&&1===t.nodeType&&!Pa(t)},dr.isEmpty=function(t){if(null==t)return!0;if(ba(t)&&(ma(t)||"string"==typeof t||"function"==typeof t.splice||xa(t)||Ra(t)||va(t)))return!t.length;var e=Uo(t);if(e==K||e==nt)return!t.size;if(Qo(t))return!li(t).length;for(var n in t)if(ce.call(t,n))return!1;return!0},dr.isEqual=function(t,e){return oi(t,e)},dr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?oi(t,e,o,n):!!r},dr.isError=Sa,dr.isFinite=function(t){return"number"==typeof t&&Un(t)},dr.isFunction=ka,dr.isInteger=Ta,dr.isLength=Ca,dr.isMap=Ma,dr.isMatch=function(t,e){return t===e||si(t,e,Fo(e))},dr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,si(t,e,Fo(e),n)},dr.isNaN=function(t){return Aa(t)&&t!=+t},dr.isNative=function(t){if(Ko(t))throw new Jt(a);return ai(t)},dr.isNil=function(t){return null==t},dr.isNull=function(t){return null===t},dr.isNumber=Aa,dr.isObject=Ea,dr.isObjectLike=Oa,dr.isPlainObject=Pa,dr.isRegExp=Da,dr.isSafeInteger=function(t){return Ta(t)&&t>=-L&&t<=L},dr.isSet=Na,dr.isString=La,dr.isSymbol=Ia,dr.isTypedArray=Ra,dr.isUndefined=function(t){return t===o},dr.isWeakMap=function(t){return Oa(t)&&Uo(t)==st},dr.isWeakSet=function(t){return Oa(t)&&Jr(t)==at},dr.join=function(t,e){return null==t?"":Vn.call(t,e)},dr.kebabCase=mu,dr.last=Ss,dr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=Wa(n))<0?qn(r+i,0):Hn(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):an(t,cn,i,!0)},dr.lowerCase=yu,dr.lowerFirst=bu,dr.lt=ja,dr.lte=Fa,dr.max=function(t){return t&&t.length?Ur(t,Au,Zr):o},dr.maxBy=function(t,e){return t&&t.length?Ur(t,Ro(e,2),Zr):o},dr.mean=function(t){return hn(t,Au)},dr.meanBy=function(t,e){return hn(t,Ro(e,2))},dr.min=function(t){return t&&t.length?Ur(t,Au,hi):o},dr.minBy=function(t,e){return t&&t.length?Ur(t,Ro(e,2),hi):o},dr.stubArray=Uu,dr.stubFalse=Vu,dr.stubObject=function(){return{}},dr.stubString=function(){return""},dr.stubTrue=function(){return!0},dr.multiply=Xu,dr.nth=function(t,e){return t&&t.length?vi(t,Wa(e)):o},dr.noConflict=function(){return Ne._===this&&(Ne._=ge),this},dr.noop=Iu,dr.now=Zs,dr.pad=function(t,e,n){t=qa(t);var r=(e=Wa(e))?Pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return yo(Bn(i),n)+t+yo(Fn(i),n)},dr.padEnd=function(t,e,n){t=qa(t);var r=(e=Wa(e))?Pn(t):0;return e&&r<e?t+yo(e-r,n):t},dr.padStart=function(t,e,n){t=qa(t);var r=(e=Wa(e))?Pn(t):0;return e&&r<e?yo(e-r,n)+t:t},dr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Yn(qa(t).replace(It,""),e||0)},dr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&$o(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=za(t),e===o?(e=t,t=0):e=za(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Xn();return Hn(t+i*(e-t+Me("1e-"+((i+"").length-1))),e)}return xi(t,e)},dr.reduce=function(t,e,n){var r=ma(t)?en:pn,i=arguments.length<3;return r(t,Ro(e,4),n,i,Br)},dr.reduceRight=function(t,e,n){var r=ma(t)?nn:pn,i=arguments.length<3;return r(t,Ro(e,4),n,i,zr)},dr.repeat=function(t,e,n){return e=(n?$o(t,e,n):e===o)?1:Wa(e),_i(qa(t),e)},dr.replace=function(){var t=arguments,e=qa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dr.result=function(t,e,n){var r=-1,i=(e=Hi(e,t)).length;for(i||(i=1,t=o);++r<i;){var s=null==t?o:t[cs(e[r])];s===o&&(r=i,s=n),t=ka(s)?s.call(t):s}return t},dr.round=Ku,dr.runInContext=t,dr.sample=function(t){return(ma(t)?kr:ki)(t)},dr.size=function(t){if(null==t)return 0;if(ba(t))return La(t)?Pn(t):t.length;var e=Uo(t);return e==K||e==nt?t.size:li(t).length},dr.snakeCase=wu,dr.some=function(t,e,n){var r=ma(t)?rn:Pi;return n&&$o(t,e,n)&&(e=o),r(t,Ro(e,3))},dr.sortedIndex=function(t,e){return Di(t,e)},dr.sortedIndexBy=function(t,e,n){return Ni(t,e,Ro(n,2))},dr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Di(t,e);if(r<n&&da(t[r],e))return r}return-1},dr.sortedLastIndex=function(t,e){return Di(t,e,!0)},dr.sortedLastIndexBy=function(t,e,n){return Ni(t,e,Ro(n,2),!0)},dr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Di(t,e,!0)-1;if(da(t[n],e))return n}return-1},dr.startCase=xu,dr.startsWith=function(t,e,n){return t=qa(t),n=null==n?0:Lr(Wa(n),0,t.length),e=Ri(e),t.slice(n,n+e.length)==e},dr.subtract=Qu,dr.sum=function(t){return t&&t.length?gn(t,Au):0},dr.sumBy=function(t,e){return t&&t.length?gn(t,Ro(e,2)):0},dr.template=function(t,e,n){var r=dr.templateSettings;n&&$o(t,e,n)&&(e=o),t=qa(t),e=Ya({},e,r,Co);var i,s,a=Ya({},e.imports,r.imports,Co),u=iu(a),l=yn(a,u),c=0,h=e.interpolate||Kt,f="__p += '",d=ne((e.escape||Kt).source+"|"+h.source+"|"+(h===Ot?Ut:Kt).source+"|"+(e.evaluate||Kt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Te+"]")+"\n";t.replace(d,function(e,n,r,o,a,u){return r||(r=o),f+=t.slice(c,u).replace(Qt,kn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),f+="';\n";var g=e.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(bt,""):f).replace(wt,"$1").replace(xt,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Tu(function(){return Zt(u,p+"return "+f).apply(o,l)});if(v.source=f,Sa(v))throw v;return v},dr.times=function(t,e){if((t=Wa(t))<1||t>L)return[];var n=j,r=Hn(t,j);e=Ro(e),t-=j;for(var i=vn(r,e);++n<t;)e(n);return i},dr.toFinite=za,dr.toInteger=Wa,dr.toLength=Ua,dr.toLower=function(t){return qa(t).toLowerCase()},dr.toNumber=Va,dr.toSafeInteger=function(t){return t?Lr(Wa(t),-L,L):0===t?t:0},dr.toString=qa,dr.toUpper=function(t){return qa(t).toUpperCase()},dr.trim=function(t,e,n){if((t=qa(t))&&(n||e===o))return t.replace(Lt,"");if(!t||!(e=Ri(e)))return t;var r=Dn(t),i=Dn(e);return Yi(r,wn(r,i),xn(r,i)+1).join("")},dr.trimEnd=function(t,e,n){if((t=qa(t))&&(n||e===o))return t.replace(Rt,"");if(!t||!(e=Ri(e)))return t;var r=Dn(t);return Yi(r,0,xn(r,Dn(e))+1).join("")},dr.trimStart=function(t,e,n){if((t=qa(t))&&(n||e===o))return t.replace(It,"");if(!t||!(e=Ri(e)))return t;var r=Dn(t);return Yi(r,wn(r,Dn(e))).join("")},dr.truncate=function(t,e){var n=E,r=O;if(Ea(e)){var i="separator"in e?e.separator:i;n="length"in e?Wa(e.length):n,r="omission"in e?Ri(e.omission):r}var s=(t=qa(t)).length;if(Tn(t)){var a=Dn(t);s=a.length}if(n>=s)return t;var u=n-Pn(r);if(u<1)return r;var l=a?Yi(a,0,u).join(""):t.slice(0,u);if(i===o)return l+r;if(a&&(u+=l.length-u),Da(i)){if(t.slice(u).search(i)){var c,h=l;for(i.global||(i=ne(i.source,qa(Vt.exec(i))+"g")),i.lastIndex=0;c=i.exec(h);)var f=c.index;l=l.slice(0,f===o?u:f)}}else if(t.indexOf(Ri(i),u)!=u){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r},dr.unescape=function(t){return(t=qa(t))&&kt.test(t)?t.replace(_t,Nn):t},dr.uniqueId=function(t){var e=++he;return qa(t)+e},dr.upperCase=_u,dr.upperFirst=Su,dr.each=qs,dr.eachRight=Hs,dr.first=bs,Lu(dr,(Yu={},$r(dr,function(t,e){ce.call(dr.prototype,e)||(Yu[e]=t)}),Yu),{chain:!1}),dr.VERSION="4.17.11",$e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){dr[t].placeholder=dr}),$e(["drop","take"],function(t,e){mr.prototype[t]=function(n){n=n===o?1:qn(Wa(n),0);var r=this.__filtered__&&!e?new mr(this):this.clone();return r.__filtered__?r.__takeCount__=Hn(n,r.__takeCount__):r.__views__.push({size:Hn(n,j),type:t+(r.__dir__<0?"Right":"")}),r},mr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),$e(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==P||3==n;mr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ro(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),$e(["head","last"],function(t,e){var n="take"+(e?"Right":"");mr.prototype[t]=function(){return this[n](1).value()[0]}}),$e(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");mr.prototype[t]=function(){return this.__filtered__?new mr(this):this[n](1)}}),mr.prototype.compact=function(){return this.filter(Au)},mr.prototype.find=function(t){return this.filter(t).head()},mr.prototype.findLast=function(t){return this.reverse().find(t)},mr.prototype.invokeMap=Si(function(t,e){return"function"==typeof t?new mr(this):this.map(function(n){return ri(n,t,e)})}),mr.prototype.reject=function(t){return this.filter(ua(Ro(t)))},mr.prototype.slice=function(t,e){t=Wa(t);var n=this;return n.__filtered__&&(t>0||e<0)?new mr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=Wa(e))<0?n.dropRight(-e):n.take(e-t)),n)},mr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},mr.prototype.toArray=function(){return this.take(j)},$r(mr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=dr[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);i&&(dr.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof mr,l=a[0],c=u||ma(e),h=function(t){var e=i.apply(dr,tn([t],a));return r&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=u&&!d;if(!s&&c){e=g?e:new mr(this);var v=t.apply(e,a);return v.__actions__.push({func:zs,args:[h],thisArg:o}),new vr(v,f)}return p&&g?t.apply(this,a):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})}),$e(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);dr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ma(i)?i:[],t)}return this[n](function(n){return e.apply(ma(n)?n:[],t)})}}),$r(mr.prototype,function(t,e){var n=dr[e];if(n){var r=n.name+"";(ir[r]||(ir[r]=[])).push({name:e,func:n})}}),ir[po(o,y).name]=[{name:"wrapper",func:o}],mr.prototype.clone=function(){var t=new mr(this.__wrapped__);return t.__actions__=no(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=no(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=no(this.__views__),t},mr.prototype.reverse=function(){if(this.__filtered__){var t=new mr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},mr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ma(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Hn(e,t+s);break;case"takeRight":t=qn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,l=r?a:s-1,c=this.__iteratees__,h=c.length,f=0,d=Hn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return Wi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,v=t[l+=e];++g<h;){var m=c[g],y=m.iteratee,b=m.type,w=y(v);if(b==D)v=w;else if(!w){if(b==P)continue t;break t}}p[f++]=v}return p},dr.prototype.at=Ws,dr.prototype.chain=function(){return Bs(this)},dr.prototype.commit=function(){return new vr(this.value(),this.__chain__)},dr.prototype.next=function(){this.__values__===o&&(this.__values__=Ba(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},dr.prototype.plant=function(t){for(var e,n=this;n instanceof gr;){var r=fs(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},dr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof mr){var e=t;return this.__actions__.length&&(e=new mr(this)),(e=e.reverse()).__actions__.push({func:zs,args:[Es],thisArg:o}),new vr(e,this.__chain__)}return this.thru(Es)},dr.prototype.toJSON=dr.prototype.valueOf=dr.prototype.value=function(){return Wi(this.__wrapped__,this.__actions__)},dr.prototype.first=dr.prototype.head,Fe&&(dr.prototype[Fe]=function(){return this}),dr}();Ne._=Ln,(i=function(){return Ln}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(e,n(3),n(36)(t))},function(t,e,n){var r;try{r=n(4)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){"use strict";t.exports=n(81)},function(t,e,n){var r;try{r=n(91)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"===typeof t}function i(t){return"object"===typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(l=n.slice()).length,u=0;u<s;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"===typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){function r(t,e){r.super.call(this,e),this.code=t}n(135)(r),t.exports=r},function(t,e){e.doNothing=function(){},e.hasKeys=function(t){for(var e in t)return!0;return!1},e.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},e.isValidVersion=function(t){return null===t||e.isInteger(t)&&t>=0}},function(t,e,n){e.defaultType=n(51).type,e.map={},e.register=function(t){t.name&&(e.map[t.name]=t),t.uri&&(e.map[t.uri]=t)},e.register(e.defaultType)},function(t,e,n){var r=n(8).EventEmitter;e.EventEmitter=r,e.mixin=function(t){for(var e in r.prototype)t.prototype[e]=r.prototype[e]}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(19),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(15);o.inherits=n(13);var s=n(61),a=n(30);o.inherits(h,s);for(var u=i(a.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"===typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"===typeof t},e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=t.isBuffer}).call(e,n(64).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(161);n(162);const i=n(37),o=n(22),s=n(4),a=n(33),u=n(163),l=n(164);var c;!function(t){t[t.IDLE=0]="IDLE",t[t.CT_PRESSED_FROM=1]="CT_PRESSED_FROM",t[t.CT_LEFT_FROM=2]="CT_LEFT_FROM",t[t.CT_OVER_TO=3]="CT_OVER_TO",t[t.AT_AWAITING_FROM=4]="AT_AWAITING_FROM",t[t.AT_AWAITING_TO=5]="AT_AWAITING_TO",t[t.RMS_WAITING=6]="RMS_WAITING",t[t.RMT_WAITING=7]="RMT_WAITING",t[t.TRANSITION_CHANGE_FROM=8]="TRANSITION_CHANGE_FROM",t[t.TRANSITION_CHANGE_TO=9]="TRANSITION_CHANGE_TO"}(c||(c={})),function(t){t[t.STATE=0]="STATE",t[t.TRANSITION=1]="TRANSITION"}(e.DISPLAY_TYPE||(e.DISPLAY_TYPE={}));const h="ADDSTATE";class f{constructor(t,e,n=a.displayName,i){this.fsm=t,this.element=e,this.getForeignObjectViewport=n,this.states=new Map,this.transitions=new Map,this.fsmState=c.IDLE,this.creatingTransitionLine=null,this.addTransitionButton=document.createElement("button"),this.removeStateButton=document.createElement("button"),this.removeTransitionButton=document.createElement("button"),this.resetLayoutButton=document.createElement("button"),this.startStateDimensions={width:10,height:10},this.stateDimensions={width:80,height:40},this.transitionLabelDimensions={width:120,height:30},this.colors={selectColor:"#002366",selectBackgroundColor:"#AAFFFF",startStateBackgroundColor:"#333",stateBackgroundColor:"#AAA",stateTextColor:"#444",transitionLineColor:"#777",transitionBackgroundColor:"#EEE",creatingTransitionColor:"#F00",activeColor:"#F00",activeBackgroundColor:"#FAA"},this.resetLayout=(()=>{this.fsm.setActiveState(this.fsm.getStartState())}),this.addState=(t=>{const e=this.fsm.addState(t);return this.addViewForNewNodes(),this.updateLayout(),e}),this.addStateClicked=(()=>{this.addState()}),this.addTransitionClicked=(()=>{this.fsmState=c.AT_AWAITING_FROM}),this.removeStateClicked=(()=>{this.fsmState=c.RMS_WAITING}),this.removeTransitionClicked=(()=>{this.fsmState=c.RMT_WAITING}),this.mouseoverTransitionGroup=((t,e)=>{if(this.hoveringTransition){this.transitions.get(this.hoveringTransition).updateColors()}this.hoveringTransition=t;const n=this.transitions.get(t);n.updateColors(),n.getForeignObjectDisplay().mouseEntered()}),this.mouseoutTransitionGroup=((t,e)=>{const n=this.transitions.get(t);this.hoveringTransition===t&&(this.hoveringTransition=null,n.updateColors()),n.getForeignObjectDisplay().mouseLeft()}),this.mousedownTransitionGroup=((t,e)=>{if(this.fsmState===c.RMT_WAITING)this.fsm.removeTransition(t),this.removeViewForOldTransitions(),this.fsmState=c.IDLE,this.updateLayout();else if(1===e.which){const n=this.fsm.getTransitionFrom(t),r=this.fsm.getTransitionTo(t),{points:i}=this.graph.edge({v:n,w:r,name:t}),o=i[0],s=i[i.length-1],a=e.offsetX,u=e.offsetY,l=Math.pow(a-o.x,2)+Math.pow(u-o.y,2),h=Math.pow(a-s.x,2)+Math.pow(u-s.y,2),f=l<h&&l<300,d=l>h&&h<300,p=this.transitions.get(t);if(f||d){f?(this.creatingTransitionToState=r,this.fsmState=c.TRANSITION_CHANGE_FROM):(this.creatingTransitionFromState=n,this.fsmState=c.TRANSITION_CHANGE_TO);const i=p.getGroup(),o=p.getPath();this.creatingTransitionLine=this.svg.group(),i.removeElement(o),this.creatingTransitionLine.add(o),o.stroke({color:this.colors.creatingTransitionColor}).addClass("nopointer"),this.modifyingTransition=t,this.updateCreatingTransitionLine(a,u),e.preventDefault(),e.stopPropagation()}}}),this.mousemoveWindow=(t=>{if(null!==this.creatingTransitionLine){const{clientX:e,clientY:n}=t,{x:r,y:i}=this.svg.node.getBoundingClientRect();this.updateCreatingTransitionLine(e-r,n-i)}}),this.mousedownStateGroup=((t,e)=>{this.fsmState===c.IDLE&&3===e.which?(this.fsmState=c.CT_PRESSED_FROM,this.creatingTransitionFromState=t,this.creatingTransitionLine=this.svg.group(),this.creatingTransitionLine.path("").stroke({color:this.colors.creatingTransitionColor,width:this.options.transitionThickness}).fill("none").addClass("nopointer"),e.preventDefault(),e.stopPropagation(),this.mousemoveWindow(e)):this.fsmState===c.AT_AWAITING_FROM?(this.fsmState=c.AT_AWAITING_TO,this.creatingTransitionFromState=t,this.creatingTransitionLine=this.svg.group(),this.creatingTransitionLine.path("").stroke({color:this.colors.creatingTransitionColor,width:this.options.transitionThickness}).fill("none").addClass("nopointer")):this.fsmState===c.AT_AWAITING_TO?(this.creatingTransitionToState=t,this.addTransition(this.creatingTransitionFromState,this.creatingTransitionToState,{}),this.destroyTransitionCreationIntermediateData(),this.fsmState=c.IDLE):this.fsmState===c.RMS_WAITING?(this.fsm.removeState(t),this.removeViewForOldNodes(),this.removeViewForOldTransitions(),this.updateLayout(),this.fsmState=c.IDLE):this.destroyTransitionCreationIntermediateData()}),this.mouseoutStateGroup=((t,e)=>{const n=this.states.get(t);this.hoveringState===t&&(this.hoveringState=null,n.updateColors()),this.fsmState===c.CT_PRESSED_FROM&&t===this.creatingTransitionFromState?this.fsmState=c.CT_LEFT_FROM:this.fsmState===c.CT_OVER_TO&&(this.fsmState=c.CT_LEFT_FROM,this.creatingTransitionToState=null),n.getForeignObjectDisplay().mouseLeft(),e.preventDefault()}),this.mouseoverStateGroup=((t,e)=>{const n=this.states.get(t);this.hoveringState=t,n.updateColors(),this.fsmState===c.CT_LEFT_FROM&&(this.fsmState=c.CT_OVER_TO,this.creatingTransitionToState=t),n.getForeignObjectDisplay().mouseEntered(),e.preventDefault()}),this.keydownWindow=(t=>{27===t.which&&this.fsmState!==c.IDLE&&(this.destroyTransitionCreationIntermediateData(),this.updateLayout())}),this.mouseupWindow=(t=>{t.preventDefault(),this.fsmState!==c.AT_AWAITING_TO&&this.fsmState!==c.CT_LEFT_FROM&&this.fsmState!==c.TRANSITION_CHANGE_FROM&&this.fsmState!==c.TRANSITION_CHANGE_TO||(this.destroyTransitionCreationIntermediateData(),this.updateLayout())}),this.mouseupStateGroup=((t,e)=>{if(this.fsmState===c.CT_OVER_TO&&t===this.creatingTransitionToState&&3===e.which){this.fsmState=c.IDLE;try{this.addTransition(this.creatingTransitionFromState,this.creatingTransitionToState,{})}catch(t){console.error(t)}this.destroyTransitionCreationIntermediateData()}else if(this.fsmState===c.TRANSITION_CHANGE_FROM){try{this.fsm.setTransitionFrom(this.modifyingTransition,t)}catch(t){console.error(t)}this.destroyTransitionCreationIntermediateData(),this.updateLayout()}else if(this.fsmState===c.TRANSITION_CHANGE_TO){try{this.fsm.setTransitionTo(this.modifyingTransition,t)}catch(t){console.error(t)}this.destroyTransitionCreationIntermediateData(),this.updateLayout()}e.preventDefault(),e.stopPropagation()}),this.options=s.extend({},f.optionDefaults,i),this.dagreBinding=new o.DagreBinding(t,t=>t===this.fsm.getStartState()?s.clone(this.startStateDimensions):s.clone(this.stateDimensions),t=>s.extend(s.clone(this.transitionLabelDimensions),{labelpos:"c"}),{marginx:this.options.padding,marginy:this.options.padding}),this.graph=this.dagreBinding.getGraph(),this.header=document.createElement("div"),this.svgContainer=document.createElement("div"),this.element.appendChild(this.header),this.element.appendChild(this.svgContainer),this.svg=r(this.svgContainer),this.graph.setNode(h,s.clone(this.stateDimensions)),this.addStateButton=this.svg.group(),this.addStateButton.rect().attr({fill:this.colors.stateBackgroundColor}),this.addStateButton.text("+"),this.addStateButton.click(this.addState),this.addViewForNewNodes(),this.addViewForNewTransitions(),this.updateLayout(),window.addEventListener("mousemove",this.mousemoveWindow),window.addEventListener("mouseup",this.mouseupWindow),window.addEventListener("keydown",this.keydownWindow),this.fsm.on("transitionFiredEvent",t=>{t.eligible?this.onTransitionFired(t.transition,t.event):this.onIneligibleTransitionFired(t.transition,t.event)}),this.fsm.on("activeStateChanged",t=>{if(t.oldActiveState){this.states.get(t.oldActiveState).updateColors(this.options.transitionAnimationDuration/3)}this.states.get(t.state).updateColors(2*this.options.transitionAnimationDuration/3)}),this.fsm.on("statePayloadChanged",t=>{this.states.get(t.state).getForeignObjectDisplay().setPayload(t.payload)}),this.fsm.on("transitionPayloadChanged",t=>{this.transitions.get(t.transition).getForeignObjectDisplay().setPayload(t.payload)}),this.fsm.on("stateAdded",()=>{this.addViewForNewNodes(),this.updateLayout()}),this.fsm.on("transitionAdded",()=>{this.addViewForNewTransitions(),this.updateLayout()}),this.fsm.on("stateRemoved",()=>{this.removeViewForOldNodes(),this.updateLayout()}),this.fsm.on("transitionRemoved",()=>{this.removeViewForOldTransitions(),this.updateLayout()}),this.fsm.on("transitionToStateChanged",()=>{this.updateLayout()}),this.fsm.on("transitionFromStateChanged",()=>{this.updateLayout()})}addTransition(t,e,n){const r=this.fsm.addTransition(t,e,null,n);return this.addViewForNewTransitions(),this.updateLayout(),r}addViewForNewTransitions(){this.graph.edges().forEach(t=>{const{v:e,w:n,name:r}=t;if(!this.transitions.has(r)){const e=new l.SVGTransitionDisplay(this,t,this.transitionLabelDimensions,this.creatingTransitionLine);this.transitions.set(r,e),e.addListener("mouseover",this.mouseoverTransitionGroup.bind(this,r)),e.addListener("mouseout",this.mouseoutTransitionGroup.bind(this,r)),e.addListener("mousedown",this.mousedownTransitionGroup.bind(this,r)),e.addListener("delete",()=>{this.fsm.removeTransition(r)})}})}getSVG(){return this.svg}getFSM(){return this.fsm}getGraph(){return this.graph}getFOVGetter(){return this.getForeignObjectViewport}getTransitionColors(t){return this.hoveringTransition===t?{background:this.colors.selectBackgroundColor,foreground:this.colors.selectColor}:{background:this.colors.transitionBackgroundColor,foreground:this.colors.transitionLineColor}}getStateColors(t){return this.hoveringState===t?{background:this.colors.selectBackgroundColor,foreground:this.colors.selectColor}:this.fsm.getActiveState()===t?{background:this.colors.activeBackgroundColor,foreground:this.colors.activeColor}:this.fsm.getStartState()===t?{background:this.colors.startStateBackgroundColor,foreground:this.colors.stateTextColor}:{background:this.colors.stateBackgroundColor,foreground:this.colors.stateTextColor}}onTransitionFired(t,e){const n=this.transitions.get(t);n.getForeignObjectDisplay().transitionFired(e),this.options.transitionAnimationDuration>0&&n.animateFiring()}onIneligibleTransitionFired(t,e){this.transitions.get(t).animateIneligibleFiring()}addViewForNewNodes(){this.graph.nodes().forEach(t=>{if(!this.states.has(t)&&t!==h){if(t===this.fsm.getStartState()){const e=new u.SVGStartStateDisplay(this,t,this.stateDimensions);this.states.set(t,e)}else{const e=new u.SVGStateDisplay(this,t,this.stateDimensions);this.states.set(t,e)}const e=this.states.get(t);e.addListener("mouseover",this.mouseoverStateGroup.bind(this,t)),e.addListener("mouseout",this.mouseoutStateGroup.bind(this,t)),e.addListener("mousedown",this.mousedownStateGroup.bind(this,t)),e.addListener("mouseup",this.mouseupStateGroup.bind(this,t)),e.addListener("delete",()=>{this.fsm.removeState(t)}),e.addListener("addOutgoingTransition",()=>{this.fsmState=c.AT_AWAITING_TO,this.creatingTransitionFromState=t,this.creatingTransitionLine=this.svg.group(),this.creatingTransitionLine.path("").stroke({color:this.colors.creatingTransitionColor,width:this.options.transitionThickness}).fill("none").addClass("nopointer")})}})}removeViewForOldNodes(){const t=new Set(this.states.keys());this.graph.nodes().forEach(e=>t.delete(e)),t.forEach(t=>{const e=this.states.get(t);e.remove(),this.states.delete(t),e.getForeignObjectDisplay().destroy()})}removeViewForOldTransitions(){const t=new Set(this.transitions.keys());this.graph.edges().forEach(e=>t.delete(e.name)),t.forEach(t=>{const e=this.transitions.get(t);e.remove(),this.transitions.delete(t),e.getForeignObjectDisplay().destroy()})}destroyTransitionCreationIntermediateData(){if(this.creatingTransitionToState=this.creatingTransitionFromState=null,this.fsmState=c.IDLE,this.creatingTransitionLine){if(this.modifyingTransition){const t=this.transitions.get(this.modifyingTransition);this.forEachInGroup(this.creatingTransitionLine,"path",e=>{this.creatingTransitionLine.removeElement(e),t.getGroup().add(e),e.stroke({color:this.colors.transitionLineColor}).removeClass("nopointer")}),this.modifyingTransition=null}this.creatingTransitionLine.remove(),this.creatingTransitionLine=null}}updateCreatingTransitionLine(t,e){const n=this.fsmState===c.TRANSITION_CHANGE_FROM,r=this.graph.node(n?this.creatingTransitionToState:this.creatingTransitionFromState);this.forEachInGroup(this.creatingTransitionLine,"path",i=>{const o=n?{x:t,y:e}:r,s=n?r:{x:t,y:e};i.plot(`M ${o.x} ${o.y} L ${s.x} ${s.y} ${l.SVGTransitionDisplay.getArrowPath(o,s)}`)})}updateLayout(){i.layout(this.graph);const{width:t,height:e}=this.graph.graph();this.svg.width(t),this.svg.height(e),this.states.forEach(t=>{t.updateLayout()}),this.transitions.forEach(t=>{t.updateLayout()});const n=this.graph.node(h);this.forEachInGroup(this.addStateButton,"rect",t=>{t.size(n.width,n.height),this.options.animationDuration>0?t.animate(this.options.animationDuration).center(n.x,n.y):t.center(n.x,n.y)}),this.forEachInGroup(this.addStateButton,"text",t=>{this.options.animationDuration>0?t.animate(this.options.animationDuration).center(n.x,n.y):t.center(n.x,n.y)}),this.graph.setNode(h,this.stateDimensions)}forEachInGroup(t,e,n){t.select(e).each((t,e)=>{e.forEach(t=>{n(t)})})}}f.optionDefaults={showControls:!0,transitionAnimationDuration:300,animationDuration:140,transitionThickness:3,padding:30},e.StateMachineDisplay=f,"undefined"!=typeof window&&window.document&&(window.t2sm.StateMachineDisplay=f)},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(a[l]=n[l]);if(r){s=r(n);for(var c=0;c<s.length;c++)o.call(n,s[c])&&(a[s[c]]=n[s[c]])}}return a}},function(t,e,n){"use strict";var r=n(0);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var s=r.minBy(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));s!==Number.POSITIVE_INFINITY&&void 0!==s&&null!==s||(s=0);return o.rank=s})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(e,n(1))},function(t,e,n){var r=n(64),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(82)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(35);e.FSM=r.FSM;const i=n(89);e.SDBBinding=i.SDBBinding;const o=n(90);e.DagreBinding=o.DagreBinding;const s={FSM:r.FSM,SDBBinding:i.SDBBinding,DagreBinding:o.DagreBinding};"undefined"!=typeof window&&window.document&&(window.t2sm=s)},function(t,e,n){"use strict";var r=n(5);t.exports=a;var i="\0",o="\0",s="\x01";function a(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function u(t,e){t[e]?t[e]++:t[e]=1}function l(t,e){--t[e]||delete t[e]}function c(t,e,n,o){var a=""+e,u=""+n;if(!t&&a>u){var l=a;a=u,u=l}return a+s+u+s+(r.isUndefined(o)?i:o)}function h(t,e){return c(t,e.v,e.w,e.name)}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(t){return this._label=t,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return r.keys(this._nodes)},a.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},a.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},a.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},a.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=o,this._children[t]={},this._children[o][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},a.prototype.node=function(t){return this._nodes[t]},a.prototype.hasNode=function(t){return r.has(this._nodes,t)},a.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},a.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=o;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},a.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},a.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==o)return e}},a.prototype.children=function(t){if(r.isUndefined(t)&&(t=o),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===o)return this.nodes();if(this.hasNode(t))return[]}},a.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},a.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},a.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},a.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},a.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,function t(r){var o=n.parent(r);return void 0===o||e.hasNode(o)?(i[r]=o,o):o in i?i[o]:t(o)}(t))}),e},a.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return r.values(this._edgeObjs)},a.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},a.prototype.setEdge=function(){var t,e,n,i,o=!1,s=arguments[0];"object"===typeof s&&null!==s&&"v"in s?(t=s.v,e=s.w,n=s.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=s,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var a=c(this._isDirected,t,e,n);if(r.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=o?i:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};r&&(a.name=r);return a}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[a]=l,u(this._preds[e],t),u(this._sucs[t],e),this._in[e][a]=l,this._out[t][a]=l,this._edgeCount++,this},a.prototype.edge=function(t,e,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,t,e,n);return this._edgeLabels[r]},a.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},a.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],l(this._preds[e],t),l(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},a.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},a.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},a.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(44),o=n(45),s=n(25);e.SDBDoc=class extends o.OpSubmittable{constructor(t,e,n){super(),this.docIdentifier=t,this.doc=e,this.sdb=n,this.subscribers=[],this.onOp=((t,e)=>{this.subscribers.forEach(n=>n("op",t,e,this.doc.data))}),this.onCreate=(()=>{this.subscribers.forEach(t=>t("create",null,null,this.doc.data))})}subDoc(t){return new i.SDBSubDoc(this,t)}getIdentifier(){return this.docIdentifier}getData(){return this.doc.data}traverse(t){let e=this.getData(),n=e;for(let r=0;r<t.length;r++)try{n=e=e[t[r]]}catch(e){throw new Error(`Could not traverse path ${t}. Object ${n} does not have property ${t[r]}`)}return e}static relative(t,e){const n=t.length;return s.isArrayEqual(t,e.slice(0,n))?e.slice(n):null}fetch(){return new Promise((t,e)=>{this.doc.fetch(n=>{n?e(n):t(this.doc)})})}create(t,e,n){return new Promise((r,i)=>{this.doc.create(t,e,n,()=>{r(this)})})}del(t=!0){return new Promise((e,n)=>{this.doc.del({source:t},t=>{t?n(t):(this.sdb.deleteDoc(this),e())})})}subscribe(t=(()=>null)){return this.subscribers.push(t),1===this.subscribers.length?(this.doc.addListener("op",this.onOp),this.doc.addListener("create",this.onCreate),new Promise((e,n)=>{this.doc.subscribe(r=>{if(t(null,null,null,this.doc.data),r)throw n(r),r;e()})})):(t(null,null,null,this.doc.data),Promise.resolve())}unsubscribe(t){let e;for(;(e=this.subscribers.indexOf(t))>=0;)this.subscribers.splice(e,1);0===this.subscribers.length&&(this.doc.removeListener("op",this.onOp),this.doc.removeListener("create",this.onCreate))}doSubmitOp(t,e=!0){return new Promise((n,r)=>{this.doc.submitOp(t,{source:e},t=>{t?r(t):n(this)})})}createIfEmpty(t,e,n){return r(this,void 0,void 0,function*(){return null===(yield this.fetch()).type?this.create(t,e,n):this})}destroy(){this.doc.destroy(),this.sdb.deleteDoc(this)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayEqual=function(t,e){if(t.length===e.length){for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1},e.extend=function(t,...e){return e.forEach(e=>{if(e)for(let n in e)t[n]=e[n]}),t}},function(t,e){t.exports=function(t,e,n,r,i){this.id=t,this.v=e,this.type=n,this.data=r,this.m=i}},function(t,e,n){(function(e){var r=n(12),i=n(9),o=n(10);function s(t){r.EventEmitter.call(this),this.interval=t&&t.interval}t.exports=s,r.mixin(s),s.prototype.close=function(t){t&&e.nextTick(t)},s.prototype.getMilestoneSnapshot=function(t,n,r,o){var s=new i(5019,"getMilestoneSnapshot MilestoneDB method unimplemented");if(o)return e.nextTick(o,s);this.emit("error",s)},s.prototype.saveMilestoneSnapshot=function(t,n,r){var o=new i(5020,"saveMilestoneSnapshot MilestoneDB method unimplemented");if(r)return e.nextTick(r,o);this.emit("error",o)},s.prototype._isValidVersion=function(t){return o.isValidVersion(t)}}).call(e,n(1))},function(t,e,n){t.exports=i;var r=n(8).EventEmitter;function i(){r.call(this)}n(13)(i,r),i.Readable=n(29),i.Writable=n(147),i.Duplex=n(148),i.Transform=n(149),i.PassThrough=n(150),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"===typeof t.destroy&&t.destroy())}function l(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},function(t,e,n){(e=t.exports=n(61)).Stream=e,e.Readable=e,e.Writable=n(30),e.Duplex=n(14),e.Transform=n(67),e.PassThrough=n(146)},function(t,e,n){"use strict";(function(e,r,i){var o=n(19);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var a,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=m;var l=n(15);l.inherits=n(13);var c={deprecate:n(145)},h=n(63),f=n(20).Buffer,d=i.Uint8Array||function(){};var p,g=n(65);function v(){}function m(t,e){a=a||n(14),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(k,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),k(t,e))}(t,n,r,e,i);else{var s=_(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||x(t,n),r?u(w,t,n,s,i):w(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(t){if(a=a||n(14),!p.call(y,this)&&!(this instanceof a))return new y(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),h.call(this)}function b(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function w(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),k(t,e)}function x(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,b(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function _(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),k(t,e)})}function k(t,e){var n=_(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}l.inherits(y,h),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof m)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof d);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"===typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!==typeof n&&(n=v),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=f.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,a,r,i,o);return u}(this,i,a,t,e,n)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||x(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"===typeof t?(n=t,t=null,e=null):"function"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,k(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,n(1),n(49).setImmediate,n(3))},function(t,e,n){var r=n(11).map;e.checkOp=function(t){if(null==t||"object"!==typeof t)return{code:4004,message:"Missing op"};if(null!=t.create){if("object"!==typeof t.create)return{code:4006,message:"create data must be an object"};var e=t.create.type;if("string"!==typeof e)return{code:4007,message:"Missing create type"};var n=r[e];if(null==n||"object"!==typeof n)return{code:4008,message:"Unknown type"}}else if(null!=t.del){if(!0!==t.del)return{code:4009,message:"del value must be true"}}else if(null==t.op)return{code:4010,message:"Missing op, create, or del"};return null!=t.src&&"string"!==typeof t.src?{code:4011,message:"Invalid src"}:null!=t.seq&&"number"!==typeof t.seq?{code:4012,message:"Invalid seq"}:null==t.src&&null!=t.seq||null!=t.src&&null==t.seq?{code:4013,message:"Both src and seq must be set together"}:null!=t.m&&"object"!==typeof t.m?{code:4014,message:"op.m invalid"}:void 0},e.normalizeType=function(t){return r[t]&&r[t].uri},e.apply=function(t,e){if("object"!==typeof t)return{code:5002,message:"Missing snapshot"};if(null!=t.v&&null!=e.v&&t.v!==e.v)return{code:5003,message:"Version mismatch"};if(e.create){if(t.type)return{code:4016,message:"Document already exists"};var n=e.create,i=r[n.type];if(!i)return{code:4008,message:"Unknown type"};try{t.data=i.create(n.data),t.type=i.uri,t.v++}catch(o){return o}}else if(e.del)t.data=void 0,t.type=null,t.v++;else if(e.op){var o=function(t,e){if(!t.type)return{code:4015,message:"Document does not exist"};if(null==e)return{code:5004,message:"Missing op"};var n=r[t.type];if(!n)return{code:4008,message:"Unknown type"};try{t.data=n.apply(t.data,e)}catch(t){return t}}(t,e.op);if(o)return o;t.v++}else t.v++},e.transform=function(t,e,n){if(null!=e.v&&e.v!==n.v)return{code:5006,message:"Version mismatch"};if(n.del){if(e.create||e.op)return{code:4017,message:"Document was deleted"}}else{if(n.create&&(e.op||e.create||e.del)||n.op&&e.create)return{code:4018,message:"Document was created remotely"};if(n.op&&e.op){if(!t)return{code:5005,message:"Document does not exist"};if("string"===typeof t&&!(t=r[t]))return{code:4008,message:"Unknown type"};try{e.op=t.transform(e.op,n.op,"left")}catch(t){return t}}}null!=e.v&&e.v++}},function(t,e,n){var r=n(51).type;function i(t,e){if(e.type&&e.type!==r.uri)throw new Error(4023,"Cannot project snapshots of type "+e.type);e.data=s(t,e.data)}function o(t,e){if(e.type&&e.type!==r.uri)return!1;if(null==e.data)return!0;if("object"!==typeof e.data||Array.isArray(e.data))return!1;for(var n in e.data)if(!t[n])return!1;return!0}function s(t,e){if(null==e)return e;if("object"!==typeof e||Array.isArray(e))return null;var n={};for(var r in t)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}e.projectSnapshot=i,e.projectSnapshots=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];i(t,r)}},e.projectOp=function(t,e){e.create&&i(t,e.create);e.op&&(e.op=function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i.p;if(0===o.length){var a={p:[]};void 0===i.od&&void 0===i.oi||(void 0!==i.od&&(a.od=s(t,i.od)),void 0!==i.oi&&(a.oi=s(t,i.oi)),n.push(a))}else t[o[0]]&&n.push(i)}return n}(t,e.op))},e.isSnapshotAllowed=o,e.isOpAllowed=function(t,e,n){if(n.create)return o(e,n.create);if(n.op)return(!t||t===r.uri)&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(0===r.p.length)return!1;if(!t[r.p[0]])return!1}return!0}(e,n.op);return!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8),i=n(16);function o(t){return function(e){const n=document.createElement("body"),r=document.createElement("div");e.getElement().appendChild(n),n.setAttribute("style","font-family: Helvetica, Arial, Sans-Serif;"),n.appendChild(r),r.textContent=t(e),e.addListener("setPayload",()=>{r.textContent=t(e)}),r.setAttribute("style","text-align: center;"),e.on("mouseenter",()=>{r.setAttribute("style","text-align: center; color: blue")}),e.on("mouseleft",()=>{r.setAttribute("style","text-align: center;")})}}e.ForeignObjectDisplay=class extends r.EventEmitter{constructor(t,e,n,r){super(),this.fsm=t,this.element=e,this.name=n,this.displayType=r,this.initialize()}initialize(){this.displayType===i.DISPLAY_TYPE.STATE?this.payload=this.fsm.getStatePayload(this.name):this.payload=this.fsm.getTransitionPayload(this.name)}setPayload(t){this.payload=t,this.emit("setPayload",t)}getPayload(){return this.payload}setDimensions(t,e){this.element.setAttribute("width",`${t}`),this.element.setAttribute("height",`${e}`),this.emit("setDimensions",{width:t,height:e})}mouseEntered(){this.emit("mouseenter",{fod:this})}mouseLeft(){this.emit("mouseleft",{fod:this})}stateActive(){}stateInactive(){}transitionFired(t){this.emit("transitionfired",{fod:this})}destroy(){this.emit("destroy",{fod:this}),super.removeAllListeners()}getElement(){return this.element}getName(){return this.name}getDisplayType(){return this.displayType}getFSM(){return this.fsm}},e.displayName=o(t=>{const e=t.getName();return e===t.getFSM().getStartState()?"":e}),e.displayValue=o},function(t,e,n){"use strict";var r=n(77);function i(){}var o=null,s={};function a(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==i&&d(t,this)}function u(t,e){for(;3===t._83;)t=t._18;if(a._47&&a._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);!function(t,e){r(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return o=t,s}}(n,t._18);r===s?c(e.promise,o):l(e.promise,r)}else 1===t._83?l(e.promise,t._18):c(e.promise,t._18)})}(t,e)}function l(t,e){if(e===t)return c(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===typeof e||"function"===typeof e)){var n=function(t){try{return t.then}catch(t){return o=t,s}}(e);if(n===s)return c(t,o);if(n===t.then&&e instanceof a)return t._83=3,t._18=e,void h(t);if("function"===typeof n)return void d(n.bind(e),t)}t._83=1,t._18=e,h(t)}function c(t,e){t._83=2,t._18=e,a._71&&a._71(t,e),h(t)}function h(t){if(1===t._75&&(u(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)u(t,t._38[e]);t._38=null}}function f(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function d(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return o=t,s}}(t,function(t){n||(n=!0,l(e,t))},function(t){n||(n=!0,c(e,t))});n||r!==s||(n=!0,c(e,o))}t.exports=a,a._47=null,a._71=null,a._44=i,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,n){return new t.constructor(function(r,o){var s=new a(i);s.then(r,o),u(t,new f(e,n,s))})}(this,t,e);var n=new a(i);return u(this,new f(t,e,n)),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(87),i=n(88),o=n(8),s=n(4);class a extends o.EventEmitter{constructor(){super(),this.states=new Map,this.stateLabels=new Map,this.transitions=new Map,this.transitionLabels=new Map,this.statePayloadToString=(t=>`${t}`),this.transitionPayloadToString=(t=>`${t}`);this.startState=this.activeState=new r.StartState,this.states.set("(start)",this.startState),this.stateLabels.set(this.startState,"(start)"),this.startState.setIsActive(!0),this.addStateListeners(this.startState)}setStatePayloadToString(t){this.statePayloadToString=t}setTransitionPayloadToString(t){this.transitionPayloadToString=t}getStateLabel(t){return this.stateLabels.get(t)}hasState(t){return this.states.has(t)}getState(t){return this.states.get(t)}getStatePayload(t){if(this.hasState(t))return this.getState(t).getPayload();throw new Error(`Could not find state with label ${t}`)}setStatePayload(t,e){if(this.hasState(t))return this.getState(t).setPayload(e),this;throw new Error(`Could not find state with label ${t}`)}getTransition(t){return this.transitions.get(t)}hasTransition(t){return this.transitions.has(t)}getTransitionLabel(t){return this.transitionLabels.get(t)}getTransitionPayload(t){if(this.hasTransition(t))return this.getTransition(t).getPayload();throw new Error(`Could not find transition ${t}`)}setTransitionPayload(t,e){if(this.hasTransition(t))return this.getTransition(t).setPayload(e),this;throw new Error(`Could not find transition ${t}`)}getTransitionAlias(t){if(this.hasTransition(t))return this.getTransition(t).getAlias();throw new Error(`Could not find transition ${t}`)}setTransitionAlias(t,e){if(this.hasTransition(t))return this.getTransition(t).setAlias(e),this;throw new Error(`Could not find transition ${t}`)}fireTransition(t,e,n){if(this.hasTransition(t)){return this.getTransition(t).fire(e,n),this}const r=this.activeState._getOutgoingTransitions();for(let i=0;i<r.length;i++){const o=r[i],s=o.getAlias();if(s&&s===t){o.fire(e,n);break}}}getFireFunction(t){return this.fireTransition.bind(this,t)}addState(t,e=this.getUniqueStateLabel()){if(this.hasState(e))throw new Error(`State container already has a state with label ${e}`);{const n=new r.State(t);return this.states.set(e,n),this.stateLabels.set(n,e),this.addStateListeners(n),this.emit("stateAdded",{state:e,payload:t}),this.emit("update"),e}}removeState(t){const e=this.getState(t);if(t===this.getStartState())throw new Error(`Cannot remove start state ${t}`);if(e)return e.remove(),this;throw new Error(`State container does not have a state with label ${t}`)}addTransition(t,e,n,r,o=this.getUniqueTransitionLabel()){if(!this.hasState(t))throw new Error(`State container does not have a state with label ${t}`);if(!this.hasState(e))throw new Error(`State container does not have a state with label ${e}`);if(this.hasTransition(o))throw new Error(`Container already has a transition with label ${o}`);const s=this.getState(t),a=this.getState(e),u=new i.Transition(s,a,n,r);return this.transitions.set(o,u),this.transitionLabels.set(u,o),this.emit("transitionAdded",{transition:o,from:t,to:e,alias:n,payload:r}),this.emit("update"),this.addTransitionListeners(u),o}removeTransition(t){if(this.hasTransition(t)){return this.getTransition(t).remove(),this}throw new Error("Could not find transition")}getActiveState(){return this.getStateLabel(this.activeState)}setActiveState(t){if(!this.hasState(t))throw new Error(`State container does not have a state with label ${t}`);return this.activeState&&this.activeState.setIsActive(!1),this.getState(t).setIsActive(!0),this}getStates(){return Array.from(this.states.keys())}getTransitions(){return Array.from(this.transitions.keys())}getUniqueStateLabel(){let t=0;for(;this.hasState(`state_${t}`);)t++;return`state_${t}`}getUniqueTransitionLabel(){let t=0;for(;this.hasTransition(`transition_${t}`);)t++;return`transition_${t}`}getStartState(){return this.getStateLabel(this.startState)}isStartState(t){if(!this.hasState(t))throw new Error(`State container does not have a state with label ${t}`);return this.getState(t).isStartState()}getOutgoingTransitions(t){if(!this.hasState(t))throw new Error(`State container does not have a state with label ${t}`);return this.getState(t)._getOutgoingTransitions().map(t=>this.getTransitionLabel(t))}getIncomingTransitions(t){if(!this.hasState(t))throw new Error(`State container does not have a state with label ${t}`);return this.getState(t)._getIncomingTransitions().map(t=>this.getTransitionLabel(t))}getTransitionTo(t){if(!this.hasTransition(t))throw new Error(`State container does not have a transition with label ${t}`);const e=this.getTransition(t);return this.getStateLabel(e.getToState())}getTransitionFrom(t){if(!this.hasTransition(t))throw new Error(`State container does not have a transition with label ${t}`);const e=this.getTransition(t);return this.getStateLabel(e.getFromState())}setTransitionTo(t,e){if(!this.hasTransition(t))throw new Error(`State container does not have a transition with label ${t}`);if(!this.hasState(e))throw new Error(`State container does not have a state with label ${e}`);return this.getTransition(t).setToState(this.getState(e)),this}setTransitionFrom(t,e){if(!this.hasTransition(t))throw new Error(`State container does not have a transition with label ${t}`);if(!this.hasState(e))throw new Error(`State container does not have a state with label ${e}`);return this.getTransition(t).setFromState(this.getState(e)),this}toString(){const t="~".repeat(40),e=this.getActiveState(),n=(t,e)=>{const n=e-t.length;return n>0?t+" ".repeat(n):t};let r=`${t}\n${(t=>{const e=t.length,n=Math.round((40-e)/2);return" ".repeat(n)+t})("FSM")}\n${t}\n`;return this.getStates().forEach(t=>{r+=`${e===t?"*":" "}${n(t+":",10)} ${this.statePayloadToString(this.getStatePayload(t))}\n`;const i=this.getOutgoingTransitions(t);i.length>0&&i.forEach(t=>{r+=n(`${" ".repeat(4)} --(${t})--\x3e ${this.getTransitionTo(t)}`,30),r+=`: ${this.transitionPayloadToString(this.getTransitionPayload(t))}\n`})}),r}destroy(){this.states.clear(),this.stateLabels.clear(),this.transitions.clear(),this.transitionLabels.clear(),this.emit("destroyed"),this.emit("update")}getStartTransition(){const t=this.getOutgoingTransitions(this.getStartState());return t.length>0?t[0]:null}addStateListeners(t){const e=this.getStateLabel(t);t.on("active",n=>{const r=this.activeState;let i;if(r)try{i=this.getStateLabel(r)}catch(t){}this.activeState=t,this.emit("activeStateChanged",{state:e,oldActiveState:i}),this.emit("update")}),t.on("payloadChanged",t=>{const{payload:n}=t;this.emit("statePayloadChanged",{state:e,payload:n}),this.emit("update")}),t.on("removed",n=>{this.states.delete(e),this.stateLabels.delete(t),this.emit("stateRemoved",{state:e}),this.emit("update")})}addTransitionListeners(t){const e=this.getTransitionLabel(t);t.on("fromStateChanged",t=>{const{oldFrom:n,state:r}=t;this.emit("transitionFromStateChanged",{transition:e,oldFrom:this.getStateLabel(n),state:this.getStateLabel(r)}),this.emit("update")}),t.on("toStateChanged",t=>{const{oldTo:n,state:r}=t;this.emit("transitionToStateChanged",{transition:e,oldTo:this.getStateLabel(n),state:this.getStateLabel(r)}),this.emit("update")}),t.on("payloadChanged",t=>{const{payload:n}=t;this.emit("transitionPayloadChanged",{transition:e,payload:n}),this.emit("update")}),t.on("fire",n=>{this.emit("transitionFiredEvent",{transition:e,eligible:t.isEligible(),event:n.event}),this.emit("update")}),t.on("aliasChanged",t=>{const{alias:n}=t;this.emit("transitionAliasChanged",{transition:e,alias:n}),this.emit("update")}),t.on("removed",n=>{const r=this.getTransitionTo(e),i=this.getTransitionFrom(e);this.transitions.delete(e),this.transitionLabels.delete(t),this.emit("transitionRemoved",{transition:e,oldFrom:i,oldTo:r}),this.emit("update")})}static fromJSON(t){const e=new a;return e.addState(t.initial,t.initial),s.keys(t.states).forEach(n=>{n!==t.initial&&e.addState("",n)}),e.addTransition("(start)",t.initial,"start"),s.forEach(t.states,(t,n)=>{s.forEach(t.on,(t,r)=>{let i;i=s.isString(t)?t:s.keys(t)[0],e.addTransition(n,i,r,r)})}),e}toJSON(){const t={initial:this.getTransitionTo(this.getOutgoingTransitions(this.getStartState())[0]),states:{}},{states:e}=t;return this.getStates().forEach(e=>{e!==this.getStartState()&&(t.states[e]={on:{}},this.getOutgoingTransitions(e).forEach(n=>{const r=this.getTransitionPayload(n)+"";t.states[e].on[r]=this.getTransitionTo(n)}))}),t}serialize(){const t={startState:this.getStartState(),states:{},transitions:{}},e=this.getActiveState();return this.getStates().forEach(n=>{t.states[n]={payload:this.getStatePayload(n),active:e===n}}),this.getTransitions().forEach(e=>{t.transitions[e]={payload:this.getTransitionPayload(e),alias:this.getTransitionAlias(e),from:this.getTransitionFrom(e),to:this.getTransitionTo(e)}}),t}static deserialize(t,e=new a){return s.each(t.states,(n,r)=>{const{active:i,payload:o}=n;r===t.startState?e.setStatePayload(r,o):e.addState(o,r),i&&e.setActiveState(r)}),s.each(t.transitions,(t,n)=>{const{from:r,to:i,payload:o,alias:s}=t;e.addTransition(r,i,s,o,n)}),e}}e.FSM=a},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){t.exports={graphlib:n(7),layout:n(104),debug:n(126),util:{time:n(2).time,notime:n(2).notime},version:n(127)}},function(t,e,n){var r=n(5),i=n(39);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,s,a={},u=new i,l=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),l=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);l<r.distance&&(r.distance=l,r.predecessor=o,u.decrease(e,l))};t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)});for(;u.size()>0&&(o=u.removeMin(),(s=a[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(l);return a}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(5);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},function(t,e,n){var r=n(5);t.exports=function(t){var e=0,n=[],i={},o=[];return t.nodes().forEach(function(s){r.has(i,s)||function s(a){var u=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(s(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))}),u.lowlink===u.index){var l,c=[];do{l=n.pop(),i[l].onStack=!1,c.push(l)}while(a!==l);o.push(c)}}(s)}),o}},function(t,e,n){var r=n(5);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),function s(a){if(r.has(n,a))throw new o;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),s),delete n[a],i.push(a))}),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o},function(t,e,n){var r=n(5);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],s={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,i,o,s,a){r.has(o,n)||(o[n]=!0,i||a.push(n),r.each(s(n),function(n){t(e,n,i,o,s,a)}),i&&a.push(n))}(t,e,"post"===n,s,i,o)}),o}},function(t,e,n){"use strict";var r=n(0),i=n(7).Graph,o=n(18).slack;function s(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var s=r.v,a=i===s?r.w:s;t.hasNode(a)||o(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))})}),t.nodeCount()}function a(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)})}function u(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}t.exports=function(t){var e,n,r=new i({directed:!1}),l=t.nodes()[0],c=t.nodeCount();r.setNode(l,{});for(;s(r,t)<c;)e=a(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),u(r,t,n);return r}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(24),o=n(45),s=n(25);e.SDBSubDoc=class extends o.OpSubmittable{constructor(t,e){super(),this.doc=t,this.path=e,this.subscriptionShims=new Map}subscribe(t=(()=>null)){const e=(e,n,r,o)=>{if("op"===e){const o=[];if(n.forEach(t=>{const e=i.SDBDoc.relative(this.path,t.p);e&&o.push({op:t,rp:e})}),o.length>0){const n=o.map(({op:t,rp:e})=>s.extend({},t,{p:e}));t&&t(e,n,r,this.getData())}}else t&&t(e,n,r,this.getData())};return this.subscriptionShims.has(t)?this.subscriptionShims.set(t,this.subscriptionShims.get(t).concat([e])):this.subscriptionShims.set(t,[e]),this.doc.subscribe(e)}unsubscribe(t){this.subscriptionShims.has(t)&&(this.subscriptionShims.get(t).forEach(t=>this.doc.unsubscribe(t)),this.subscriptionShims.delete(t))}getData(){try{return this.doc.traverse(this.path)}catch(t){return null}}doSubmitOp(t,e=!0){return r(this,void 0,void 0,function*(){const n=t.map(t=>s.extend({},t,{p:this.path.concat(t.p)}));return yield this.doc.submitOp(n,e),this})}traverse(t){return this.doc.traverse(this.path.concat(t))}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});e.OpSubmittable=class{constructor(){}submitObjectReplaceOp(t,e,n=this.traverse(t)){return r(this,void 0,void 0,function*(){return yield this.submitOp([{p:t,oi:e,od:n}])})}submitObjectInsertOp(t,e){return r(this,void 0,void 0,function*(){return yield this.submitOp([{p:t,oi:e}])})}submitObjectDeleteOp(t,e=this.traverse(t)){return r(this,void 0,void 0,function*(){return yield this.submitOp([{p:t,od:e}])})}submitListReplaceOp(t,e,n=this.traverse(t)){return r(this,void 0,void 0,function*(){return yield this.submitOp([{p:t,li:e,ld:n}])})}submitListInsertOp(t,e){return r(this,void 0,void 0,function*(){return yield this.submitOp([{p:t,li:e}])})}submitListDeleteOp(t,e=this.traverse(t)){return r(this,void 0,void 0,function*(){return yield this.submitOp([{p:t,ld:e}])})}submitNumberAddOp(t,e){return r(this,void 0,void 0,function*(){return yield this.submitOp([{p:t,na:e}])})}submitListSpliceOp(t,e,n,...i){return r(this,void 0,void 0,function*(){const r=[],o=this.traverse(t);for(let i=e+n-1;i>=e;i--){const e=t.concat([i]);r.push({p:e,ld:o[i]})}const s=i.map((n,r)=>({p:t.concat([e+r]),li:n})),a=Array.prototype.concat(r,s);return yield this.submitOp(a)})}submitListPushOp(t,...e){return r(this,void 0,void 0,function*(){const n=this.traverse(t).length,r=e.map((e,r)=>({p:t.concat(n+r),li:e}));return yield this.submitOp(r)})}submitListUnshiftOp(t,...e){return r(this,void 0,void 0,function*(){const n=e.map((e,n)=>({p:t.concat(n),li:e}));return yield this.submitOp(n)})}submitOp(t,e){return this.doSubmitOp(t,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(47),i=n(24);e.SDB=class{constructor(){this.docs=new Map}getDocIdentifier(t,e){return[t,e]}get(t,e){const n=this.getDocIdentifier(t,e);let r;if(this.docs.has(n))r=this.docs.get(n);else{const o=this.connection.get(t,e);r=new i.SDBDoc(n,o,this),this.docs.set(n,r)}return r}static registerType(t){r.types.register(t)}deleteDoc(t){this.docs.delete(t.getIdentifier())}}},function(t,e,n){var r=n(130);t.exports=r,r.Agent=n(50),r.Backend=r,r.DB=n(57),r.Error=n(9),r.MemoryDB=n(56),r.MemoryMilestoneDB=n(154),r.MemoryPubSub=n(58),r.MilestoneDB=n(27),r.ot=n(31),r.projections=n(32),r.PubSub=n(59),r.QueryEmitter=n(68),r.SubmitRequest=n(69),r.types=n(11)},function(t,e,n){(function(n,r,i){var o;!function(){var s,a={};function u(){}function l(t){return t}function c(t){return!!t}function h(t){return!t}var f="object"===typeof self&&self.self===self&&self||"object"===typeof n&&n.global===n&&n||this;function d(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function p(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=f&&(s=f.async),a.noConflict=function(){return f.async=s,a};var g=Object.prototype.toString,v=Array.isArray||function(t){return"[object Array]"===g.call(t)};function m(t){return v(t)||"number"===typeof t.length&&t.length>=0&&t.length%1===0}function y(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function b(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function w(t){return b(Array(t),function(t,e){return e})}function x(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function S(t){var e,n,r=-1;return m(t)?(e=t.length,function(){return++r<e?r:null}):(n=_(t),e=n.length,function(){return++r<e?n[r]:null})}function k(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function T(t){return function(e,n,r){return t(e,r)}}var C="function"===typeof r&&r,E=C?function(t){C(t)}:function(t){setTimeout(t,0)};function O(t){return function(e,n,r){r=p(r||u);var i=S(e=e||[]);if(t<=0)return r(null);var o=!1,s=0,a=!1;!function u(){if(o&&s<=0)return r(null);for(;s<t&&!a;){var l=i();if(null===l)return o=!0,void(s<=0&&r(null));s+=1,n(e[l],l,d(function(t){s-=1,t?(r(t),a=!0):u()}))}}()}}function M(t){return function(e,n,r){return t(a.eachOf,e,n,r)}}function A(t){return function(e,n,r,i){return t(O(n),e,r,i)}}function P(t){return function(e,n,r){return t(a.eachOfSeries,e,n,r)}}function D(t,e,n,r){r=p(r||u);var i=m(e=e||[])?[]:{};t(e,function(t,e,r){n(t,function(t,n){i[e]=n,r(t)})},function(t){r(t,i)})}function N(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(b(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function L(t,e,n,r){N(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function I(t,e,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function u(t,r,i){if(!s)return i();o(t,function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()})}arguments.length>3?t(r,i,u,a):(s=o,o=i,t(r,u,a))}}function R(t,e){return e}function j(t,e,n){n=n||u;var r=m(e)?[]:{};t(e,function(t,e,n){t(k(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function F(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function B(t,e,n){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function r(t,e,n,r){if(null!=r&&"function"!==typeof r)throw new Error("task callback must be a function");if(t.started=!0,v(e)||(e=[e]),0===e.length&&t.idle())return a.setImmediate(function(){t.drain()});y(e,function(e){var i={data:e,callback:r||u};n?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),a.setImmediate(t.process)}function i(t,e){return function(){o-=1;var n=!1,r=arguments;y(e,function(t){y(s,function(e,r){e!==t||n||(s.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+o===0&&t.drain(),t.process()}}var o=0,s=[],l={tasks:[],concurrency:e,payload:n,saturated:u,empty:u,drain:u,started:!1,paused:!1,push:function(t,e){r(l,t,!1,e)},kill:function(){l.drain=u,l.tasks=[]},unshift:function(t,e){r(l,t,!0,e)},process:function(){for(;!l.paused&&o<l.concurrency&&l.tasks.length;){var e=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),n=b(e,function(t){return t.data});0===l.tasks.length&&l.empty(),o+=1,s.push(e[0]);var r=d(i(l,e));t(n,r)}},length:function(){return l.tasks.length},running:function(){return o},workersList:function(){return s},idle:function(){return l.tasks.length+o===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var t=Math.min(l.concurrency,l.tasks.length),e=1;e<=t;e++)a.setImmediate(l.process)}}};return l}function z(t){return k(function(e,n){e.apply(null,n.concat([k(function(e,n){"object"===typeof console&&(e?console.error&&console.error(e):console[t]&&y(n,function(e){console[t](e)}))})]))})}function W(t){return function(e,n,r){t(w(e),n,r)}}function U(t){return k(function(e,n){var r=k(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function V(t){return k(function(e){var n=e.pop();e.push(function(){var t=arguments;r?a.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}"object"===typeof i&&"function"===typeof i.nextTick?a.nextTick=i.nextTick:a.nextTick=E,a.setImmediate=C?E:a.nextTick,a.forEach=a.each=function(t,e,n){return a.eachOf(t,T(e),n)},a.forEachSeries=a.eachSeries=function(t,e,n){return a.eachOfSeries(t,T(e),n)},a.forEachLimit=a.eachLimit=function(t,e,n,r){return O(e)(t,T(n),r)},a.forEachOf=a.eachOf=function(t,e,n){n=p(n||u);for(var r,i=S(t=t||[]),o=0;null!=(r=i());)o+=1,e(t[r],r,d(s));function s(t){o--,t?n(t):null===r&&o<=0&&n(null)}0===o&&n(null)},a.forEachOfSeries=a.eachOfSeries=function(t,e,n){n=p(n||u);var r=S(t=t||[]),i=r();!function o(){var s=!0;if(null===i)return n(null);e(t[i],i,d(function(t){if(t)n(t);else{if(null===(i=r()))return n(null);s?a.setImmediate(o):o()}})),s=!1}()},a.forEachOfLimit=a.eachOfLimit=function(t,e,n,r){O(e)(t,n,r)},a.map=M(D),a.mapSeries=P(D),a.mapLimit=A(D),a.inject=a.foldl=a.reduce=function(t,e,n,r){a.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},a.foldr=a.reduceRight=function(t,e,n,r){var i=b(t,l).reverse();a.reduce(i,e,n,r)},a.transform=function(t,e,n,r){3===arguments.length&&(r=n,n=e,e=v(t)?[]:{}),a.eachOf(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})},a.select=a.filter=M(N),a.selectLimit=a.filterLimit=A(N),a.selectSeries=a.filterSeries=P(N),a.reject=M(L),a.rejectLimit=A(L),a.rejectSeries=P(L),a.any=a.some=I(a.eachOf,c,l),a.someLimit=I(a.eachOfLimit,c,l),a.all=a.every=I(a.eachOf,h,h),a.everyLimit=I(a.eachOfLimit,h,h),a.detect=I(a.eachOf,l,R),a.detectSeries=I(a.eachOfSeries,l,R),a.detectLimit=I(a.eachOfLimit,l,R),a.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}a.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,b(e.sort(r),function(t){return t.value}))})},a.auto=function(t,e,n){"function"===typeof arguments[1]&&(n=e,e=null),n=p(n||u);var r=_(t),i=r.length;if(!i)return n(null);e||(e=i);var o={},s=0,l=!1,c=[];function h(t){c.unshift(t)}function f(){i--,y(c.slice(0),function(t){t()})}h(function(){i||n(null,o)}),y(r,function(r){if(!l){for(var i,u=v(t[r])?t[r]:[t[r]],d=k(function(t,e){if(s--,e.length<=1&&(e=e[0]),t){var i={};c=function(t,e){i[e]=t},y(_(u=o),function(t){c(u[t],t)}),i[r]=e,l=!0,n(t,i)}else o[r]=e,a.setImmediate(f);var u,c}),p=u.slice(0,u.length-1),g=p.length;g--;){if(!(i=t[p[g]]))throw new Error("Has nonexistent dependency in "+p.join(", "));if(v(i)&&x(i,r)>=0)throw new Error("Has cyclic dependencies")}m()?(s++,u[u.length-1](d,o)):h(function t(){m()&&(s++,(e=x(c,t))>=0&&c.splice(e,1),u[u.length-1](d,o));var e})}function m(){return s<e&&(t=function(t,e){return t&&o.hasOwnProperty(e)},n=!0,y(p,function(e,r,i){n=t(n,e,r,i)}),n)&&!o.hasOwnProperty(r);var t,n}})},a.retry=function(t,e,n){var r=5,i=0,o=[],s={times:r,interval:i};var u=arguments.length;if(u<1||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function l(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;s.times;){var i=!(s.times-=1);o.push(n(s.task,i)),!i&&s.interval>0&&o.push(r(s.interval))}a.series(o,function(e,n){n=n[n.length-1],(t||s.callback)(n.err,n.result)})}return u<=2&&"function"===typeof t&&(n=e,e=t),"function"!==typeof t&&function(t,e){if("number"===typeof e)t.times=parseInt(e,10)||r;else{if("object"!==typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||r,t.interval=parseInt(e.interval,10)||i}}(s,t),s.callback=n,s.task=e,s.callback?l():l},a.waterfall=function(t,e){if(e=p(e||u),!v(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();!function t(n){return k(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=n.next();o?i.push(t(o)):i.push(e),V(n).apply(null,i)}})}(a.iterator(t))()},a.parallel=function(t,e){j(a.eachOf,t,e)},a.parallelLimit=function(t,e,n){j(O(e),t,n)},a.series=function(t,e){j(a.eachOfSeries,t,e)},a.iterator=function(t){return function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}(0)},a.apply=k(function(t,e){return k(function(n){return t.apply(null,e.concat(n))})}),a.concat=M(F),a.concatSeries=P(F),a.whilst=function(t,e,n){if(n=n||u,t()){var r=k(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},a.doWhilst=function(t,e,n){var r=0;return a.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},a.until=function(t,e,n){return a.whilst(function(){return!t.apply(this,arguments)},e,n)},a.doUntil=function(t,e,n){return a.doWhilst(t,function(){return!e.apply(this,arguments)},n)},a.during=function(t,e,n){n=n||u;var r=k(function(e,r){e?n(e):(r.push(i),t.apply(this,r))}),i=function(t,i){t?n(t):i?e(r):n(null)};t(i)},a.doDuring=function(t,e,n){var r=0;a.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},a.queue=function(t,e){return B(function(e,n){t(e[0],n)},e,1)},a.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}var r=a.queue(t,e);return r.push=function(t,e,i){!function(t,e,r,i){if(null!=i&&"function"!==typeof i)throw new Error("task callback must be a function");if(t.started=!0,v(e)||(e=[e]),0===e.length)return a.setImmediate(function(){t.drain()});y(e,function(e){var o={data:e,priority:r,callback:"function"===typeof i?i:u};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,o,n)+1,0,o),t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}(r,t,e,i)},delete r.unshift,r},a.cargo=function(t,e){return B(t,1,e)},a.log=z("log"),a.dir=z("dir"),a.memoize=function(t,e){var n={},r={},i=Object.prototype.hasOwnProperty;e=e||l;var o=k(function(o){var s=o.pop(),u=e.apply(null,o);i.call(n,u)?a.setImmediate(function(){s.apply(null,n[u])}):i.call(r,u)?r[u].push(s):(r[u]=[s],t.apply(null,o.concat([k(function(t){n[u]=t;var e=r[u];delete r[u];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},a.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},a.times=W(a.map),a.timesSeries=W(a.mapSeries),a.timesLimit=function(t,e,n,r){return a.mapLimit(w(t),e,n,r)},a.seq=function(){var t=arguments;return k(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=u,a.reduce(t,e,function(t,e,r){e.apply(n,t.concat([k(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},a.compose=function(){return a.seq.apply(null,Array.prototype.reverse.call(arguments))},a.applyEach=U(a.eachOf),a.applyEachSeries=U(a.eachOfSeries),a.forever=function(t,e){var n=d(e||u),r=V(t);!function t(e){if(e)return n(e);r(t)}()},a.ensureAsync=V,a.constant=k(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),a.wrapSync=a.asyncify=function(t){return k(function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"===typeof n.then?n.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,n)})},"object"===typeof t&&t.exports?t.exports=a:void 0===(o=function(){return a}.apply(e,[]))||(t.exports=o)}()}).call(e,n(3),n(49).setImmediate,n(1))},function(t,e,n){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(131),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(3))},function(t,e,n){(function(e){var r=n(132),i=n(10),o=n(11);function s(t,e){this.backend=t,this.stream=e,this.clientId=r(),this.connectTime=Date.now(),this.subscribedDocs={},this.subscribedQueries={},this.closed=!1,this.custom={},this.send({a:"init",protocol:1,id:this.clientId,type:o.defaultType.uri})}function a(t){var e,n,r,i=t.r;if(i){e=[];for(var o=0;o<i.length;o++){var s=i[o],a=s[0],u=s[1];e.push(a),null==u?n?n.push(a):n=[a]:(r||(r={}),r[a]=u)}}var l=t.o||{};return l.ids=e,l.fetch=n,l.fetchOps=r,l}function u(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=c(r);i.d=r.id,e.push(i)}return e}function l(t){var e={};for(var n in t)e[n]=c(t[n]);return e}function c(t){var e={v:t.v,data:t.data};return o.defaultType!==o.map[t.type]&&(e.type=t.type),e}t.exports=s,s.prototype.close=function(t){t&&console.warn("Agent closed due to error",this.clientId,t.stack||t),this.closed||this.stream.end()},s.prototype._cleanup=function(){for(var t in this.closed=!0,this.subscribedDocs){var e=this.subscribedDocs[t];for(var n in e){e[n].destroy()}}for(var n in this.subscribedDocs={},this.subscribedQueries){this.subscribedQueries[n].destroy()}this.subscribedQueries={}},s.prototype._subscribeToStream=function(t,e,n){if(this.closed)return n.destroy();var r=this.subscribedDocs[t]||(this.subscribedDocs[t]={}),o=r[e];o&&o.destroy(),r[e]=n;var s=this;n.on("data",function(n){n.error?console.error("Doc subscription stream error",t,e,n.error):s._isOwnOp(t,n)||s._sendOp(t,e,n)}),n.on("end",function(){var n=s.subscribedDocs[t];n&&(delete n[e],i.hasKeys(n)||delete s.subscribedDocs[t])})},s.prototype._subscribeToQuery=function(t,e,n,r){var i=this.subscribedQueries[e];i&&i.destroy(),this.subscribedQueries[e]=t;var o=this;t.onExtra=function(t){o.send({a:"q",id:e,extra:t})},t.onDiff=function(t){for(var n=0;n<t.length;n++){var r=t[n];"insert"===r.type&&(r.values=u(r.values))}o.send({a:"q",id:e,diff:t})},t.onError=function(t){console.error("Query subscription stream error",n,r,t)},t.onOp=function(t){var e=t.d;o._isOwnOp(n,t)||o._sendOp(n,e,t)},t._open()},s.prototype._isOwnOp=function(t,e){return this.clientId===e.src&&t===(e.i||e.c)},s.prototype.send=function(t){this.closed||(this.backend.emit("send",this,t),this.stream.write(t))},s.prototype._sendOp=function(t,e,n){var r={a:"op",c:t,d:e,v:n.v,src:n.src,seq:n.seq};n.op&&(r.op=n.op),n.create&&(r.create=n.create),n.del&&(r.del=!0),this.send(r)},s.prototype._sendOps=function(t,e,n){for(var r=0;r<n.length;r++)this._sendOp(t,e,n[r])},s.prototype._reply=function(t,e,n){if(e)return"string"===typeof e?t.error={code:4001,message:e}:(e.stack&&console.warn(e.stack),t.error={code:e.code,message:e.message}),void this.send(t);n||(n={}),n.a=t.a,t.id?n.id=t.id:(t.c&&(n.c=t.c),t.d&&(n.d=t.d),t.b&&!n.data&&(n.b=t.b)),this.send(n)},s.prototype._open=function(){if(!this.closed){this.backend.agentsCount++,this.stream.isServer||this.backend.remoteAgentsCount++;var t=this;this.stream.on("data",function(e){if(!t.closed){if("object"!==typeof e){return t.close({code:4e3,message:"Received non-object message"})}var n={data:e};t.backend.trigger("receive",t,n,function(e){var r=function(e,r){t._reply(n.data,e,r)};if(e)return r(e);t._handleMessage(n.data,r)})}}),this.stream.on("end",function(){t.backend.agentsCount--,t.stream.isServer||t.backend.remoteAgentsCount--,t._cleanup()})}},s.prototype._checkRequest=function(t){if("qf"===t.a||"qs"===t.a||"qu"===t.a){if("number"!==typeof t.id)return"Missing query ID"}else if("op"===t.a||"f"===t.a||"s"===t.a||"u"===t.a){if(null!=t.c&&"string"!==typeof t.c)return"Invalid collection";if(null!=t.d&&"string"!==typeof t.d)return"Invalid id";if("op"===t.a&&null!=t.v&&("number"!==typeof t.v||t.v<0))return"Invalid version"}else if("bf"===t.a||"bs"===t.a||"bu"===t.a){if(null!=t.c&&"string"!==typeof t.c)return"Invalid collection";if("object"!==typeof t.b)return"Invalid bulk subscribe data"}},s.prototype._handleMessage=function(t,e){try{var n=this._checkRequest(t);if(n)return e({code:4e3,message:n});switch(t.a){case"qf":return this._queryFetch(t.id,t.c,t.q,a(t),e);case"qs":return this._querySubscribe(t.id,t.c,t.q,a(t),e);case"qu":return this._queryUnsubscribe(t.id,e);case"bf":return this._fetchBulk(t.c,t.b,e);case"bs":return this._subscribeBulk(t.c,t.b,e);case"bu":return this._unsubscribeBulk(t.c,t.b,e);case"f":return this._fetch(t.c,t.d,t.v,e);case"s":return this._subscribe(t.c,t.d,t.v,e);case"u":return this._unsubscribe(t.c,t.d,e);case"op":var r=this._createOp(t);return r?this._submit(t.c,t.d,r,e):e({code:4e3,message:"Invalid op message"});case"nf":return this._fetchSnapshot(t.c,t.d,t.v,e);default:e({code:4e3,message:"Invalid or unknown message"})}}catch(t){e(t)}},s.prototype._queryFetch=function(t,e,n,r,i){this.backend.queryFetch(this,e,n,r,function(t,e,n){if(t)return i(t);var r={data:u(e),extra:n};i(null,r)})},s.prototype._querySubscribe=function(t,e,n,r,i){var o,s=this,a=1;function c(t){if(t)return i(t);--a||i(null,o)}r.fetch&&(a++,this.backend.fetchBulk(this,e,r.fetch,function(t,e){if(t)return c(t);o={data:l(e)},c()})),r.fetchOps&&(a++,this._fetchBulkOps(e,r.fetchOps,c)),this.backend.querySubscribe(this,e,n,r,function(r,i,a,l){return r?c(r):this.closed?i.destroy():(s._subscribeToQuery(i,t,e,n),void(a?(o={data:u(a),extra:l},c()):i.queryPoll(c)))})},s.prototype._queryUnsubscribe=function(t,n){var r=this.subscribedQueries[t];r&&(r.destroy(),delete this.subscribedQueries[t]),e.nextTick(n)},s.prototype._fetch=function(t,e,n,r){null==n?this.backend.fetch(this,t,e,function(t,e){if(t)return r(t);r(null,{data:c(e)})}):this._fetchOps(t,e,n,r)},s.prototype._fetchOps=function(t,e,n,r){var i=this;this.backend.getOps(this,t,e,n,null,function(n,o){if(n)return r(n);i._sendOps(t,e,o),r()})},s.prototype._fetchBulk=function(t,e,n){Array.isArray(e)?this.backend.fetchBulk(this,t,e,function(t,e){if(t)return n(t);n(null,{data:l(e)})}):this._fetchBulkOps(t,e,n)},s.prototype._fetchBulkOps=function(t,e,n){var r=this;this.backend.getOpsBulk(this,t,e,null,function(e,i){if(e)return n(e);for(var o in i){var s=i[o];r._sendOps(t,o,s)}n()})},s.prototype._subscribe=function(t,e,n,r){var i=this;this.backend.subscribe(this,t,e,n,function(n,o,s){if(n)return r(n);i._subscribeToStream(t,e,o),s?r(null,{data:c(s)}):r()})},s.prototype._subscribeBulk=function(t,e,n){var r=this;this.backend.subscribeBulk(this,t,e,function(e,i,o){if(e)return n(e);for(var s in i)r._subscribeToStream(t,s,i[s]);o?n(null,{data:l(o)}):n()})},s.prototype._unsubscribe=function(t,n,r){var i=this.subscribedDocs[t],o=i&&i[n];o&&o.destroy(),e.nextTick(r)},s.prototype._unsubscribeBulk=function(t,n,r){var i=this.subscribedDocs[t];if(!i)return e.nextTick(r);for(var o=0;o<n.length;o++){var s=i[n[o]];s&&s.destroy()}e.nextTick(r)},s.prototype._submit=function(t,e,n,r){var i=this;this.backend.submit(this,t,e,n,null,function(o,s){var a={src:n.src,seq:n.seq,v:n.v};if(o)return 4001===o.code?r(null,a):r(o);i._sendOps(t,e,s),r(null,a)})},s.prototype._createOp=function(t){var e=t.src||this.clientId;return t.op?new function(t,e,n,r){this.src=t,this.seq=e,this.v=n,this.op=r,this.m=null}(e,t.seq,t.v,t.op):t.create?new function(t,e,n,r){this.src=t,this.seq=e,this.v=n,this.create=r,this.m=null}(e,t.seq,t.v,t.create):t.del?new function(t,e,n,r){this.src=t,this.seq=e,this.v=n,this.del=r,this.m=null}(e,t.seq,t.v,t.del):void 0},s.prototype._fetchSnapshot=function(t,e,n,r){this.backend.fetchSnapshot(this,t,e,n,r)}}).call(e,n(1))},function(t,e,n){t.exports={type:n(133)}},function(t,e){t.exports=function(t,e,n,r){var i=function(t,n,r,i){e(r,t,n,"left"),e(i,n,t,"right")},o=t.transformX=function(t,e){n(t),n(e);for(var s=[],a=0;a<e.length;a++){for(var u=e[a],l=[],c=0;c<t.length;){var h=[];if(i(t[c],u,l,h),c++,1!==h.length){if(0===h.length){for(var f=c;f<t.length;f++)r(l,t[f]);u=null;break}for(var d=o(t.slice(c),h),p=0;p<d[0].length;p++)r(l,d[0][p]);for(var g=0;g<d[1].length;g++)r(s,d[1][g]);u=null;break}u=h[0]}null!=u&&r(s,u),t=l}return[t,s]};t.transform=function(t,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?t:1===t.length&&1===n.length?e([],t[0],n[0],r):"left"===r?o(t,n)[0]:o(n,t)[1]}}},function(t,e,n){(function(e){var r=n(54),i=n(55),o=n(136),s=n(12),a=n(9),u=n(11),l=n(10);function c(t){return 0===t.readyState||1===t.readyState?"connecting":"disconnected"}function h(t){s.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=c(t),this.bindToSocket(t)}function f(t){return t.hasPending()}function d(t){return t.hasWritePending()}t.exports=h,s.mixin(h),h.prototype.bindToSocket=function(t){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=t;var n=c(t);this._setState(n),this.canSend=!1;var r=this;t.onmessage=function(t){try{var n="string"===typeof t.data?JSON.parse(t.data):t.data}catch(e){return void console.warn("Failed to parse message",t)}r.debug&&console.log("RECV",JSON.stringify(n));var i={data:n};if(r.emit("receive",i),i.data)try{r.handleMessage(i.data)}catch(t){e.nextTick(function(){r.emit("error",t)})}},t.onopen=function(){r._setState("connecting")},t.onerror=function(t){r.emit("connection error",t)},t.onclose=function(t){"closed"===t||"Closed"===t?r._setState("closed",t):"stopped"===t||"Stopped by server"===t?r._setState("stopped",t):r._setState("disconnected",t)}},h.prototype.handleMessage=function(t){var e=null;switch(t.error&&((e=new Error(t.error.message)).code=t.error.code,e.data=t,delete t.error),t.a){case"init":return 1!==t.protocol?(e=new a(4019,"Invalid protocol version"),this.emit("error",e)):u.map[t.type]!==u.defaultType?(e=new a(4020,"Invalid default type"),this.emit("error",e)):"string"!==typeof t.id?(e=new a(4021,"Invalid client id"),this.emit("error",e)):(this.id=t.id,void this._setState("connected"));case"qf":return void((n=this.queries[t.id])&&n._handleFetch(e,t.data,t.extra));case"qs":return void((n=this.queries[t.id])&&n._handleSubscribe(e,t.data,t.extra));case"qu":return;case"q":var n;if(!(n=this.queries[t.id]))return;return e?n._handleError(e):(t.diff&&n._handleDiff(t.diff),void(t.hasOwnProperty("extra")&&n._handleExtra(t.extra)));case"bf":return this._handleBulkMessage(t,"_handleFetch");case"bs":return this._handleBulkMessage(t,"_handleSubscribe");case"bu":return this._handleBulkMessage(t,"_handleUnsubscribe");case"nf":return this._handleSnapshotFetch(e,t);case"f":return void((r=this.getExisting(t.c,t.d))&&r._handleFetch(e,t.data));case"s":return void((r=this.getExisting(t.c,t.d))&&r._handleSubscribe(e,t.data));case"u":return void((r=this.getExisting(t.c,t.d))&&r._handleUnsubscribe(e));case"op":var r;return void((r=this.getExisting(t.c,t.d))&&r._handleOp(e,t));default:console.warn("Ignoring unrecognized message",t)}},h.prototype._handleBulkMessage=function(t,e){if(t.data)for(var n in t.data){(i=this.getExisting(t.c,n))&&i[e](t.error,t.data[n])}else if(Array.isArray(t.b))for(var r=0;r<t.b.length;r++){n=t.b[r];(i=this.getExisting(t.c,n))&&i[e](t.error)}else if(t.b)for(var n in t.b){var i;(i=this.getExisting(t.c,n))&&i[e](t.error)}else console.error("Invalid bulk message",t)},h.prototype._reset=function(){this.seq=1,this.id=null,this.agent=null},h.prototype._setState=function(t,e){if(this.state!==t){if("connecting"===t&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===t&&"connecting"!==this.state){var n=new a(5007,"Cannot transition directly from "+this.state+" to "+t);return this.emit("error",n)}for(var r in this.state=t,this.canSend="connected"===t,"disconnected"!==t&&"stopped"!==t&&"closed"!==t||this._reset(),this.startBulk(),this.queries){this.queries[r]._onConnectionStateChanged()}for(var i in this.collections){var o=this.collections[i];for(var r in o)o[r]._onConnectionStateChanged()}for(var r in this._snapshotRequests){this._snapshotRequests[r]._onConnectionStateChanged()}this.endBulk(),this.emit(t,e),this.emit("state",t,e)}},h.prototype.startBulk=function(){this.bulk||(this.bulk={})},h.prototype.endBulk=function(){if(this.bulk)for(var t in this.bulk){var e=this.bulk[t];this._sendBulk("f",t,e.f),this._sendBulk("s",t,e.s),this._sendBulk("u",t,e.u)}this.bulk=null},h.prototype._sendBulk=function(t,e,n){if(n){var r,i=[],o={},s=0;for(var a in n){var u=n[a];null==u?i.push(a):(o[a]=u,r=a,s++)}if(1===i.length){a=i[0];this.send({a:t,c:e,d:a})}else i.length&&this.send({a:"b"+t,c:e,b:i});if(1===s){var l=o[r];this.send({a:t,c:e,d:r,v:l})}else s&&this.send({a:"b"+t,c:e,b:o})}},h.prototype._sendAction=function(t,e,n){if(this._addDoc(e),this.bulk){var r=this.bulk[e.collection]||(this.bulk[e.collection]={}),i=r[t]||(r[t]={}),o=i.hasOwnProperty(e.id);return i[e.id]=n,o}var s={a:t,c:e.collection,d:e.id,v:n};this.send(s)},h.prototype.sendFetch=function(t){return this._sendAction("f",t,t.version)},h.prototype.sendSubscribe=function(t){return this._sendAction("s",t,t.version)},h.prototype.sendUnsubscribe=function(t){return this._sendAction("u",t)},h.prototype.sendOp=function(t,e){this._addDoc(t);var n={a:"op",c:t.collection,d:t.id,v:t.version,src:e.src,seq:e.seq};e.op&&(n.op=e.op),e.create&&(n.create=e.create),e.del&&(n.del=e.del),this.send(n)},h.prototype.send=function(t){this.debug&&console.log("SEND",JSON.stringify(t)),this.emit("send",t),this.socket.send(JSON.stringify(t))},h.prototype.close=function(){this.socket.close()},h.prototype.getExisting=function(t,e){if(this.collections[t])return this.collections[t][e]},h.prototype.get=function(t,e){var n=this.collections[t]||(this.collections[t]={}),i=n[e];return i||(i=n[e]=new r(this,t,e),this.emit("doc",i)),i},h.prototype._destroyDoc=function(t){var e=this.collections[t.collection];e&&(delete e[t.id],l.hasKeys(e)||delete this.collections[t.collection])},h.prototype._addDoc=function(t){var e=this.collections[t.collection];e||(e=this.collections[t.collection]={}),e[t.id]!==t&&(e[t.id]=t)},h.prototype._createQuery=function(t,e,n,r,o){var s=this.nextQueryId++,a=new i(t,this,s,e,n,r,o);return this.queries[s]=a,a.send(),a},h.prototype._destroyQuery=function(t){delete this.queries[t.id]},h.prototype.createFetchQuery=function(t,e,n,r){return this._createQuery("qf",t,e,n,r)},h.prototype.createSubscribeQuery=function(t,e,n,r){return this._createQuery("qs",t,e,n,r)},h.prototype.hasPending=function(){return!!(this._firstDoc(f)||this._firstQuery(f)||this._firstSnapshotRequest())},h.prototype.hasWritePending=function(){return!!this._firstDoc(d)},h.prototype.whenNothingPending=function(t){var n=this._firstDoc(f);if(n)n.once("nothing pending",this._nothingPendingRetry(t));else{var r=this._firstQuery(f);if(r)r.once("ready",this._nothingPendingRetry(t));else{var i=this._firstSnapshotRequest();i?i.once("ready",this._nothingPendingRetry(t)):e.nextTick(t)}}},h.prototype._nothingPendingRetry=function(t){var n=this;return function(){e.nextTick(function(){n.whenNothingPending(t)})}},h.prototype._firstDoc=function(t){for(var e in this.collections){var n=this.collections[e];for(var r in n){var i=n[r];if(t(i))return i}}},h.prototype._firstQuery=function(t){for(var e in this.queries){var n=this.queries[e];if(t(n))return n}},h.prototype._firstSnapshotRequest=function(){for(var t in this._snapshotRequests)return this._snapshotRequests[t]},h.prototype.fetchSnapshot=function(t,e,n,r){"function"===typeof n&&(r=n,n=null);var i=this.nextSnapshotRequestId++,s=new o(this,i,t,e,n,r);this._snapshotRequests[s.requestId]=s,s.send()},h.prototype._handleSnapshotFetch=function(t,e){var n=this._snapshotRequests[e.id];n&&(delete this._snapshotRequests[e.id],n._handleResponse(t,e))}}).call(e,n(1))},function(t,e,n){(function(e){var r=n(12),i=n(9),o=n(11);function s(t,e,n){r.EventEmitter.call(this),this.connection=t,this.collection=e,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function a(t,e,n){if(e){var r=t.pop();t.push(function(t){r&&r(t),n&&n(t)})}else t.push(n)}function u(t,e){if(t.del)return delete(n=e).op,delete n.create,void delete n.del;var n;if(e.del)return new i(4017,"Document was deleted");if(e.create)return new i(4018,"Document alredy created");if(e.op){if(t.create)return new i(4018,"Document already created");if(t.type.transformX){var r=t.type.transformX(t.op,e.op);t.op=r[0],e.op=r[1]}else{var o=t.type.transform(t.op,e.op,"left"),s=t.type.transform(e.op,t.op,"right");t.op=o,e.op=s}}}function l(t,e){for(var n=!1,r=0;r<t.length;r++){var i=t[r];i&&(i(e),n=!0)}return n}t.exports=s,r.mixin(s),s.prototype.destroy=function(t){var e=this;e.whenNothingPending(function(){e.wantSubscribe?e.unsubscribe(function(n){if(n)return t?t(n):e.emit("error",n);e.connection._destroyDoc(e),t&&t()}):(e.connection._destroyDoc(e),t&&t())})},s.prototype._setType=function(t){if("string"===typeof t&&(t=o.map[t]),t)this.type=t;else{if(null!==t){var e=new i(4008,"Missing type "+t);return this.emit("error",e)}this.type=t,this.data=void 0}},s.prototype.ingestSnapshot=function(t,e){if(!t)return e&&e();if("number"!==typeof t.v){var n=new i(5008,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return e?e(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return e&&this.once("no write pending",e);n=new i(5009,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return e?e(n):this.emit("error",n)}return t.v>this.version?this.fetch(e):e&&e()}if(this.version>t.v)return e&&e();this.version=t.v;var r=void 0===t.type?o.defaultType:t.type;this._setType(r),this.data=this.type&&this.type.deserialize?this.type.deserialize(t.data):t.data,this.emit("load"),e&&e()},s.prototype.whenNothingPending=function(t){this.hasPending()?this.once("nothing pending",t):t()},s.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},s.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},s.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},s.prototype._emitResponseError=function(t,e){if(e)return e(t),void this._emitNothingPending();this._emitNothingPending(),this.emit("error",t)},s.prototype._handleFetch=function(t,e){var n=this.inflightFetch.shift();if(t)return this._emitResponseError(t,n);this.ingestSnapshot(e,n),this._emitNothingPending()},s.prototype._handleSubscribe=function(t,e){var n=this.inflightSubscribe.shift();if(t)return this._emitResponseError(t,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(e,n),this._emitNothingPending()},s.prototype._handleUnsubscribe=function(t){var e=this.inflightUnsubscribe.shift();if(t)return this._emitResponseError(t,e);e&&e(),this._emitNothingPending()},s.prototype._handleOp=function(t,e){if(t)return this.inflightOp?(4002===t.code&&(t=null),this._rollback(t)):this.emit("error",t);if(this.inflightOp&&e.src===this.inflightOp.src&&e.seq===this.inflightOp.seq)this._opAcknowledged(e);else if(null==this.version||e.v>this.version)this.fetch();else if(!(e.v<this.version)){if(this.inflightOp)if(r=u(this.inflightOp,e))return this._hardRollback(r);for(var n=0;n<this.pendingOps.length;n++){var r;if(r=u(this.pendingOps[n],e))return this._hardRollback(r)}this.version++,this._otApply(e,!1)}},s.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var t=this.inflightUnsubscribe;this.inflightUnsubscribe=[],l(t)}},s.prototype._resubscribe=function(){var t=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return t.length?void this.subscribe(function(e){l(t,e)}):void this.subscribe();t.length&&this.fetch(function(e){l(t,e)})},s.prototype.fetch=function(t){if(this.connection.canSend){var e=this.connection.sendFetch(this);a(this.inflightFetch,e,t)}else this.pendingFetch.push(t)},s.prototype.subscribe=function(t){if(this.wantSubscribe=!0,this.connection.canSend){var e=this.connection.sendSubscribe(this);a(this.inflightSubscribe,e,t)}else this.pendingFetch.push(t)},s.prototype.unsubscribe=function(t){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);a(this.inflightUnsubscribe,n,t)}else t&&e.nextTick(t)},s.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},s.prototype._otApply=function(t,e){if(t.op){if(!this.type){var n=new i(4015,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);return this.emit("error",n)}if(!e&&this.type===o.defaultType&&t.op.length>1){this.applyStack||(this.applyStack=[]);for(var r=this.applyStack.length,s=0;s<t.op.length;s++){for(var a={op:[t.op[s]]},l=r;l<this.applyStack.length;l++){var c=u(this.applyStack[l],a);if(c)return this._hardRollback(c)}this.emit("before op",a.op,e),this.data=this.type.apply(this.data,a.op),this.emit("op",a.op,e)}return void this._popApplyStack(r)}return this.emit("before op",t.op,e),this.data=this.type.apply(this.data,t.op),void this.emit("op",t.op,e)}if(t.create)return this._setType(t.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(t.create.data):this.type.deserialize(this.type.create(t.create.data)):this.type.create(t.create.data),void this.emit("create",e);if(t.del){var h=this.data;return this._setType(null),void this.emit("del",h,e)}},s.prototype._sendOp=function(){var t=this.connection.id;if(t){this.inflightOp||(this.inflightOp=this.pendingOps.shift());var e=this.inflightOp;if(!e){var n=new i(5010,"No op to send on call to _sendOp");return this.emit("error",n)}e.sentAt=Date.now(),e.retries=null==e.retries?0:e.retries+1,null==e.seq&&(e.seq=this.connection.seq++),this.connection.sendOp(this,e),null==e.src&&(e.src=t)}},s.prototype._submit=function(t,n,r){if(n||(n=!0),t.op){if(!this.type){var o=new i(4015,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return r?r(o):this.emit("error",o)}this.type.normalize&&(t.op=this.type.normalize(t.op))}this._pushOp(t,r),this._otApply(t,n);var s=this;e.nextTick(function(){s.flush()})},s.prototype._pushOp=function(t,e){if(this.applyStack)this.applyStack.push(t);else{var n=this._tryCompose(t);if(n)return void n.callbacks.push(e)}t.type=this.type,t.callbacks=[e],this.pendingOps.push(t)},s.prototype._popApplyStack=function(t){if(t>0)this.applyStack.length=t;else{var e=this.applyStack[0];if(this.applyStack=null,e)if(-1!==(r=this.pendingOps.indexOf(e)))for(var n=this.pendingOps.splice(r),r=0;r<n.length;r++){e=n[r];var i=this._tryCompose(e);i?i.callbacks=i.callbacks.concat(e.callbacks):this.pendingOps.push(e)}}},s.prototype._tryCompose=function(t){if(!this.preventCompose){var e=this.pendingOps[this.pendingOps.length-1];if(e)return e.create&&t.op?(e.create.data=this.type.apply(e.create.data,t.op),e):e.op&&t.op&&this.type.compose?(e.op=this.type.compose(e.op,t.op),e):void 0}},s.prototype.submitOp=function(t,e,n){"function"===typeof e&&(n=e,e=null);var r={op:t},i=e&&e.source;this._submit(r,i,n)},s.prototype.create=function(t,e,n,r){if("function"===typeof e?(r=e,n=null,e=null):"function"===typeof n&&(r=n,n=null),e||(e=o.defaultType.uri),this.type){var s=new i(4016,"Document already exists");return r?r(s):this.emit("error",s)}var a={create:{type:e,data:t}},u=n&&n.source;this._submit(a,u,r)},s.prototype.del=function(t,e){if("function"===typeof t&&(e=t,t=null),!this.type){var n=new i(4015,"Document does not exist");return e?e(n):this.emit("error",n)}var r=t&&t.source;this._submit({del:!0},r,e)},s.prototype.pause=function(){this.paused=!0},s.prototype.resume=function(){this.paused=!1,this.flush()},s.prototype._opAcknowledged=function(t){if(this.inflightOp.create)this.version=t.v;else if(t.v!==this.version)return console.warn("Invalid version from server. Expected: "+this.version+" Received: "+t.v,t),this.fetch();this.version++,this._clearInflightOp()},s.prototype._rollback=function(t){var e=this.inflightOp;if(e.op&&e.type.invert){e.op=e.type.invert(e.op);for(var n=0;n<this.pendingOps.length;n++){var r=u(this.pendingOps[n],e);if(r)return this._hardRollback(r)}return this._otApply(e,!1),void this._clearInflightOp(t)}this._hardRollback(t)},s.prototype._hardRollback=function(t){var e=this.inflightOp,n=this.pendingOps;this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var r=this;this.fetch(function(){for(var i=e&&l(e.callbacks,t),o=0;o<n.length;o++)l(n[o].callbacks,t);if(t&&!i)return r.emit("error",t)})},s.prototype._clearInflightOp=function(t){var e=l(this.inflightOp.callbacks,t);if(this.inflightOp=null,this.flush(),this._emitNothingPending(),t&&!e)return this.emit("error",t)}}).call(e,n(1))},function(t,e,n){(function(e){var r=n(12);function i(t,e,n,i,o,s,a){r.EventEmitter.call(this),this.action=t,this.connection=e,this.id=n,this.collection=i,this.query=o,this.results=null,s&&s.results&&(this.results=s.results,delete s.results),this.extra=void 0,this.options=s,this.callback=a,this.ready=!1,this.sent=!1}t.exports=i,r.mixin(i),i.prototype.hasPending=function(){return!this.ready},i.prototype.send=function(){if(this.connection.canSend){var t={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(t.o=this.options),this.results){for(var e=[],n=0;n<this.results.length;n++){var r=this.results[n];e.push([r.id,r.version])}t.r=e}this.connection.send(t),this.sent=!0}},i.prototype.destroy=function(t){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),t&&e.nextTick(t)},i.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},i.prototype._handleFetch=function(t,e,n){this.connection._destroyQuery(this),this._handleResponse(t,e,n)},i.prototype._handleSubscribe=function(t,e,n){this._handleResponse(t,e,n)},i.prototype._handleResponse=function(t,e,n){var r=this.callback;if(this.callback=null,t)return this._finishResponse(t,r);if(!e)return this._finishResponse(null,r);var i=this,o=1,s=function(t){if(t)return i._finishResponse(t,r);--o||i._finishResponse(null,r)};if(Array.isArray(e))o+=e.length,this.results=this._ingestSnapshots(e,s),this.extra=n;else for(var a in e){o++;var u=e[a];this.connection.get(u.c||this.collection,a).ingestSnapshot(u,s)}s()},i.prototype._ingestSnapshots=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=this.connection.get(i.c||this.collection,i.d);o.ingestSnapshot(i,e),n.push(o)}return n},i.prototype._finishResponse=function(t,e){if(this.emit("ready"),this.ready=!0,t)return this.connection._destroyQuery(this),e?e(t):this.emit("error",t);e&&e(null,this.results,this.extra)},i.prototype._handleError=function(t){this.emit("error",t)},i.prototype._handleDiff=function(t){for(var e=0;e<t.length;e++){"insert"===(n=t[e]).type&&(n.values=this._ingestSnapshots(n.values))}for(e=0;e<t.length;e++){var n;switch((n=t[e]).type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var i=n.howMany||1,o=this.results.splice(n.index,i);this.emit("remove",o,n.index);break;case"move":i=n.howMany||1;var s=this.results.splice(n.from,i);Array.prototype.splice.apply(this.results,[n.to,0].concat(s)),this.emit("move",s,n.from,n.to)}}this.emit("changed",this.results)},i.prototype._handleExtra=function(t){this.extra=t,this.emit("extra",t)}}).call(e,n(1))},function(t,e,n){(function(e){var r=n(57),i=n(26);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this.docs={},this.ops={},this.closed=!1}function s(t){return void 0===t?void 0:JSON.parse(JSON.stringify(t))}t.exports=o,o.prototype=Object.create(r.prototype),o.prototype.close=function(t){this.closed=!0,t&&t()},o.prototype.commit=function(t,n,r,i,o,s){var a=this;if("function"!==typeof s)throw new Error("Callback required");e.nextTick(function(){var e=a._getVersionSync(t,n);if(i.v!==e+1)return s(null,!1);var o=a._writeOpSync(t,n,r);return o?s(o):(o=a._writeSnapshotSync(t,n,i))?s(o):void s(null,!0)})},o.prototype.getSnapshot=function(t,n,r,i,o){var s=r&&r.$submit||i&&i.metadata,a=this;if("function"!==typeof o)throw new Error("Callback required");e.nextTick(function(){var e=a._getSnapshotSync(t,n,s);o(null,e)})},o.prototype.getOps=function(t,n,r,i,o,a){var u=o&&o.metadata,l=this;if("function"!==typeof a)throw new Error("Callback required");e.nextTick(function(){var e=l._getOpLogSync(t,n);null==i&&(i=e.length);var o=s(e.slice(r,i));if(!u)for(var c=0;c<o.length;c++)delete o[c].m;a(null,o)})},o.prototype.query=function(t,n,r,i,o){var s=i&&i.metadata,a=this;if("function"!==typeof o)throw new Error("Callback required");e.nextTick(function(){var e=a.docs[t],r=[];for(var u in e||{}){var l=a._getSnapshotSync(t,u,s);r.push(l)}try{var c=a._querySync(r,n,i);o(null,c.snapshots,c.extra)}catch(t){o(t)}})},o.prototype._querySync=function(t,e,n){return{snapshots:t}},o.prototype._writeOpSync=function(t,e,n){this._getOpLogSync(t,e)[n.v]=s(n)},o.prototype._writeSnapshotSync=function(t,e,n){var r=this.docs[t]||(this.docs[t]={});n.type?r[e]=s(n):delete r[e]},o.prototype._getSnapshotSync=function(t,e,n){var r,o=this.docs[t],a=o&&o[e];if(a){var u=s(a.data),l=n?s(a.m):null;r=new i(e,a.v,a.type,u,l)}else{var c=this._getVersionSync(t,e);r=new i(e,c,null,void 0,null)}return r},o.prototype._getOpLogSync=function(t,e){var n=this.ops[t]||(this.ops[t]={});return n[e]||(n[e]=[])},o.prototype._getVersionSync=function(t,e){var n=this.ops[t];return n&&n[e]&&n[e].length||0}}).call(e,n(1))},function(t,e,n){var r=n(48),i=n(9);function o(t){this.pollDebounce=t&&t.pollDebounce}t.exports=o,o.prototype.projectsSnapshots=!1,o.prototype.disableSubscribe=!1,o.prototype.close=function(t){t&&t()},o.prototype.commit=function(t,e,n,r,o,s){s(new i(5011,"commit DB method unimplemented"))},o.prototype.getSnapshot=function(t,e,n,r,o){o(new i(5012,"getSnapshot DB method unimplemented"))},o.prototype.getSnapshotBulk=function(t,e,n,i,o){var s={},a=this;r.each(e,function(e,r){a.getSnapshot(t,e,n,i,function(t,n){if(t)return r(t);s[e]=n,r()})},function(t){if(t)return o(t);o(null,s)})},o.prototype.getOps=function(t,e,n,r,o,s){s(new i(5013,"getOps DB method unimplemented"))},o.prototype.getOpsToSnapshot=function(t,e,n,r,i,o){var s=r.v;this.getOps(t,e,n,s,i,o)},o.prototype.getOpsBulk=function(t,e,n,i,o){var s={},a=this;r.forEachOf(e,function(e,r,o){var u=n&&n[r];a.getOps(t,r,e,u,i,function(t,e){if(t)return o(t);s[r]=e,o()})},function(t){if(t)return o(t);o(null,s)})},o.prototype.getCommittedOpVersion=function(t,e,n,r,i,o){this.getOpsToSnapshot(t,e,0,n,i,function(t,e){if(t)return o(t);for(var n=e.length;n--;){var i=e[n];if(r.src===i.src&&r.seq===i.seq)return o(null,i.v)}o()})},o.prototype.query=function(t,e,n,r,o){o(new i(4022,"query DB method unimplemented"))},o.prototype.queryPoll=function(t,e,n,r){this.query(t,e,{},n,function(t,e,n){if(t)return r(t);for(var i=[],o=0;o<e.length;o++)i.push(e[o].id);r(null,i,n)})},o.prototype.queryPollDoc=function(t,e,n,r,o){o(new i(5014,"queryPollDoc DB method unimplemented"))},o.prototype.canPollDoc=function(){return!1},o.prototype.skipPoll=function(){return!1}},function(t,e,n){(function(e){var r=n(59);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}t.exports=i,i.prototype=Object.create(r.prototype),i.prototype._subscribe=function(t,n){n&&e.nextTick(n)},i.prototype._unsubscribe=function(t,n){n&&e.nextTick(n)},i.prototype._publish=function(t,n,r){var i=this;e.nextTick(function(){for(var e=0;e<t.length;e++){var o=t[e];i.subscribed[o]&&i._emit(o,n)}r&&r()})}}).call(e,n(1))},function(t,e,n){(function(e){var r=n(12),i=n(138),o=n(9),s=n(10);function a(t){if(!(this instanceof a))return new a(t);r.EventEmitter.call(this),this.prefix=t&&t.prefix,this.nextStreamId=1,this.streamsCount=0,this.streams={},this.subscribed={};var e=this;this._defaultCallback=function(t){if(t)return e.emit("error",t)}}function u(t){var e={};for(var n in t)e[n]=t[n];return e}t.exports=a,r.mixin(a),a.prototype.close=function(t){for(var n in this.streams){var r=this.streams[n];for(var i in r)r[i].destroy()}t&&e.nextTick(t)},a.prototype._subscribe=function(t,n){e.nextTick(function(){n(new o(5015,"_subscribe PubSub method unimplemented"))})},a.prototype._unsubscribe=function(t,n){e.nextTick(function(){n(new o(5016,"_unsubscribe PubSub method unimplemented"))})},a.prototype._publish=function(t,n,r){e.nextTick(function(){r(new o(5017,"_publish PubSub method unimplemented"))})},a.prototype.subscribe=function(t,n){n||(n=this._defaultCallback),this.prefix&&(t=this.prefix+" "+t);var r=this;this.subscribed[t]?e.nextTick(function(){var e=r._createStream(t);n(null,e)}):this._subscribe(t,function(e){if(e)return n(e);r.subscribed[t]=!0;var i=r._createStream(t);n(null,i)})},a.prototype.publish=function(t,e,n){if(n||(n=this._defaultCallback),this.prefix)for(var r=0;r<t.length;r++)t[r]=this.prefix+" "+t[r];this._publish(t,e,n)},a.prototype._emit=function(t,e){var n=this.streams[t];if(n)for(var r in n){var i=u(e);n[r].pushOp(i.c,i.d,i)}},a.prototype._createStream=function(t){var e=new i,n=this;e.once("close",function(){n._removeStream(t,e)}),this.streamsCount++;var r=this.streams[t]||(this.streams[t]={});return e.id=this.nextStreamId++,r[e.id]=e,e},a.prototype._removeStream=function(t,e){var n=this.streams[t];n&&(this.streamsCount--,delete n[e.id],s.hasKeys(n)||(delete this.streams[t],delete this.subscribed[t],this._unsubscribe(t,this._defaultCallback)))}}).call(e,n(1))},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])g(u)||!w(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,i){if(y(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&e._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"\x1b["+a.colors[n][0]+"m"+t+"\x1b["+a.colors[n][1]+"m":t}function l(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=c(t,i,r)),i}var o=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(v(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return h(n)}var l,w="",k=!1,T=["{","}"];(d(n)&&(k=!0,T=["[","]"]),S(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(w=" "+RegExp.prototype.toString.call(n)),x(n)&&(w=" "+Date.prototype.toUTCString.call(n)),_(n)&&(w=" "+h(n)),0!==s.length||k&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=k?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)E(e,String(s))?o.push(f(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}(t,n,r,a,s):s.map(function(e){return f(t,n,r,a,e,k)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,w,T)):T[0]+w+T[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),E(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=g(n)?c(t,u.value,null):c(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function p(t){return"boolean"===typeof t}function g(t){return null===t}function v(t){return"number"===typeof t}function m(t){return"string"===typeof t}function y(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===k(t)}function w(t){return"object"===typeof t&&null!==t}function x(t){return w(t)&&"[object Date]"===k(t)}function _(t){return w(t)&&("[object Error]"===k(t)||t instanceof Error)}function S(t){return"function"===typeof t}function k(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(y(o)&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"/editor"}).NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=r.pid;s[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=m,e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=w,e.isDate=x,e.isError=_,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=n(139);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":"),[t.getDate(),C[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(13),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(3),n(1))},function(t,e,n){"use strict";(function(e,r){var i=n(19);t.exports=b;var o,s=n(62);b.ReadableState=y;n(8).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=n(63),l=n(20).Buffer,c=e.Uint8Array||function(){};var h=n(15);h.inherits=n(13);var f=n(142),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,g=n(143),v=n(65);h.inherits(b,u);var m=["error","close","destroy","pause","resume"];function y(t,e){o=o||n(14),t=t||{};var r=e instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(66).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||n(14),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function w(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,k(t)}(t,s)):(i||(o=function(t,e){var n;r=e,l.isBuffer(r)||r instanceof c||"string"===typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?x(t,s,e,!1):C(t,s)):x(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function x(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&k(t)),C(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),n=!0),w(this,t,e,!1,n)},b.prototype.unshift=function(t){return w(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=n(66).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var _=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=_?t=_:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(T,t):T(t))}function T(t){d("emit readable"),t.emit("readable"),A(t)}function C(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(E,t,e))}function E(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function O(t){d("readable nexttick read 0"),t.read(0)}function M(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0)}function A(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=l.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function D(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(N,e,t))}function N(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):k(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&D(this),null;var r,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(n,e))),null===(r=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?c:b;function l(e,r){d("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),t.removeListener("close",m),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",v),t.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",g),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){d("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,A(t))}}(n);t.on("drain",h);var f=!1;var p=!1;function g(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==L(o.pipes,t))&&!f&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function v(e){d("onerror",e),b(),t.removeListener("error",v),0===a(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",y),b()}function y(){d("onfinish"),t.removeListener("close",m),b()}function b(){d("unpipe"),n.unpipe(t)}return n.on("data",g),function(t,e,n){if("function"===typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",v),t.once("close",m),t.once("finish",y),t.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=L(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},b.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&k(this):i.nextTick(O,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(M,t,e))}(this,t)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause())))}),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){d("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=P}).call(e,n(3),n(1))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(8).EventEmitter},function(t,e,n){"use strict";(function(t){var r=n(140),i=n(141),o=n(62);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,r){return U(z(e,t.length-n),t,n,r)}function w(t,e,n,r){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return w(t,e,n,r)}function _(t,e,n,r){return U(W(e),t,n,r)}function S(t,e,n,r){return U(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128===(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=C));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?a(t,e):void 0!==n?"string"===typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),l=this.slice(r,i),c=t.slice(e,n),h=0;h<a;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function A(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function I(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,r,o){return o||I(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,o){return o||I(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:z(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function U(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(e,n(3))},function(t,e,n){"use strict";var r=n(19);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(20).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var r=n(14),i=n(15);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"===typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(this,null,null)}function a(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(13),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var r=n(151),i=n(152),o=n(9),s=n(10);function a(t,e,n,r){this.backend=t.backend,this.agent=t.agent,this.db=t.db,this.index=t.index,this.query=t.query,this.collection=t.collection,this.fields=t.fields,this.options=t.options,this.snapshotProjection=t.snapshotProjection,this.stream=e,this.ids=n,this.extra=r,this.skipPoll=this.options.skipPoll||s.doNothing,this.canPollDoc=this.db.canPollDoc(this.collection,this.query),this.pollDebounce="number"===typeof this.options.pollDebounce?this.options.pollDebounce:"number"===typeof this.db.pollDebounce?this.db.pollDebounce:0,this.pollInterval="number"===typeof this.options.pollInterval?this.options.pollInterval:"number"===typeof this.db.pollInterval?this.db.pollInterval:0,this._polling=!1,this._pendingPoll=null,this._pollDebounceId=null,this._pollIntervalId=null}t.exports=a,a.prototype._open=function(){var t=this;this._defaultCallback=function(e){e&&t.onError(e)},t.stream.on("data",function(e){if(e.error)return t.onError(e.error);t._update(e)}),t.stream.on("end",function(){t.destroy()}),this._flushPoll()},a.prototype.destroy=function(){clearTimeout(this._pollDebounceId),clearTimeout(this._pollIntervalId),this.stream.destroy()},a.prototype._emitTiming=function(t,e){this.backend.emit("timing",t,Date.now()-e,this)},a.prototype._update=function(t){var e=t.d;-1!==this.ids.indexOf(e)&&this.onOp(t);try{if(this.db.skipPoll(this.collection,e,t,this.query))return this._defaultCallback();if(this.skipPoll(this.collection,e,t,this.query))return this._defaultCallback()}catch(t){return this._defaultCallback(t)}this.canPollDoc?this.queryPollDoc(e,this._defaultCallback):this.queryPoll(this._defaultCallback)},a.prototype._flushPoll=function(){if(!this._polling&&!this._pollDebounceId)if(this._pendingPoll)this.queryPoll();else if(this.pollInterval){var t=this;this._pollIntervalId=setTimeout(function(){t._pollIntervalId=null,t.queryPoll(t._defaultCallback)},this.pollInterval)}},a.prototype.queryPoll=function(t){var e=this;if(this._polling||this._pollDebounceId)this._pendingPoll?this._pendingPoll.push(t):this._pendingPoll=[t];else{this._polling=!0;var n=this._pendingPoll;this._pendingPoll=null,this.pollDebounce&&(this._pollDebounceId=setTimeout(function(){e._pollDebounceId=null,e._flushPoll()},this.pollDebounce)),clearTimeout(this._pollIntervalId);var o=Date.now();this.db.queryPoll(this.collection,this.query,this.options,function(s,a,u){if(s)return e._finishPoll(s,t,n);e._emitTiming("queryEmitter.poll",o),i(e.extra,u)||(e.extra=u,e.onExtra(u));var l=r(e.ids,a);if(l.length){e.ids=a;var c=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(i instanceof r.InsertDiff)for(var o=0;o<i.values.length;o++)e.push(i.values[o])}return e}(l);c.length?e.db.getSnapshotBulk(e.collection,c,e.fields,null,function(i,s){if(i)return e._finishPoll(i,t,n);var a=e.backend._getSnapshotsFromMap(c,s),u=e.backend.SNAPSHOT_TYPES.current;e.backend._sanitizeSnapshots(e.agent,e.snapshotProjection,e.collection,a,u,function(i){if(i)return e._finishPoll(i,t,n);e._emitTiming("queryEmitter.pollGetSnapshotBulk",o);var a=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=t[i];if(o instanceof r.InsertDiff){for(var s=[],a=0;a<o.values.length;a++){var u=o.values[a];s.push(e[u])}n.push(new r.InsertDiff(o.index,s))}else n.push(o)}return n}(l,s);e.onDiff(a),e._finishPoll(i,t,n)})}):(e.onDiff(l),e._finishPoll(s,t,n))}else e._finishPoll(s,t,n)})}},a.prototype._finishPoll=function(t,e,n){if(this._polling=!1,e&&e(t),n)for(var r=0;r<n.length;r++)(e=n[r])&&e(t);this._flushPoll()},a.prototype.queryPollDoc=function(t,e){var n=this,i=Date.now();this.db.queryPollDoc(this.collection,t,this.query,this.options,function(o,s){if(o)return e(o);n._emitTiming("queryEmitter.pollDoc",i);var a=n.ids.indexOf(t);if(-1===a&&s){var u=n.ids.push(t)-1;n.db.getSnapshot(n.collection,t,n.fields,null,function(t,o){if(t)return e(t);var s=[o],a=n.backend.SNAPSHOT_TYPES.current;n.backend._sanitizeSnapshots(n.agent,n.snapshotProjection,n.collection,s,a,function(t){if(t)return e(t);n.onDiff([new r.InsertDiff(u,s)]),n._emitTiming("queryEmitter.pollDocGetSnapshot",i),e()})})}else{if(-1!==a&&!s)return n.ids.splice(a,1),n.onDiff([new r.RemoveDiff(a,1)]),e();e()}})},a.prototype.onError=a.prototype.onDiff=a.prototype.onExtra=a.prototype.onOp=function(){throw new o(5018,"Required QueryEmitter listener not assigned")}},function(t,e,n){var r=n(31),i=n(32);function o(t,e,n,r,i,o){this.backend=t,this.agent=e;var s=t.projections[n];this.index=n,this.projection=s,this.collection=s?s.target:n,this.id=r,this.op=i,this.options=o,this.start=Date.now(),this._addOpMeta(),this.action=null,this.custom={},this.saveMilestoneSnapshot=null,this.suppressPublish=t.suppressPublish,this.maxRetries=t.maxSubmitRetries,this.retries=0,this.snapshot=null,this.ops=[],this.channels=null}t.exports=o,o.prototype.submit=function(t){var e=this,n=this.backend,r=this.collection,i=this.id,o=this.op;n.db.getSnapshot(r,i,{$submit:!0},null,function(s,a){if(s)return t(s);if(e.snapshot=a,e._addSnapshotMeta(),null==o.v){if(o.create&&a.type&&o.src)return void n.db.getCommittedOpVersion(r,i,a,o,null,function(n,r){if(n)return t(n);null==r?t(e.alreadyCreatedError()):(o.v=r,t(e.alreadySubmittedError()))});o.v=a.v}if(o.v===a.v)return e.apply(t);if(o.v>a.v)return t(e.newerVersionError());var u=o.v;n.db.getOpsToSnapshot(r,i,u,a,null,function(n,r){return n?t(n):r.length!==a.v-u?t(e.missingOpsError()):(n=e._transformOp(r))?t(n):o.v!==a.v?t(e.versionAfterTransformError()):void e.apply(t)})})},o.prototype.apply=function(t){var e=this.projection;if(e&&!i.isOpAllowed(this.snapshot.type,e.fields,this.op))return t(this.projectionError());this.channels=this.backend.getChannels(this.collection,this.id);var n=this;this.backend.trigger("apply",this.agent,this,function(e){return e?t(e):(e=r.apply(n.snapshot,n.op))?t(e):void n.commit(t)})},o.prototype.commit=function(t){var e=this,n=this.backend;n.trigger("commit",this.agent,this,function(r){if(r)return t(r);n.db.commit(e.collection,e.id,e.op,e.snapshot,e.options,function(r,i){if(r)return t(r);if(!i)return e.retry(t);if(!e.suppressPublish){var o=e.op;o.c=e.collection,o.d=e.id,o.m=void 0,e.collection!==e.index&&(o.i=e.index),n.pubsub.publish(e.channels,o)}e._shouldSaveMilestoneSnapshot(e.snapshot)&&e.backend.milestoneDb.saveMilestoneSnapshot(e.collection,e.snapshot),t()})})},o.prototype.retry=function(t){if(this.retries++,null!=this.maxRetries&&this.retries>this.maxRetries)return t(this.maxRetriesError());this.backend.emit("timing","submit.retry",Date.now()-this.start,this),this.submit(t)},o.prototype._transformOp=function(t){for(var e=this.snapshot.type,n=0;n<t.length;n++){var i=t[n];if(this.op.src&&this.op.src===i.src&&this.op.seq===i.seq)return this.alreadySubmittedError();if(this.op.v!==i.v)return this.versionDuringTransformError();var o=r.transform(e,this.op,i);if(o)return o;this.ops.push(i)}},o.prototype._addOpMeta=function(){this.op.m={ts:this.start},this.op.create&&(this.op.create.type=r.normalizeType(this.op.create.type))},o.prototype._addSnapshotMeta=function(){var t=this.snapshot.m||(this.snapshot.m={});this.op.create?t.ctime=this.start:this.op.del&&(this.op.m.data=this.snapshot.data),t.mtime=this.start},o.prototype._shouldSaveMilestoneSnapshot=function(t){return null===this.saveMilestoneSnapshot?t&&t.v%this.backend.milestoneDb.interval===0:this.saveMilestoneSnapshot},o.prototype.alreadySubmittedError=function(){return{code:4001,message:"Op already submitted"}},o.prototype.rejectedError=function(){return{code:4002,message:"Op submit rejected"}},o.prototype.alreadyCreatedError=function(){return{code:4010,message:"Invalid op submitted. Document already created"}},o.prototype.newerVersionError=function(){return{code:4011,message:"Invalid op submitted. Op version newer than current snapshot"}},o.prototype.projectionError=function(){return{code:4012,message:"Invalid op submitted. Operation invalid in projected collection"}},o.prototype.missingOpsError=function(){return{code:5001,message:"Op submit failed. DB missing ops needed to transform it up to the current snapshot version"}},o.prototype.versionDuringTransformError=function(){return{code:5002,message:"Op submit failed. Versions mismatched during op transform"}},o.prototype.versionAfterTransformError=function(){return{code:5003,message:"Op submit failed. Op version mismatches snapshot after op transform"}},o.prototype.maxRetriesError=function(){return{code:5004,message:"Op submit failed. Maximum submit retries exceeded"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8),i=n(4),o=n(33);e.SVGComponentDisplay=class extends r.EventEmitter{constructor(t,e,n,r){super(),this.stateMachineDisplay=t,this.name=e,this.dimensions=r,this.fsm=this.stateMachineDisplay.getFSM(),this.svg=this.stateMachineDisplay.getSVG(),this.graph=this.stateMachineDisplay.getGraph(),this.group=this.svg.group(),this.foreignObject=this.group.element("foreignObject"),this.foElement=this.foreignObject.node,this.foDisplay=new o.ForeignObjectDisplay(this.fsm,this.foElement,e,n),this.foDisplay.on("setDimensions",t=>{const n=this.graph.node(e);i.extend(n,{width:t.width,height:t.height}),this.emit("dimensionsChanged")}),this.addListeners(),this.stateMachineDisplay.getFOVGetter()(this.foDisplay)}remove(){this.group.remove()}getForeignObjectDisplay(){return this.foDisplay}addListeners(){this.group.each((t,e)=>{e.forEach(t=>{t.on("contextmenu",t=>(t.preventDefault(),t.stopPropagation(),!1))})}),this.group.mousedown(t=>this.emit("mousedown",t)),this.group.mouseout(t=>this.emit("mouseout",t)),this.group.mouseover(t=>this.emit("mouseover",t)),this.group.mouseup(t=>this.emit("mouseup",t))}forEachInGroup(t,e,n){t.select(e).each((t,e)=>{e.forEach(t=>{n(t)})})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8);e.SVGShapeButton=class extends r.EventEmitter{constructor(t,e,n,r,i,o,s,a){super(),this.svg=t,this.pathString=e,this.x=n,this.y=r,this.r=i,this.color=o,this.activeColor=s,this.thickness=a,this.group=this.svg.group(),this.path=this.group.path(this.pathString).attr({stroke:o,"stroke-width":a,fill:"none",cursor:"pointer"}),this.circle=this.group.circle(this.r).center(n,r).attr({stroke:o,"stroke-width":a,"fill-opacity":.1,fill:o,cursor:"pointer"}),this.group.mouseover(()=>{this.circle.animate(100).attr({"fill-opacity":.2,fill:s,stroke:s}),this.path.animate(100).attr({stroke:s})}),this.group.mouseout(()=>{this.circle.animate(100).attr({"fill-opacity":.1,fill:o,stroke:o}),this.path.animate(100).attr({stroke:o})}),this.group.click(()=>{this.emit("click"),event.preventDefault()}),this.group.mousedown(()=>{this.emit("mousedown"),event.preventDefault()}),this.group.mouseup(()=>{this.emit("mouseup"),event.preventDefault()})}remove(){this.group.remove()}},e.getArrowPath=function(t,e,n,r,i){const o=(180+r)*Math.PI/180;return`M ${t-n/2} ${e}\n        h ${n}\n        l ${Math.cos(o)*i} ${Math.sin(o)*i}\n        M ${t+n/2} ${e}\n        l ${Math.cos(o)*i} ${Math.sin(-o)*i}`},e.getXPath=function(t,e,n,r){const i=r*Math.PI/180;return`M ${t-n/2*Math.cos(i)} ${e-n/2*Math.sin(i)}\n    L ${t+n/2*Math.cos(i)} ${e+n/2*Math.sin(i)}\n    M ${t+n/2*Math.cos(i)} ${e-n/2*Math.sin(i)}\n    L ${t-n/2*Math.cos(i)} ${e+n/2*Math.sin(i)}`}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(6);!function(t){t[t.IDLE=0]="IDLE",t[t.EDITING=1]="EDITING"}(o||(o={}));var a=function(t){function e(e){var n=t.call(this,e)||this;return n.updateText=function(t){n.setState({inputText:t.target.value})},n.inputRef=function(t){t&&(t.select(),t.focus())},n.onClick=function(t){n.setState({state:o.EDITING})},n.onKeyDown=function(t){var e=t.which;13===e?(n.text=n.state.inputText,n.setState({state:o.IDLE}),n.emitUpdate()):27===e&&n.setState({inputText:n.text,state:o.IDLE})},n.state={inputText:n.props.text,state:o.IDLE},n.text=n.props.text,n}return i(e,t),e.prototype.render=function(){if(this.state.state===o.IDLE){var t=void 0;return this.text?(t=this.text,!1):this.props.placeholder?(t=this.props.placeholder,!0):(t="",!0),s.createElement("div",{className:"cell",onClick:this.onClick},t)}return s.createElement("input",{onKeyDown:this.onKeyDown,onChange:this.updateText,value:this.state.inputText,ref:this.inputRef,placeholder:this.props.placeholder,type:"text"})},e.prototype.emitUpdate=function(){this.props.onChange&&this.props.onChange({value:this.text})},e.defaultProps={text:"",placeholder:"(empty)"},e}(s.Component);e.Cell=a},function(t,e,n){var r;r=function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),r=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),s=r||i||o,a=s&&(r?document.documentMode||6:+(o||i)[1]),u=!o&&/WebKit\//.test(t),l=u&&/Qt\/\d+\.\d+/.test(t),c=!o&&/Chrome\//.test(t),h=/Opera\//.test(t),f=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),g=!o&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),v=/Android/.test(t),m=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),y=g||/Mac/.test(e),b=/\bCrOS\b/.test(t),w=/win/i.test(e),x=h&&t.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(h=!1,u=!0);var _=y&&(l||h&&(null==x||x<12.11)),S=n||s&&a>=9;function k(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var T,C=function(t,e){var n=t.className,r=k(e).exec(n);if(r){var i=n.slice(r.index+r[0].length);t.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function E(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function O(t,e){return E(t).appendChild(e)}function M(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function A(t,e,n,r){var i=M(t,e,n,r);return i.setAttribute("role","presentation"),i}function P(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function D(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function N(t,e){var n=t.className;k(e).test(n)||(t.className+=(n?" ":"")+e)}function L(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)n[r]&&!k(n[r]).test(e)&&(e+=" "+n[r]);return e}T=document.createRange?function(t,e,n,r){var i=document.createRange();return i.setEnd(r||t,n),i.setStart(t,e),i}:function(t,e,n){var r=document.body.createTextRange();try{r.moveToElementText(t.parentNode)}catch(t){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r};var I=function(t){t.select()};function R(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function j(t,e,n){for(var r in e||(e={}),t)!t.hasOwnProperty(r)||!1===n&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function F(t,e,n,r,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=r||0,s=i||0;;){var a=t.indexOf("\t",o);if(a<0||a>=e)return s+(e-o);s+=a-o,s+=n-s%n,o=a+1}}g?I=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:s&&(I=function(t){try{t.select()}catch(t){}});var B=function(){this.id=null};function z(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}B.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var W=30,U={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},G={origin:"*mouse"},q={origin:"+move"};function H(t,e,n){for(var r=0,i=0;;){var o=t.indexOf("\t",r);-1==o&&(o=t.length);var s=o-r;if(o==t.length||i+s>=e)return r+Math.min(s,e-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=e)return r}}var $=[""];function Y(t){for(;$.length<=t;)$.push(X($)+" ");return $[t]}function X(t){return t[t.length-1]}function K(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function Q(){}function J(t,e){var n;return Object.create?n=Object.create(t):(Q.prototype=t,n=new Q),e&&j(e,n),n}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Z.test(t))}function et(t,e){return e?!!(e.source.indexOf("\\w")>-1&&tt(t))||e.test(t):tt(t)}function nt(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var rt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function it(t){return t.charCodeAt(0)>=768&&rt.test(t)}function ot(t,e,n){for(;(n<0?e>0:e<t.length)&&it(t.charAt(e));)e+=n;return e}function st(t,e,n){for(var r=e>n?-1:1;;){if(e==n)return e;var i=(e+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+r}}function at(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(e<o){n=i;break}e-=o}return n.lines[e]}function ut(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;i==n.line&&(o=o.slice(0,n.ch)),i==e.line&&(o=o.slice(e.ch)),r.push(o),++i}),r}function lt(t,e,n){var r=[];return t.iter(e,n,function(t){r.push(t.text)}),r}function ct(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function ht(t){if(null==t.parent)return null;for(var e=t.parent,n=z(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function ft(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],o=i.height;if(e<o){t=i;continue t}e-=o,n+=i.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var a=t.lines[s].height;if(e<a)break;e-=a}return n+s}function dt(t,e){return e>=t.first&&e<t.first+t.size}function pt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function gt(t,e,n){if(void 0===n&&(n=null),!(this instanceof gt))return new gt(t,e,n);this.line=t,this.ch=e,this.sticky=n}function vt(t,e){return t.line-e.line||t.ch-e.ch}function mt(t,e){return t.sticky==e.sticky&&0==vt(t,e)}function yt(t){return gt(t.line,t.ch)}function bt(t,e){return vt(t,e)<0?e:t}function wt(t,e){return vt(t,e)<0?t:e}function xt(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function _t(t,e){if(e.line<t.first)return gt(t.first,0);var n=t.first+t.size-1;return e.line>n?gt(n,at(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?gt(t.line,e):n<0?gt(t.line,0):t}(e,at(t,e.line).text.length)}function St(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=_t(t,e[r]);return n}var kt=!1,Tt=!1;function Ct(t,e,n){this.marker=t,this.from=e,this.to=n}function Et(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function Ot(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function Mt(t,e){if(e.full)return null;var n=dt(t,e.from.line)&&at(t,e.from.line).markedSpans,r=dt(t,e.to.line)&&at(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,o=e.to.ch,s=0==vt(e.from,e.to),a=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(r||(r=[])).push(new Ct(s,o.from,a?null:o.to))}}return r}(n,i,s),u=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(r||(r=[])).push(new Ct(s,a?null:o.from-e,null==o.to?null:o.to-e))}}return r}(r,o,s),l=1==e.text.length,c=X(e.text).length+(l?i:0);if(a)for(var h=0;h<a.length;++h){var f=a[h];if(null==f.to){var d=Et(u,f.marker);d?l&&(f.to=null==d.to?null:d.to+c):f.to=i}}if(u)for(var p=0;p<u.length;++p){var g=u[p];if(null!=g.to&&(g.to+=c),null==g.from)Et(a,g.marker)||(g.from=c,l&&(a||(a=[])).push(g));else g.from+=c,l&&(a||(a=[])).push(g)}a&&(a=At(a)),u&&u!=a&&(u=At(u));var v=[a];if(!l){var m,y=e.text.length-2;if(y>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(m||(m=[])).push(new Ct(a[b].marker,null,null));for(var w=0;w<y;++w)v.push(m);v.push(u)}return v}function At(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Pt(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Dt(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Nt(t){return t.inclusiveLeft?-1:0}function Lt(t){return t.inclusiveRight?1:0}function It(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),o=vt(r.from,i.from)||Nt(t)-Nt(e);if(o)return-o;var s=vt(r.to,i.to)||Lt(t)-Lt(e);return s||e.id-t.id}function Rt(t,e){var n,r=Tt&&t.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(e?i.from:i.to)&&(!n||It(n,i.marker)<0)&&(n=i.marker);return n}function jt(t){return Rt(t,!0)}function Ft(t){return Rt(t,!1)}function Bt(t,e){var n,r=Tt&&t.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||It(n,o.marker)<0)&&(n=o.marker)}return n}function zt(t,e,n,r,i){var o=at(t,e),s=Tt&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var u=s[a];if(u.marker.collapsed){var l=u.marker.find(0),c=vt(l.from,n)||Nt(u.marker)-Nt(i),h=vt(l.to,r)||Lt(u.marker)-Lt(i);if(!(c>=0&&h<=0||c<=0&&h>=0)&&(c<=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?vt(l.to,n)>=0:vt(l.to,n)>0)||c>=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?vt(l.from,r)<=0:vt(l.from,r)<0)))return!0}}}function Wt(t){for(var e;e=jt(t);)t=e.find(-1,!0).line;return t}function Ut(t,e){var n=at(t,e),r=Wt(n);return n==r?e:ht(r)}function Vt(t,e){if(e>t.lastLine())return e;var n,r=at(t,e);if(!Gt(t,r))return e;for(;n=Ft(r);)r=n.find(1,!0).line;return ht(r)+1}function Gt(t,e){var n=Tt&&e.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&qt(t,e,r))return!0}}function qt(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return qt(t,r.line,Et(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i=void 0,o=0;o<e.markedSpans.length;++o)if((i=e.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&qt(t,e,i))return!0}function Ht(t){for(var e=0,n=(t=Wt(t)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;e+=a.height}return e}function $t(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=jt(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=Ft(r);){var o=e.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Yt(t){var e=t.display,n=t.doc;e.maxLine=at(n,n.first),e.maxLineLength=$t(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=$t(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}var Xt=null;function Kt(t,e,n){var r;Xt=null;for(var i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return i;o.to==e&&(o.from!=o.to&&"before"==n?r=i:Xt=i),o.from==e&&(o.from!=o.to&&"before"!=n?r=i:Xt=i)}return null!=r?r:Xt}var Qt=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",e="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,s=/[1n]/;function a(t,e,n){this.level=t,this.from=e,this.to=n}return function(u,l){var c="ltr"==l?"L":"R";if(0==u.length||"ltr"==l&&!n.test(u))return!1;for(var h,f=u.length,d=[],p=0;p<f;++p)d.push((h=u.charCodeAt(p))<=247?t.charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?e.charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":8204==h?"b":"L");for(var g=0,v=c;g<f;++g){var m=d[g];"m"==m?d[g]=v:v=m}for(var y=0,b=c;y<f;++y){var w=d[y];"1"==w&&"r"==b?d[y]="n":i.test(w)&&(b=w,"r"==w&&(d[y]="R"))}for(var x=1,_=d[0];x<f-1;++x){var S=d[x];"+"==S&&"1"==_&&"1"==d[x+1]?d[x]="1":","!=S||_!=d[x+1]||"1"!=_&&"n"!=_||(d[x]=_),_=S}for(var k=0;k<f;++k){var T=d[k];if(","==T)d[k]="N";else if("%"==T){var C=void 0;for(C=k+1;C<f&&"%"==d[C];++C);for(var E=k&&"!"==d[k-1]||C<f&&"1"==d[C]?"1":"N",O=k;O<C;++O)d[O]=E;k=C-1}}for(var M=0,A=c;M<f;++M){var P=d[M];"L"==A&&"1"==P?d[M]="L":i.test(P)&&(A=P)}for(var D=0;D<f;++D)if(r.test(d[D])){var N=void 0;for(N=D+1;N<f&&r.test(d[N]);++N);for(var L="L"==(D?d[D-1]:c),I=L==("L"==(N<f?d[N]:c))?L?"L":"R":c,R=D;R<N;++R)d[R]=I;D=N-1}for(var j,F=[],B=0;B<f;)if(o.test(d[B])){var z=B;for(++B;B<f&&o.test(d[B]);++B);F.push(new a(0,z,B))}else{var W=B,U=F.length;for(++B;B<f&&"L"!=d[B];++B);for(var V=W;V<B;)if(s.test(d[V])){W<V&&F.splice(U,0,new a(1,W,V));var G=V;for(++V;V<B&&s.test(d[V]);++V);F.splice(U,0,new a(2,G,V)),W=V}else++V;W<B&&F.splice(U,0,new a(1,W,B))}return"ltr"==l&&(1==F[0].level&&(j=u.match(/^\s+/))&&(F[0].from=j[0].length,F.unshift(new a(0,0,j[0].length))),1==X(F).level&&(j=u.match(/\s+$/))&&(X(F).to-=j[0].length,F.push(new a(0,f-j[0].length,f)))),"rtl"==l?F.reverse():F}}();function Jt(t,e){var n=t.order;return null==n&&(n=t.order=Qt(t.text,e)),n}var Zt=[],te=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={});r[e]=(r[e]||Zt).concat(n)}};function ee(t,e){return t._handlers&&t._handlers[e]||Zt}function ne(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers,i=r&&r[e];if(i){var o=z(i,n);o>-1&&(r[e]=i.slice(0,o).concat(i.slice(o+1)))}}}function re(t,e){var n=ee(t,e);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ie(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),re(t,n||e.type,t,e),ce(e)||e.codemirrorIgnore}function oe(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)-1==z(n,e[r])&&n.push(e[r])}function se(t,e){return ee(t,e).length>0}function ae(t){t.prototype.on=function(t,e){te(this,t,e)},t.prototype.off=function(t,e){ne(this,t,e)}}function ue(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function le(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function ce(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function he(t){ue(t),le(t)}function fe(t){return t.target||t.srcElement}function de(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),y&&t.ctrlKey&&1==e&&(e=3),e}var pe,ge,ve=function(){if(s&&a<9)return!1;var t=M("div");return"draggable"in t||"dragDrop"in t}();function me(t){if(null==pe){var e=M("span","\u200b");O(t,M("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(pe=e.offsetWidth<=1&&e.offsetHeight>2&&!(s&&a<8))}var n=pe?M("span","\u200b"):M("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function ye(t){if(null!=ge)return ge;var e=O(t,document.createTextNode("A\u062eA")),n=T(e,0,1).getBoundingClientRect(),r=T(e,1,2).getBoundingClientRect();return E(t),!(!n||n.left==n.right)&&(ge=r.right-n.right<3)}var be,we=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},xe=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},_e="oncopy"in(be=M("div"))||(be.setAttribute("oncopy","return;"),"function"==typeof be.oncopy),Se=null;var ke={},Te={};function Ce(t){if("string"==typeof t&&Te.hasOwnProperty(t))t=Te[t];else if(t&&"string"==typeof t.name&&Te.hasOwnProperty(t.name)){var e=Te[t.name];"string"==typeof e&&(e={name:e}),(t=J(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Ce("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Ce("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Ee(t,e){e=Ce(e);var n=ke[e.name];if(!n)return Ee(t,"text/plain");var r=n(t,e);if(Oe.hasOwnProperty(e.name)){var i=Oe[e.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)r[s]=e.modeProps[s];return r}var Oe={};function Me(t,e){j(e,Oe.hasOwnProperty(t)?Oe[t]:Oe[t]={})}function Ae(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Pe(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function De(t,e,n){return!t.startState||t.startState(e,n)}var Ne=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Ne.prototype.eol=function(){return this.pos>=this.string.length},Ne.prototype.sol=function(){return this.pos==this.lineStart},Ne.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ne.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ne.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Ne.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Ne.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Ne.prototype.skipToEnd=function(){this.pos=this.string.length},Ne.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Ne.prototype.backUp=function(t){this.pos-=t},Ne.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Ne.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Ne.prototype.match=function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},Ne.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ne.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Ne.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Ne.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var Le=function(t,e){this.state=t,this.lookAhead=e},Ie=function(t,e,n,r){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Re(t,e,n,r){var i=[t.state.modeGen],o={};qe(t,e.text,t.doc.mode,n,function(t,e){return i.push(t,e)},o,r);for(var s=n.state,a=function(r){n.baseTokens=i;var a=t.state.overlays[r],u=1,l=0;n.state=!0,qe(t,e.text,a.mode,n,function(t,e){for(var n=u;l<t;){var r=i[u];r>t&&i.splice(u,1,t,i[u+1],r),u+=2,l=Math.min(t,r)}if(e)if(a.opaque)i.splice(n,u-n,t,"overlay "+e),u=n+2;else for(;n<u;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+e}},o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},u=0;u<t.state.overlays.length;++u)a(u);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function je(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var r=Fe(t,ht(e)),i=e.text.length>t.options.maxHighlightLength&&Ae(t.doc.mode,r.state),o=Re(t,e,r);i&&(r.state=i),e.stateAfter=r.save(!i),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function Fe(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return new Ie(r,!0,e);var o=function(t,e,n){for(var r,i,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=o.first)return o.first;var u=at(o,a-1),l=u.stateAfter;if(l&&(!n||a+(l instanceof Le?l.lookAhead:0)<=o.modeFrontier))return a;var c=F(u.text,null,t.options.tabSize);(null==i||r>c)&&(i=a-1,r=c)}return i}(t,e,n),s=o>r.first&&at(r,o-1).stateAfter,a=s?Ie.fromSaved(r,s,o):new Ie(r,De(r.mode),o);return r.iter(o,e,function(n){Be(t,n.text,a);var r=a.line;n.stateAfter=r==e-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?a.save():null,a.nextLine()}),n&&(r.modeFrontier=a.line),a}function Be(t,e,n,r){var i=t.doc.mode,o=new Ne(e,t.options.tabSize,n);for(o.start=o.pos=r||0,""==e&&ze(i,n.state);!o.eol();)We(i,o,n.state),o.start=o.pos}function ze(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Pe(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function We(t,e,n,r){for(var i=0;i<10;i++){r&&(r[0]=Pe(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}Ie.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},Ie.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Ie.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ie.fromSaved=function(t,e,n){return e instanceof Le?new Ie(t,Ae(t.mode,e.state),n,e.lookAhead):new Ie(t,Ae(t.mode,e),n)},Ie.prototype.save=function(t){var e=!1!==t?Ae(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Le(e,this.maxLookAhead):e};var Ue=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function Ve(t,e,n,r){var i,o,s=t.doc,a=s.mode,u=at(s,(e=_t(s,e)).line),l=Fe(t,e.line,n),c=new Ne(u.text,t.options.tabSize,l);for(r&&(o=[]);(r||c.pos<e.ch)&&!c.eol();)c.start=c.pos,i=We(a,c,l.state),r&&o.push(new Ue(c,i,Ae(s.mode,l.state)));return r?o:new Ue(c,i,l.state)}function Ge(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[r])||(e[r]+=" "+n[2])}return t}function qe(t,e,n,r,i,o,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var u,l=0,c=null,h=new Ne(e,t.options.tabSize,r),f=t.options.addModeClass&&[null];for(""==e&&Ge(ze(n,r.state),o);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&Be(t,e,r,h.pos),h.pos=e.length,u=null):u=Ge(We(n,h,r.state,f),o),f){var d=f[0].name;d&&(u="m-"+(u?d+" "+u:d))}if(!a||c!=u){for(;l<h.start;)i(l=Math.min(h.start,l+5e3),c);c=u}h.start=h.pos}for(;l<h.pos;){var p=Math.min(h.pos,l+5e3);i(p,c),l=p}}var He=function(t,e,n){this.text=t,Dt(this,e),this.height=n?n(this):1};function $e(t){t.parent=null,Pt(t)}He.prototype.lineNo=function(){return ht(this)},ae(He);var Ye={},Xe={};function Ke(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Xe:Ye;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Qe(t,e){var n=A("span",null,null,u?"padding-right: .1px":null),r={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:(s||u)&&t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var o=i?e.rest[i-1]:e.line,a=void 0;r.pos=0,r.addToken=Ze,ye(t.display.measure)&&(a=Jt(o,t.doc.direction))&&(r.addToken=tn(r.addToken,a)),r.map=[],nn(o,r,je(t,o,e!=t.display.externalMeasured&&ht(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=L(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=L(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(me(t.display.measure))),0==i?(e.measure.map=r.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(r.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(u){var l=r.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return re(t,"renderLine",t,e.line,r.pre),r.pre.className&&(r.textClass=L(r.pre.className,r.textClass||"")),r}function Je(t){var e=M("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Ze(t,e,n,r,i,o,u){if(e){var l,c=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,r="",i=0;i<t.length;i++){var o=t.charAt(i);" "!=o||!n||i!=t.length-1&&32!=t.charCodeAt(i+1)||(o="\xa0"),r+=o,n=" "==o}return r}(e,t.trailingSpace):e,h=t.cm.state.specialChars,f=!1;if(h.test(e)){l=document.createDocumentFragment();for(var d=0;;){h.lastIndex=d;var p=h.exec(e),g=p?p.index-d:e.length-d;if(g){var v=document.createTextNode(c.slice(d,d+g));s&&a<9?l.appendChild(M("span",[v])):l.appendChild(v),t.map.push(t.pos,t.pos+g,v),t.col+=g,t.pos+=g}if(!p)break;d+=g+1;var m=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,b=y-t.col%y;(m=l.appendChild(M("span",Y(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?((m=l.appendChild(M("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((m=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),s&&a<9?l.appendChild(M("span",[m])):l.appendChild(m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,l=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,l),s&&a<9&&(f=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||r||i||f||u){var w=n||"";r&&(w+=r),i&&(w+=i);var x=M("span",[l],w,u);return o&&(x.title=o),t.content.appendChild(x)}t.content.appendChild(l)}}function tn(t,e){return function(n,r,i,o,s,a,u){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+r.length;;){for(var h=void 0,f=0;f<e.length&&!((h=e[f]).to>l&&h.from<=l);f++);if(h.to>=c)return t(n,r,i,o,s,a,u);t(n,r.slice(0,h.to-l),i,o,null,a,u),o=null,r=r.slice(h.to-l),l=h.to}}}function en(t,e,n,r){var i=!r&&n.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!r&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function nn(t,e,n){var r=t.markedSpans,i=t.text,o=0;if(r)for(var s,a,u,l,c,h,f,d=i.length,p=0,g=1,v="",m=0;;){if(m==p){u=l=c=h=a="",f=null,m=1/0;for(var y=[],b=void 0,w=0;w<r.length;++w){var x=r[w],_=x.marker;"bookmark"==_.type&&x.from==p&&_.widgetNode?y.push(_):x.from<=p&&(null==x.to||x.to>p||_.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&m>x.to&&(m=x.to,l=""),_.className&&(u+=" "+_.className),_.css&&(a=(a?a+";":"")+_.css),_.startStyle&&x.from==p&&(c+=" "+_.startStyle),_.endStyle&&x.to==m&&(b||(b=[])).push(_.endStyle,x.to),_.title&&!h&&(h=_.title),_.collapsed&&(!f||It(f.marker,_)<0)&&(f=x)):x.from>p&&m>x.from&&(m=x.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==m&&(l+=" "+b[S]);if(!f||f.from==p)for(var k=0;k<y.length;++k)en(e,0,y[k]);if(f&&(f.from||0)==p){if(en(e,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=d)break;for(var T=Math.min(d,m);;){if(v){var C=p+v.length;if(!f){var E=C>T?v.slice(0,T-p):v;e.addToken(e,E,s?s+u:u,c,p+E.length==m?l:"",h,a)}if(C>=T){v=v.slice(T-p),p=T;break}p=C,c=""}v=i.slice(o,o=n[g++]),s=Ke(n[g++],e.cm.options)}}else for(var O=1;O<n.length;O+=2)e.addToken(e,i.slice(o,o=n[O]),Ke(n[O+1],e.cm.options))}function rn(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Ft(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?ht(X(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Gt(t,e)}function on(t,e,n){for(var r,i=[],o=e;o<n;o=r){var s=new rn(t.doc,at(t.doc,o),o);r=o+s.size,i.push(s)}return i}var sn=null;var an=null;function un(t,e){var n=ee(t,e);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);sn?r=sn.delayedCallbacks:an?r=an:(r=an=[],setTimeout(ln,0));for(var o=function(t){r.push(function(){return n[t].apply(null,i)})},s=0;s<n.length;++s)o(s)}}function ln(){var t=an;an=null;for(var e=0;e<t.length;++e)t[e]()}function cn(t,e,n,r){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];"text"==o?dn(t,e):"gutter"==o?gn(t,e,n,r):"class"==o?pn(t,e):"widget"==o&&vn(t,e,r)}e.changes=null}function hn(t){return t.node==t.text&&(t.node=M("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),s&&a<8&&(t.node.style.zIndex=2)),t.node}function fn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Qe(t,e)}function dn(t,e){var n=e.text.className,r=fn(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,pn(t,e)):n&&(e.text.className=n)}function pn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=hn(e);e.background=r.insertBefore(M("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?hn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function gn(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=hn(e);e.gutterBackground=M("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var s=hn(e),a=e.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(t.display.input.setUneditable(a),s.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(M("div",pt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var u=0;u<t.options.gutters.length;++u){var l=t.options.gutters[u],c=o.hasOwnProperty(l)&&o[l];c&&a.appendChild(M("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function vn(t,e,n){e.alignable&&(e.alignable=null);for(var r=e.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&e.node.removeChild(r);yn(t,e,n)}function mn(t,e,n,r){var i=fn(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),pn(t,e),gn(t,e,n,r),yn(t,e,r),e.node}function yn(t,e,n){if(bn(t,e.line,e,n,!0),e.rest)for(var r=0;r<e.rest.length;r++)bn(t,e.rest[r],e,n,!1)}function bn(t,e,n,r,i){if(e.widgets)for(var o=hn(n),s=0,a=e.widgets;s<a.length;++s){var u=a[s],l=M("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),wn(u,l,n,r),t.display.input.setUneditable(l),i&&u.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),un(u,"redraw")}}function wn(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function xn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!P(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),O(e.display.measure,M("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function _n(t,e){for(var n=fe(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function Sn(t){return t.lineSpace.offsetTop}function kn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Tn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=O(t.measure,M("pre","x")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function Cn(t){return W-t.display.nativeBarWidth}function En(t){return t.display.scroller.clientWidth-Cn(t)-t.display.barWidth}function On(t){return t.display.scroller.clientHeight-Cn(t)-t.display.barHeight}function Mn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var i=0;i<t.rest.length;i++)if(ht(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function An(t,e,n,r){return Nn(t,Dn(t,e),n,r)}function Pn(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ur(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Dn(t,e){var n=ht(e),r=Pn(t,n);r&&!r.text?r=null:r&&r.changes&&(cn(t,r,n,rr(t)),t.curOp.forceUpdate=!0),r||(r=function(t,e){var n=ht(e=Wt(e)),r=t.display.externalMeasured=new rn(t.doc,e,n);r.lineN=n;var i=r.built=Qe(t,r);return r.text=i.pre,O(t.display.lineMeasure,i.pre),r}(t,e));var i=Mn(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Nn(t,e,n,r,i){e.before&&(n=-1);var o,u=n+(r||"");return e.cache.hasOwnProperty(u)?o=e.cache[u]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(!function(t,e,n){var r=t.options.lineWrapping,i=r&&En(t);if(!e.measure.heights||r&&e.measure.width!=i){var o=e.measure.heights=[];if(r){e.measure.width=i;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var u=s[a],l=s[a+1];Math.abs(u.bottom-l.bottom)>2&&o.push((u.bottom+l.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,r){var i,o=Rn(e.map,n,r),u=o.node,l=o.start,c=o.end,h=o.collapse;if(3==u.nodeType){for(var f=0;f<4;f++){for(;l&&it(e.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+c<o.coverEnd&&it(e.line.text.charAt(o.coverStart+c));)++c;if((i=s&&a<9&&0==l&&c==o.coverEnd-o.coverStart?u.parentNode.getBoundingClientRect():jn(T(u,l,c).getClientRects(),r)).left||i.right||0==l)break;c=l,l-=1,h="right"}s&&a<11&&(i=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Se)return Se;var e=O(t,M("span","x")),n=e.getBoundingClientRect(),r=T(e,0,1).getBoundingClientRect();return Se=Math.abs(n.left-r.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*r,bottom:e.bottom*r}}(t.display.measure,i))}else{var d;l>0&&(h=r="right"),i=t.options.lineWrapping&&(d=u.getClientRects()).length>1?d["right"==r?d.length-1:0]:u.getBoundingClientRect()}if(s&&a<9&&!l&&(!i||!i.left&&!i.right)){var p=u.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+nr(t.display),top:p.top,bottom:p.bottom}:In}for(var g=i.top-e.rect.top,v=i.bottom-e.rect.top,m=(g+v)/2,y=e.view.measure.heights,b=0;b<y.length-1&&!(m<y[b]);b++);var w=b?y[b-1]:0,x=y[b],_={left:("right"==h?i.right:i.left)-e.rect.left,right:("left"==h?i.left:i.right)-e.rect.left,top:w,bottom:x};i.left||i.right||(_.bogus=!0);t.options.singleCursorHeightPerLine||(_.rtop=g,_.rbottom=v);return _}(t,e,n,r)).bogus||(e.cache[u]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Ln,In={left:0,right:0,top:0,bottom:0};function Rn(t,e,n){for(var r,i,o,s,a,u,l=0;l<t.length;l+=3)if(a=t[l],u=t[l+1],e<a?(i=0,o=1,s="left"):e<u?o=(i=e-a)+1:(l==t.length-3||e==u&&t[l+3]>e)&&(i=(o=u-a)-1,e>=u&&(s="right")),null!=i){if(r=t[l+2],a==u&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==i)for(;l&&t[l-2]==t[l-3]&&t[l-1].insertLeft;)r=t[2+(l-=3)],s="left";if("right"==n&&i==u-a)for(;l<t.length-3&&t[l+3]==t[l+4]&&!t[l+5].insertLeft;)r=t[(l+=3)+2],s="right";break}return{node:r,start:i,end:o,collapse:s,coverStart:a,coverEnd:u}}function jn(t,e){var n=In;if("left"==e)for(var r=0;r<t.length&&(n=t[r]).left==n.right;r++);else for(var i=t.length-1;i>=0&&(n=t[i]).left==n.right;i--);return n}function Fn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Bn(t){t.display.externalMeasure=null,E(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Fn(t.display.view[e])}function zn(t){Bn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Wn(){return c&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Un(){return c&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Vn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=xn(t.widgets[n]));return e}function Gn(t,e,n,r,i){if(!i){var o=Vn(e);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var s=Ht(e);if("local"==r?s+=Sn(t.display):s-=t.display.viewOffset,"page"==r||"window"==r){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==r?0:Un());var u=a.left+("window"==r?0:Wn());n.left+=u,n.right+=u}return n.top+=s,n.bottom+=s,n}function qn(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=Wn(),i-=Un();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function Hn(t,e,n,r,i){return r||(r=at(t.doc,e.line)),Gn(t,r,An(t,r,e.ch,i),n)}function $n(t,e,n,r,i,o){function s(e,s){var a=Nn(t,i,e,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Gn(t,r,a,n)}r=r||at(t.doc,e.line),i||(i=Dn(t,r));var a=Jt(r,t.doc.direction),u=e.ch,l=e.sticky;if(u>=r.text.length?(u=r.text.length,l="before"):u<=0&&(u=0,l="after"),!a)return s("before"==l?u-1:u,"before"==l);function c(t,e,n){var r=1==a[e].level;return s(n?t-1:t,r!=n)}var h=Kt(a,u,l),f=Xt,d=c(u,h,"before"==l);return null!=f&&(d.other=c(u,f,"before"!=l)),d}function Yn(t,e){var n=0;e=_t(t.doc,e),t.options.lineWrapping||(n=nr(t.display)*e.ch);var r=at(t.doc,e.line),i=Ht(r)+Sn(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(t,e,n,r,i){var o=gt(t,e,n);return o.xRel=i,r&&(o.outside=!0),o}function Kn(t,e,n){var r=t.doc;if((n+=t.display.viewOffset)<0)return Xn(r.first,0,null,!0,-1);var i=ft(r,n),o=r.first+r.size-1;if(i>o)return Xn(r.first+r.size-1,at(r,o).text.length,null,!0,1);e<0&&(e=0);for(var s=at(r,i);;){var a=tr(t,s,i,e,n),u=Bt(s,a.ch+(a.xRel>0?1:0));if(!u)return a;var l=u.find(1);if(l.line==i)return l;s=at(r,i=l.line)}}function Qn(t,e,n,r){r-=Vn(e);var i=e.text.length,o=st(function(e){return Nn(t,n,e-1).bottom<=r},i,0);return{begin:o,end:i=st(function(e){return Nn(t,n,e).top>r},o,i)}}function Jn(t,e,n,r){return n||(n=Dn(t,e)),Qn(t,e,n,Gn(t,e,Nn(t,n,r),"line").top)}function Zn(t,e,n,r){return!(t.bottom<=n)&&(t.top>n||(r?t.left:t.right)>e)}function tr(t,e,n,r,i){i-=Ht(e);var o=Dn(t,e),s=Vn(e),a=0,u=e.text.length,l=!0,c=Jt(e,t.doc.direction);if(c){var h=(t.options.lineWrapping?function(t,e,n,r,i,o,s){var a=Qn(t,e,r,s),u=a.begin,l=a.end;/\s/.test(e.text.charAt(l-1))&&l--;for(var c=null,h=null,f=0;f<i.length;f++){var d=i[f];if(!(d.from>=l||d.to<=u)){var p=1!=d.level,g=Nn(t,r,p?Math.min(l,d.to)-1:Math.max(u,d.from)).right,v=g<o?o-g+1e9:g-o;(!c||h>v)&&(c=d,h=v)}}c||(c=i[i.length-1]);c.from<u&&(c={from:u,to:c.to,level:c.level});c.to>l&&(c={from:c.from,to:l,level:c.level});return c}:function(t,e,n,r,i,o,s){var a=st(function(a){var u=i[a],l=1!=u.level;return Zn($n(t,gt(n,l?u.to:u.from,l?"before":"after"),"line",e,r),o,s,!0)},0,i.length-1),u=i[a];if(a>0){var l=1!=u.level,c=$n(t,gt(n,l?u.from:u.to,l?"after":"before"),"line",e,r);Zn(c,o,s,!0)&&c.top>s&&(u=i[a-1])}return u})(t,e,n,o,c,r,i);a=(l=1!=h.level)?h.from:h.to-1,u=l?h.to:h.from-1}var f,d,p=null,g=null,v=st(function(e){var n=Nn(t,o,e);return n.top+=s,n.bottom+=s,!!Zn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=e,g=n),!0)},a,u),m=!1;if(g){var y=r-g.left<g.right-r,b=y==l;v=p+(b?0:1),d=b?"after":"before",f=y?g.left:g.right}else{l||v!=u&&v!=a||v++,d=0==v?"after":v==e.text.length?"before":Nn(t,o,v-(l?1:0)).bottom+s<=i==l?"after":"before";var w=$n(t,gt(n,v,d),"line",e,o);f=w.left,m=i<w.top||i>=w.bottom}return Xn(n,v=ot(e.text,v,1),d,m,r-f)}function er(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Ln){Ln=M("pre");for(var e=0;e<49;++e)Ln.appendChild(document.createTextNode("x")),Ln.appendChild(M("br"));Ln.appendChild(document.createTextNode("x"))}O(t.measure,Ln);var n=Ln.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),E(t.measure),n||1}function nr(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=M("span","xxxxxxxxxx"),n=M("pre",[e]);O(t.measure,n);var r=e.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function rr(t){for(var e=t.display,n={},r={},i=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s)n[t.options.gutters[s]]=o.offsetLeft+o.clientLeft+i,r[t.options.gutters[s]]=o.clientWidth;return{fixedPos:ir(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function ir(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function or(t){var e=er(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/nr(t.display)-3);return function(i){if(Gt(t.doc,i))return 0;var o=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(o+=i.widgets[s].height);return n?o+(Math.ceil(i.text.length/r)||1)*e:o+e}}function sr(t){var e=t.doc,n=or(t);e.iter(function(t){var e=n(t);e!=t.height&&ct(t,e)})}function ar(t,e,n,r){var i=t.display;if(!n&&"true"==fe(e).getAttribute("cm-not-content"))return null;var o,s,a=i.lineSpace.getBoundingClientRect();try{o=e.clientX-a.left,s=e.clientY-a.top}catch(e){return null}var u,l=Kn(t,o,s);if(r&&1==l.xRel&&(u=at(t.doc,l.line).text).length==l.ch){var c=F(u,u.length,t.options.tabSize)-u.length;l=gt(l.line,Math.max(0,Math.round((o-Tn(t.display).left)/nr(t.display))-c))}return l}function ur(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if((e-=n[r].size)<0)return r}function lr(t){t.display.input.showSelection(t.display.input.prepareSelection())}function cr(t,e){void 0===e&&(e=!0);for(var n=t.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var u=a.empty();(u||t.options.showCursorWhenSelecting)&&hr(t,a.head,i),u||dr(t,a,o)}}return r}function hr(t,e,n){var r=$n(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=n.appendChild(M("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",r.other){var o=n.appendChild(M("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function fr(t,e){return t.top-e.top||t.left-e.left}function dr(t,e,n){var r=t.display,i=t.doc,o=document.createDocumentFragment(),s=Tn(t.display),a=s.left,u=Math.max(r.sizerWidth,En(t)-r.sizer.offsetLeft)-s.right,l="ltr"==i.direction;function c(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),o.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?u-t:n)+"px;\n                             height: "+(r-e)+"px"))}function h(e,n,r){var o,s,h=at(i,e),f=h.text.length;function d(n,r){return Hn(t,gt(e,n),"div",h,r)}function p(e,n,r){var i=Jn(t,h,null,e),o="ltr"==n==("after"==r)?"left":"right";return d("after"==r?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1),o)[o]}var g=Jt(h,i.direction);return function(t,e,n,r){if(!t)return r(e,n,"ltr",0);for(var i=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(r(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),i=!0)}i||r(e,n,"ltr")}(g,n||0,null==r?f:r,function(t,e,i,h){var v="ltr"==i,m=d(t,v?"left":"right"),y=d(e-1,v?"right":"left"),b=null==n&&0==t,w=null==r&&e==f,x=0==h,_=!g||h==g.length-1;if(y.top-m.top<=3){var S=(l?w:b)&&_,k=(l?b:w)&&x?a:(v?m:y).left,T=S?u:(v?y:m).right;c(k,m.top,T-k,m.bottom)}else{var C,E,O,M;v?(C=l&&b&&x?a:m.left,E=l?u:p(t,i,"before"),O=l?a:p(e,i,"after"),M=l&&w&&_?u:y.right):(C=l?p(t,i,"before"):a,E=!l&&b&&x?u:m.right,O=!l&&w&&_?a:y.left,M=l?p(e,i,"after"):u),c(C,m.top,E-C,m.bottom),m.bottom<y.top&&c(a,m.bottom,null,y.top),c(O,y.top,M-O,y.bottom)}(!o||fr(m,o)<0)&&(o=m),fr(y,o)<0&&(o=y),(!s||fr(m,s)<0)&&(s=m),fr(y,s)<0&&(s=y)}),{start:o,end:s}}var f=e.from(),d=e.to();if(f.line==d.line)h(f.line,f.ch,d.ch);else{var p=at(i,f.line),g=at(i,d.line),v=Wt(p)==Wt(g),m=h(f.line,f.ch,v?p.text.length+1:null).end,y=h(d.line,v?0:null,d.ch).start;v&&(m.top<y.top-2?(c(m.right,m.top,null,m.bottom),c(a,y.top,y.left,y.bottom)):c(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&c(a,m.bottom,null,y.top)}n.appendChild(o)}function pr(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function gr(t){t.state.focused||(t.display.input.focus(),mr(t))}function vr(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,yr(t))},100)}function mr(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(re(t,"focus",t,e),t.state.focused=!0,N(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),u&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),pr(t))}function yr(t,e){t.state.delayingBlurEvent||(t.state.focused&&(re(t,"blur",t,e),t.state.focused=!1,C(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function br(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=0;r<e.view.length;r++){var i=e.view[r],o=void 0;if(!i.hidden){if(s&&a<8){var u=i.node.offsetTop+i.node.offsetHeight;o=u-n,n=u}else{var l=i.node.getBoundingClientRect();o=l.bottom-l.top}var c=i.line.height-o;if(o<2&&(o=er(e)),(c>.005||c<-.005)&&(ct(i.line,o),wr(i.line),i.rest))for(var h=0;h<i.rest.length;h++)wr(i.rest[h])}}}function wr(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function xr(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-Sn(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,o=ft(e,r),s=ft(e,i);if(n&&n.ensure){var a=n.ensure.from.line,u=n.ensure.to.line;a<o?(o=a,s=ft(e,Ht(at(e,a))+t.wrapper.clientHeight)):Math.min(u,e.lastLine())>=s&&(o=ft(e,Ht(at(e,u))-t.wrapper.clientHeight),s=u)}return{from:o,to:Math.max(s,o+1)}}function _r(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=ir(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var u=0;u<a.length;u++)a[u].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function Sr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=pt(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(M("div",[M("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,s=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ui(t),!0}return!1}function kr(t,e){var n=t.display,r=er(t.display);e.top<0&&(e.top=0);var i=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=On(t),s={};e.bottom-e.top>o&&(e.bottom=e.top+o);var a=t.doc.height+kn(n),u=e.top<r,l=e.bottom>a-r;if(e.top<i)s.scrollTop=u?0:e.top;else if(e.bottom>i+o){var c=Math.min(e.top,(l?a:e.bottom)-o);c!=i&&(s.scrollTop=c)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,f=En(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),d=e.right-e.left>f;return d&&(e.right=e.left+f),e.left<10?s.scrollLeft=0:e.left<h?s.scrollLeft=Math.max(0,e.left-(d?0:10)):e.right>f+h-3&&(s.scrollLeft=e.right+(d?0:10)-f),s}function Tr(t,e){null!=e&&(Or(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Cr(t){Or(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Er(t,e,n){null==e&&null==n||Or(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Or(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Mr(t,Yn(t,e.from),Yn(t,e.to),e.margin))}function Mr(t,e,n,r){var i=kr(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-r,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+r});Er(t,i.scrollLeft,i.scrollTop)}function Ar(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||ai(t,{top:e}),Pr(t,e,!0),n&&ai(t),ni(t,100))}function Pr(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Dr(t,e,n,r){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!r||(t.doc.scrollLeft=e,_r(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Nr(t){var e=t.display,n=e.gutters.offsetWidth,r=Math.round(t.doc.height+kn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Cn(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Lr=function(t,e,n){this.cm=n;var r=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,t(r),t(i),te(r,"scroll",function(){r.clientHeight&&e(r.scrollTop,"vertical")}),te(i,"scroll",function(){i.clientWidth&&e(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Lr.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?r+"px":"0";var i=t.viewHeight-(e?r:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:e?r:0}},Lr.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Lr.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Lr.prototype.zeroWidthHack=function(){var t=y&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},Lr.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,function r(){var i=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,r)})},Lr.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Ir=function(){};function Rr(t,e){e||(e=Nr(t));var n=t.display.barWidth,r=t.display.barHeight;jr(t,e);for(var i=0;i<4&&n!=t.display.barWidth||r!=t.display.barHeight;i++)n!=t.display.barWidth&&t.options.lineWrapping&&br(t),jr(t,Nr(t)),n=t.display.barWidth,r=t.display.barHeight}function jr(t,e){var n=t.display,r=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}Ir.prototype.update=function(){return{bottom:0,right:0}},Ir.prototype.setScrollLeft=function(){},Ir.prototype.setScrollTop=function(){},Ir.prototype.clear=function(){};var Fr={native:Lr,null:Ir};function Br(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&C(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Fr[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),te(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?Dr(t,e):Ar(t,e)},t),t.display.scrollbars.addClass&&N(t.display.wrapper,t.display.scrollbars.addClass)}var zr=0;function Wr(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++zr},e=t.curOp,sn?sn.ops.push(e):e.ownsGroup=sn={ops:[e],delayedCallbacks:[]}}function Ur(t){!function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var r=0;r<t.ops.length;r++){var i=t.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<e.length)}(n)}finally{sn=null,e(n)}}(t.curOp,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Vr(e[n]);for(var r=0;r<e.length;r++)(i=e[r]).updatedDisplay=i.mustUpdate&&oi(i.cm,i.update);var i;for(var o=0;o<e.length;o++)Gr(e[o]);for(var s=0;s<e.length;s++)qr(e[s]);for(var a=0;a<e.length;a++)Hr(e[a])}(t)})}function Vr(t){var e=t.cm,n=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Cn(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Cn(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&Yt(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new ii(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Gr(t){var e=t.cm,n=e.display;t.updatedDisplay&&br(e),t.barMeasure=Nr(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=An(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Cn(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-En(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function qr(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Dr(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==D();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Rr(e,t.barMeasure),t.updatedDisplay&&li(e,t.barMeasure),t.selectionChanged&&pr(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&gr(t.cm)}function Hr(t){var e=t.cm,n=e.display,r=e.doc;(t.updatedDisplay&&si(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Pr(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Dr(e,t.scrollLeft,!0,!0),t.scrollToPos)&&function(t,e){if(!ie(t,"scrollCursorIntoView")){var n=t.display,r=n.sizer.getBoundingClientRect(),i=null;if(e.top+r.top<0?i=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=M("div","\u200b",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-Sn(t.display))+"px;\n                         height: "+(e.bottom-e.top+Cn(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(i),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,r){var i;null==r&&(r=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?gt(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?gt(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var s=!1,a=$n(t,e),u=n&&n!=e?$n(t,n):a,l=kr(t,i={left:Math.min(a.left,u.left),top:Math.min(a.top,u.top)-r,right:Math.max(a.left,u.left),bottom:Math.max(a.bottom,u.bottom)+r}),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=l.scrollTop&&(Ar(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(s=!0)),null!=l.scrollLeft&&(Dr(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return i}(e,_t(r,t.scrollToPos.from),_t(r,t.scrollToPos.to),t.scrollToPos.margin));var i=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(i)for(var s=0;s<i.length;++s)i[s].lines.length||re(i[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&re(o[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&re(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function $r(t,e){if(t.curOp)return e();Wr(t);try{return e()}finally{Ur(t)}}function Yr(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Wr(t);try{return e.apply(t,arguments)}finally{Ur(t)}}}function Xr(t){return function(){if(this.curOp)return t.apply(this,arguments);Wr(this);try{return t.apply(this,arguments)}finally{Ur(this)}}}function Kr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Wr(e);try{return t.apply(this,arguments)}finally{Ur(e)}}}function Qr(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)Tt&&Ut(t.doc,e)<i.viewTo&&Zr(t);else if(n<=i.viewFrom)Tt&&Vt(t.doc,n+r)>i.viewFrom?Zr(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)Zr(t);else if(e<=i.viewFrom){var o=ti(t,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Zr(t)}else if(n>=i.viewTo){var s=ti(t,e,e,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):Zr(t)}else{var a=ti(t,e,e,-1),u=ti(t,n,n+r,1);a&&u?(i.view=i.view.slice(0,a.index).concat(on(t,a.lineN,u.lineN)).concat(i.view.slice(u.index)),i.viewTo+=r):Zr(t)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:e<l.lineN+l.size&&(i.externalMeasured=null))}function Jr(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var o=r.view[ur(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==z(s,n)&&s.push(n)}}}function Zr(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ti(t,e,n,r){var i,o=ur(t,e),s=t.display.view;if(!Tt||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var a=t.display.viewFrom,u=0;u<o;u++)a+=s[u].size;if(a!=e){if(r>0){if(o==s.length-1)return null;i=a+s[o].size-e,o++}else i=a-e;e+=i,n+=i}for(;Ut(t.doc,n)!=n;){if(o==(r<0?0:s.length-1))return null;n+=r*s[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ei(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function ni(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,R(ri,t))}function ri(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=Fe(t,e.highlightFrontier),i=[];e.iter(r.line,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(r.line>=t.display.viewFrom){var s=o.styles,a=o.text.length>t.options.maxHighlightLength?Ae(e.mode,r.state):null,u=Re(t,o,r,!0);a&&(r.state=a),o.styles=u.styles;var l=o.styleClasses,c=u.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),f=0;!h&&f<s.length;++f)h=s[f]!=o.styles[f];h&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=t.options.maxHighlightLength&&Be(t,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ni(t,t.options.workDelay),!0}),e.highlightFrontier=r.line,e.modeFrontier=Math.max(e.modeFrontier,r.line),i.length&&$r(t,function(){for(var e=0;e<i.length;e++)Jr(t,i[e],"text")})}}var ii=function(t,e,n){var r=t.display;this.viewport=e,this.visible=xr(r,t.doc,e),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=En(t),this.force=n,this.dims=rr(t),this.events=[]};function oi(t,e){var n=t.display,r=t.doc;if(e.editorIsHidden)return Zr(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ei(t))return!1;Sr(t)&&(Zr(t),e.dims=rr(t));var i=r.first+r.size,o=Math.max(e.visible.from-t.options.viewportMargin,r.first),s=Math.min(i,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),Tt&&(o=Ut(t.doc,o),s=Vt(t.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;!function(t,e,n){var r=t.display;0==r.view.length||e>=r.viewTo||n<=r.viewFrom?(r.view=on(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=on(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(ur(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(on(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ur(t,n)))),r.viewTo=n}(t,o,s),n.viewOffset=Ht(at(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var l=ei(t);if(!a&&0==l&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(t){if(t.hasFocus())return null;var e=D();if(!e||!P(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&P(t.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(t);return l>4&&(n.lineDiv.style.display="none"),function(t,e,n){var r=t.display,i=t.options.lineNumbers,o=r.lineDiv,s=o.firstChild;function a(e){var n=e.nextSibling;return u&&y&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var l=r.view,c=r.viewFrom,h=0;h<l.length;h++){var f=l[h];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;s!=f.node;)s=a(s);var d=i&&null!=e&&e<=c&&f.lineNumber;f.changes&&(z(f.changes,"gutter")>-1&&(d=!1),cn(t,f,c,n)),d&&(E(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(pt(t.options,c)))),s=f.node.nextSibling}else{var p=mn(t,f,c,n);o.insertBefore(p,s)}c+=f.size}for(;s;)s=a(s)}(t,n.updateLineNumbers,e.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=D()&&(t.activeElt.focus(),t.anchorNode&&P(document.body,t.anchorNode)&&P(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(c),E(n.cursorDiv),E(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ni(t,400)),n.updateLineNumbers=null,!0}function si(t,e){for(var n=e.viewport,r=!0;(r&&t.options.lineWrapping&&e.oldDisplayWidth!=En(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+kn(t.display)-On(t),n.top)}),e.visible=xr(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&oi(t,e);r=!1){br(t);var i=Nr(t);lr(t),Rr(t,i),li(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ai(t,e){var n=new ii(t,e);if(oi(t,n)){br(t),si(t,n);var r=Nr(t);lr(t),Rr(t,r),li(t,r),n.finish()}}function ui(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function li(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Cn(t)+"px"}function ci(t){var e=t.display.gutters,n=t.options.gutters;E(e);for(var r=0;r<n.length;++r){var i=n[r],o=e.appendChild(M("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=r?"":"none",ui(t)}function hi(t){var e=z(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}ii.prototype.signal=function(t,e){se(t,e)&&this.events.push(arguments)},ii.prototype.finish=function(){for(var t=0;t<this.events.length;t++)re.apply(null,this.events[t])};var fi=0,di=null;function pi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function gi(t){var e=pi(t);return e.x*=di,e.y*=di,e}function vi(t,e){var r=pi(e),i=r.x,o=r.y,s=t.display,a=s.scroller,l=a.scrollWidth>a.clientWidth,c=a.scrollHeight>a.clientHeight;if(i&&l||o&&c){if(o&&y&&u)t:for(var f=e.target,d=s.view;f!=a;f=f.parentNode)for(var p=0;p<d.length;p++)if(d[p].node==f){t.display.currentWheelTarget=f;break t}if(i&&!n&&!h&&null!=di)return o&&c&&Ar(t,Math.max(0,a.scrollTop+o*di)),Dr(t,Math.max(0,a.scrollLeft+i*di)),(!o||o&&c)&&ue(e),void(s.wheelStartX=null);if(o&&null!=di){var g=o*di,v=t.doc.scrollTop,m=v+s.wrapper.clientHeight;g<0?v=Math.max(0,v+g-50):m=Math.min(t.doc.height,m+g+50),ai(t,{top:v,bottom:m})}fi<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout(function(){if(null!=s.wheelStartX){var t=a.scrollLeft-s.wheelStartX,e=a.scrollTop-s.wheelStartY,n=e&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(di=(di*fi+n)/(fi+1),++fi)}},200)):(s.wheelDX+=i,s.wheelDY+=o))}}s?di=-.53:n?di=15:c?di=-.7:f&&(di=-1/3);var mi=function(t,e){this.ranges=t,this.primIndex=e};mi.prototype.primary=function(){return this.ranges[this.primIndex]},mi.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],r=t.ranges[e];if(!mt(n.anchor,r.anchor)||!mt(n.head,r.head))return!1}return!0},mi.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new yi(yt(this.ranges[e].anchor),yt(this.ranges[e].head));return new mi(t,this.primIndex)},mi.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},mi.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(vt(e,r.from())>=0&&vt(t,r.to())<=0)return n}return-1};var yi=function(t,e){this.anchor=t,this.head=e};function bi(t,e){var n=t[e];t.sort(function(t,e){return vt(t.from(),e.from())}),e=z(t,n);for(var r=1;r<t.length;r++){var i=t[r],o=t[r-1];if(vt(o.to(),i.from())>=0){var s=wt(o.from(),i.from()),a=bt(o.to(),i.to()),u=o.empty()?i.from()==i.head:o.from()==o.head;r<=e&&--e,t.splice(--r,2,new yi(u?a:s,u?s:a))}}return new mi(t,e)}function wi(t,e){return new mi([new yi(t,e||t)],0)}function xi(t){return t.text?gt(t.from.line+t.text.length-1,X(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function _i(t,e){if(vt(t,e.from)<0)return t;if(vt(t,e.to)<=0)return xi(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=xi(e).ch-e.to.ch),gt(n,r)}function Si(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){var i=t.sel.ranges[r];n.push(new yi(_i(i.anchor,e),_i(i.head,e)))}return bi(n,t.sel.primIndex)}function ki(t,e,n){return t.line==e.line?gt(n.line,t.ch-e.ch+n.ch):gt(n.line+(t.line-e.line),t.ch)}function Ti(t){t.doc.mode=Ee(t.options,t.doc.modeOption),Ci(t)}function Ci(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ni(t,100),t.state.modeGen++,t.curOp&&Qr(t)}function Ei(t,e){return 0==e.from.ch&&0==e.to.ch&&""==X(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Oi(t,e,n,r){function i(t){return n?n[t]:null}function o(t,n,i){!function(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Pt(t),Dt(t,n);var i=r?r(t):1;i!=t.height&&ct(t,i)}(t,n,i,r),un(t,"change",t,e)}function s(t,e){for(var n=[],o=t;o<e;++o)n.push(new He(l[o],i(o),r));return n}var a=e.from,u=e.to,l=e.text,c=at(t,a.line),h=at(t,u.line),f=X(l),d=i(l.length-1),p=u.line-a.line;if(e.full)t.insert(0,s(0,l.length)),t.remove(l.length,t.size-l.length);else if(Ei(t,e)){var g=s(0,l.length-1);o(h,h.text,d),p&&t.remove(a.line,p),g.length&&t.insert(a.line,g)}else if(c==h)if(1==l.length)o(c,c.text.slice(0,a.ch)+f+c.text.slice(u.ch),d);else{var v=s(1,l.length-1);v.push(new He(f+c.text.slice(u.ch),d,r)),o(c,c.text.slice(0,a.ch)+l[0],i(0)),t.insert(a.line+1,v)}else if(1==l.length)o(c,c.text.slice(0,a.ch)+l[0]+h.text.slice(u.ch),i(0)),t.remove(a.line+1,p);else{o(c,c.text.slice(0,a.ch)+l[0],i(0)),o(h,f+h.text.slice(u.ch),d);var m=s(1,l.length-1);p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,m)}un(t,"change",t,e)}function Mi(t,e,n){!function t(r,i,o){if(r.linked)for(var s=0;s<r.linked.length;++s){var a=r.linked[s];if(a.doc!=i){var u=o&&a.sharedHist;n&&!u||(e(a.doc,u),t(a.doc,r,u))}}}(t,null,!0)}function Ai(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,sr(t),Ti(t),Pi(t),t.options.lineWrapping||Yt(t),t.options.mode=e.modeOption,Qr(t)}function Pi(t){("rtl"==t.doc.direction?N:C)(t.display.lineDiv,"CodeMirror-rtl")}function Di(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Ni(t,e){var n={from:yt(e.from),to:xi(e),text:ut(t,e.from,e.to)};return Fi(t,n,e.from.line,e.to.line+1),Mi(t,function(t){return Fi(t,n,e.from.line,e.to.line+1)},!0),n}function Li(t){for(;t.length;){if(!X(t).ranges)break;t.pop()}}function Ii(t,e,n,r){var i=t.history;i.undone.length=0;var o,s,a=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&i.lastModTime>a-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Li(t.done),X(t.done)):t.done.length&&!X(t.done).ranges?X(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),X(t.done)):void 0}(i,i.lastOp==r)))s=X(o.changes),0==vt(e.from,e.to)&&0==vt(e.from,s.to)?s.to=xi(e):o.changes.push(Ni(t,e));else{var u=X(i.done);for(u&&u.ranges||ji(t.sel,i.done),o={changes:[Ni(t,e)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,s||re(t,"historyAdded")}function Ri(t,e,n,r){var i=t.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,X(i.done),e))?i.done[i.done.length-1]=e:ji(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Li(i.undone)}function ji(t,e){var n=X(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Fi(t,e,n,r){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function Bi(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function zi(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=[],i=0;i<e.text.length;++i)r.push(Bi(n[i]));return r}(t,e),r=Mt(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)t:for(var a=0;a<s.length;++a){for(var u=s[a],l=0;l<o.length;++l)if(o[l].marker==u.marker)continue t;o.push(u)}else s&&(n[i]=s)}return n}function Wi(t,e,n){for(var r=[],i=0;i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?mi.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var u=0;u<s.length;++u){var l=s[u],c=void 0;if(a.push({from:l.from,to:l.to,text:l.text}),e)for(var h in l)(c=h.match(/^spans_(\d+)$/))&&z(e,Number(c[1]))>-1&&(X(a)[h]=l[h],delete l[h])}}}return r}function Ui(t,e,n,r){if(r){var i=t.anchor;if(n){var o=vt(e,i)<0;o!=vt(n,i)<0?(i=e,e=n):o!=vt(e,n)<0&&(e=n)}return new yi(i,e)}return new yi(n||e,e)}function Vi(t,e,n,r,i){null==i&&(i=t.cm&&(t.cm.display.shift||t.extend)),Yi(t,new mi([Ui(t.sel.primary(),e,n,i)],0),r)}function Gi(t,e,n){for(var r=[],i=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)r[o]=Ui(t.sel.ranges[o],e[o],null,i);Yi(t,bi(r,t.sel.primIndex),n)}function qi(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,Yi(t,bi(i,t.sel.primIndex),r)}function Hi(t,e,n,r){Yi(t,wi(e,n),r)}function $i(t,e,n){var r=t.history.done,i=X(r);i&&i.ranges?(r[r.length-1]=e,Xi(t,e,n)):Yi(t,e,n)}function Yi(t,e,n){Xi(t,e,n),Ri(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function Xi(t,e,n){(se(t,"beforeSelectionChange")||t.cm&&se(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var r={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new yi(_t(t,e[n].anchor),_t(t,e[n].head))},origin:n&&n.origin};return re(t,"beforeSelectionChange",t,r),t.cm&&re(t.cm,"beforeSelectionChange",t.cm,r),r.ranges!=e.ranges?bi(r.ranges,r.ranges.length-1):e}(t,e,n)),Ki(t,Ji(t,e,n&&n.bias||(vt(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!t.cm||Cr(t.cm)}function Ki(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,oe(t.cm)),un(t,"cursorActivity",t))}function Qi(t){Ki(t,Ji(t,t.sel,null,!1))}function Ji(t,e,n,r){for(var i,o=0;o<e.ranges.length;o++){var s=e.ranges[o],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],u=to(t,s.anchor,a&&a.anchor,n,r),l=to(t,s.head,a&&a.head,n,r);(i||u!=s.anchor||l!=s.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new yi(u,l))}return i?bi(i,e.primIndex):e}function Zi(t,e,n,r,i){var o=at(t,e.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],u=a.marker;if((null==a.from||(u.inclusiveLeft?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(u.inclusiveRight?a.to>=e.ch:a.to>e.ch))){if(i&&(re(u,"beforeCursorEnter"),u.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!u.atomic)continue;if(n){var l=u.find(r<0?1:-1),c=void 0;if((r<0?u.inclusiveRight:u.inclusiveLeft)&&(l=eo(t,l,-r,l&&l.line==e.line?o:null)),l&&l.line==e.line&&(c=vt(l,n))&&(r<0?c<0:c>0))return Zi(t,l,e,r,i)}var h=u.find(r<0?-1:1);return(r<0?u.inclusiveLeft:u.inclusiveRight)&&(h=eo(t,h,r,h.line==e.line?o:null)),h?Zi(t,h,e,r,i):null}}return e}function to(t,e,n,r,i){var o=r||1,s=Zi(t,e,n,o,i)||!i&&Zi(t,e,n,o,!0)||Zi(t,e,n,-o,i)||!i&&Zi(t,e,n,-o,!0);return s||(t.cantEdit=!0,gt(t.first,0))}function eo(t,e,n,r){return n<0&&0==e.ch?e.line>t.first?_t(t,gt(e.line-1)):null:n>0&&e.ch==(r||at(t,e.line)).text.length?e.line<t.first+t.size-1?gt(e.line+1,0):null:new gt(e.line,e.ch+n)}function no(t){t.setSelection(gt(t.firstLine(),0),gt(t.lastLine()),V)}function ro(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(e,n,i,o){e&&(r.from=_t(t,e)),n&&(r.to=_t(t,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),re(t,"beforeChange",t,r),t.cm&&re(t.cm,"beforeChange",t.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function io(t,e,n){if(t.cm){if(!t.cm.curOp)return Yr(t.cm,io)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(se(t,"beforeChange")||t.cm&&se(t.cm,"beforeChange"))||(e=ro(t,e,!0))){var r=kt&&!n&&function(t,e,n){var r=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&-1!=z(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:e,to:n}],o=0;o<r.length;++o)for(var s=r[o],a=s.find(0),u=0;u<i.length;++u){var l=i[u];if(!(vt(l.to,a.from)<0||vt(l.from,a.to)>0)){var c=[u,1],h=vt(l.from,a.from),f=vt(l.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&c.push({from:l.from,to:a.from}),(f>0||!s.inclusiveRight&&!f)&&c.push({from:a.to,to:l.to}),i.splice.apply(i,c),u+=c.length-3}}return i}(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)oo(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text,origin:e.origin});else oo(t,e)}}function oo(t,e){if(1!=e.text.length||""!=e.text[0]||0!=vt(e.from,e.to)){var n=Si(t,e);Ii(t,e,n,t.cm?t.cm.curOp.id:NaN),uo(t,e,n,Mt(t,e));var r=[];Mi(t,function(t,n){n||-1!=z(r,t.history)||(fo(t.history,e),r.push(t.history)),uo(t,e,null,Mt(t,e))})}}function so(t,e,n){var r=t.cm&&t.cm.state.suppressEdits;if(!r||n){for(var i,o=t.history,s=t.sel,a="undo"==e?o.done:o.undone,u="undo"==e?o.undone:o.done,l=0;l<a.length&&(i=a[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(r)return void a.push(i);break}if(ji(i,u),n&&!i.equals(t.sel))return void Yi(t,i,{clearRedo:!1});s=i}var c=[];ji(s,u),u.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var h=se(t,"beforeChange")||t.cm&&se(t.cm,"beforeChange"),f=function(n){var r=i.changes[n];if(r.origin=e,h&&!ro(t,r,!1))return a.length=0,{};c.push(Ni(t,r));var o=n?Si(t,r):X(a);uo(t,r,o,zi(t,r)),!n&&t.cm&&t.cm.scrollIntoView({from:r.from,to:xi(r)});var s=[];Mi(t,function(t,e){e||-1!=z(s,t.history)||(fo(t.history,r),s.push(t.history)),uo(t,r,null,zi(t,r))})},d=i.changes.length-1;d>=0;--d){var p=f(d);if(p)return p.v}}}}function ao(t,e){if(0!=e&&(t.first+=e,t.sel=new mi(K(t.sel.ranges,function(t){return new yi(gt(t.anchor.line+e,t.anchor.ch),gt(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){Qr(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)Jr(t.cm,r,"gutter")}}function uo(t,e,n,r){if(t.cm&&!t.cm.curOp)return Yr(t.cm,uo)(t,e,n,r);if(e.to.line<t.first)ao(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);ao(t,i),e={from:gt(t.first,0),to:gt(e.to.line+i,e.to.ch),text:[X(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:gt(o,at(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=ut(t,e.from,e.to),n||(n=Si(t,e)),t.cm?function(t,e,n){var r=t.doc,i=t.display,o=e.from,s=e.to,a=!1,u=o.line;t.options.lineWrapping||(u=ht(Wt(at(r,o.line))),r.iter(u,s.line+1,function(t){if(t==i.maxLine)return a=!0,!0}));r.sel.contains(e.from,e.to)>-1&&oe(t);Oi(r,e,n,or(t)),t.options.lineWrapping||(r.iter(u,o.line+e.text.length,function(t){var e=$t(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0));(function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,r=e-1;r>n;r--){var i=at(t,r).stateAfter;if(i&&(!(i instanceof Le)||r+i.lookAhead<e)){n=r+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}})(r,o.line),ni(t,400);var l=e.text.length-(s.line-o.line)-1;e.full?Qr(t):o.line!=s.line||1!=e.text.length||Ei(t.doc,e)?Qr(t,o.line,s.line+1,l):Jr(t,o.line,"text");var c=se(t,"changes"),h=se(t,"change");if(h||c){var f={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin};h&&un(t,"change",t,f),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(f)}t.display.selForContextMenu=null}(t.cm,e,r):Oi(t,e,r),Xi(t,n,V)}}function lo(t,e,n,r,i){var o;(r||(r=n),vt(r,n)<0)&&(n=(o=[r,n])[0],r=o[1]);"string"==typeof e&&(e=t.splitLines(e)),io(t,{from:n,to:r,text:e,origin:i})}function co(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function ho(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i],s=!0;if(o.ranges){o.copied||((o=t[i]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)co(o.ranges[a].anchor,e,n,r),co(o.ranges[a].head,e,n,r)}else{for(var u=0;u<o.changes.length;++u){var l=o.changes[u];if(n<l.from.line)l.from=gt(l.from.line+r,l.from.ch),l.to=gt(l.to.line+r,l.to.ch);else if(e<=l.to.line){s=!1;break}}s||(t.splice(0,i+1),i=0)}}}function fo(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;ho(t.done,n,r,i),ho(t.undone,n,r,i)}function po(t,e,n,r){var i=e,o=e;return"number"==typeof e?o=at(t,xt(t,e)):i=ht(e),null==i?null:(r(o,i)&&t.cm&&Jr(t.cm,i,n),o)}function go(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function vo(t){this.children=t;for(var e=0,n=0,r=0;r<t.length;++r){var i=t[r];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}yi.prototype.from=function(){return wt(this.anchor,this.head)},yi.prototype.to=function(){return bt(this.anchor,this.head)},yi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},go.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,r=t+e;n<r;++n){var i=this.lines[n];this.height-=i.height,$e(i),un(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;t<r;++t)if(n(this.lines[t]))return!0}},vo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(t<i){var o=Math.min(e,i-t),s=r.height;if(r.removeInner(t,o),this.height-=s-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(e-=o))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof go))){var a=[];this.collapse(a),this.children=[new go(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<=o){if(i.insertInner(t,e,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,a=s;a<i.lines.length;){var u=new go(i.lines.slice(a,a+=25));i.height-=u.height,this.children.splice(++r,0,u),u.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new vo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=z(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var r=new vo(t.children);r.parent=t,t.children=[r,e],t=r}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<o){var s=Math.min(e,o-t);if(i.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=o}}};var mo=function(t,e,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=t,this.node=e};function yo(t,e,n){Ht(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Tr(t,n)}mo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,r=ht(n);if(null!=r&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(n.widgets=null);var o=xn(this);ct(n,Math.max(0,n.height-o)),t&&($r(t,function(){yo(t,n,-o),Jr(t,r,"widget")}),un(t,"lineWidgetCleared",t,this,r))}},mo.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=xn(this)-e;i&&(Gt(this.doc,r)||ct(r,r.height+i),n&&$r(n,function(){n.curOp.forceUpdate=!0,yo(n,r,i),un(n,"lineWidgetChanged",n,t,ht(r))}))},ae(mo);var bo=0,wo=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++bo};function xo(t,e,n,r,i){if(r&&r.shared)return function(t,e,n,r,i){(r=j(r)).shared=!1;var o=[xo(t,e,n,r,i)],s=o[0],a=r.widgetNode;return Mi(t,function(t){a&&(r.widgetNode=a.cloneNode(!0)),o.push(xo(t,_t(t,e),_t(t,n),r,i));for(var u=0;u<t.linked.length;++u)if(t.linked[u].isParent)return;s=X(o)}),new _o(o,s)}(t,e,n,r,i);if(t.cm&&!t.cm.curOp)return Yr(t.cm,xo)(t,e,n,r,i);var o=new wo(t,i),s=vt(e,n);if(r&&j(r,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(zt(t,e.line,e,n,o)||e.line!=n.line&&zt(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Tt=!0}o.addToHistory&&Ii(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var a,u=e.line,l=t.cm;if(t.iter(u,n.line+1,function(t){l&&o.collapsed&&!l.options.lineWrapping&&Wt(t)==l.display.maxLine&&(a=!0),o.collapsed&&u!=e.line&&ct(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new Ct(o,u==e.line?e.ch:null,u==n.line?n.ch:null)),++u}),o.collapsed&&t.iter(e.line,n.line+1,function(e){Gt(t,e)&&ct(e,0)}),o.clearOnEnter&&te(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(kt=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++bo,o.atomic=!0),l){if(a&&(l.curOp.updateMaxLine=!0),o.collapsed)Qr(l,e.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=e.line;c<=n.line;c++)Jr(l,c,"text");o.atomic&&Qi(l.doc),un(l,"markerAdded",l,o)}return o}wo.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Wr(t),se(this,"clear")){var n=this.find();n&&un(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Et(s.markedSpans,this);t&&!this.collapsed?Jr(t,ht(s),"text"):t&&(null!=a.to&&(i=ht(s)),null!=a.from&&(r=ht(s))),s.markedSpans=Ot(s.markedSpans,a),null==a.from&&this.collapsed&&!Gt(this.doc,s)&&t&&ct(s,er(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var l=Wt(this.lines[u]),c=$t(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&Qr(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Qi(t.doc)),t&&un(t,"markerCleared",t,this,r,i),e&&Ur(t),this.parent&&this.parent.clear()}},wo.prototype.find=function(t,e){var n,r;null==t&&"bookmark"==this.type&&(t=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],s=Et(o.markedSpans,this);if(null!=s.from&&(n=gt(e?o:ht(o),s.from),-1==t))return n;if(null!=s.to&&(r=gt(e?o:ht(o),s.to),1==t))return r}return n&&{from:n,to:r}},wo.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,r=this.doc.cm;e&&r&&$r(r,function(){var i=e.line,o=ht(e.line),s=Pn(r,o);if(s&&(Fn(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Gt(n.doc,i)&&null!=n.height){var a=n.height;n.height=null;var u=xn(n)-a;u&&ct(i,i.height+u)}un(r,"markerChanged",r,t)})},wo.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=z(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},wo.prototype.detachLine=function(t){if(this.lines.splice(z(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},ae(wo);var _o=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function So(t){return t.findMarks(gt(t.first,0),t.clipPos(gt(t.lastLine())),function(t){return t.parent})}function ko(t){for(var e=function(e){var n=t[e],r=[n.primary.doc];Mi(n.primary.doc,function(t){return r.push(t)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==z(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}_o.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();un(this,"clear")}},_o.prototype.find=function(t,e){return this.primary.find(t,e)},ae(_o);var To=0,Co=function(t,e,n,r,i){if(!(this instanceof Co))return new Co(t,e,n,r,i);null==n&&(n=0),vo.call(this,[new go([new He("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=gt(n,0);this.sel=wi(o),this.history=new Di(null),this.id=++To,this.modeOption=e,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Oi(this,{from:o,to:o,text:t}),Yi(this,wi(o),V)};Co.prototype=J(vo.prototype,{constructor:Co,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=lt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:Kr(function(t){var e=gt(this.first,0),n=this.first+this.size-1;io(this,{from:e,to:gt(n,at(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Er(this.cm,0,0),Yi(this,wi(e),V)}),replaceRange:function(t,e,n,r){lo(this,t,e=_t(this,e),n=n?_t(this,n):e,r)},getRange:function(t,e,n){var r=ut(this,_t(this,t),_t(this,e));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(dt(this,t))return at(this,t)},getLineNumber:function(t){return ht(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=at(this,t)),Wt(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return _t(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Kr(function(t,e,n){Hi(this,_t(this,"number"==typeof t?gt(t,e||0):t),null,n)}),setSelection:Kr(function(t,e,n){Hi(this,_t(this,t),_t(this,e||t),n)}),extendSelection:Kr(function(t,e,n){Vi(this,_t(this,t),e&&_t(this,e),n)}),extendSelections:Kr(function(t,e){Gi(this,St(this,t),e)}),extendSelectionsBy:Kr(function(t,e){Gi(this,St(this,K(this.sel.ranges,t)),e)}),setSelections:Kr(function(t,e,n){if(t.length){for(var r=[],i=0;i<t.length;i++)r[i]=new yi(_t(this,t[i].anchor),_t(this,t[i].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Yi(this,bi(r,e),n)}}),addSelection:Kr(function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new yi(_t(this,t),_t(this,e||t))),Yi(this,bi(r,r.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,r=0;r<n.length;r++){var i=ut(this,n[r].from(),n[r].to());e=e?e.concat(i):i}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ut(this,n[r].from(),n[r].to());!1!==t&&(i=i.join(t||this.lineSeparator())),e[r]=i}return e},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:Kr(function(t,e,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(t[o]),origin:n}}for(var a=e&&"end"!=e&&function(t,e,n){for(var r=[],i=gt(t.first,0),o=i,s=0;s<e.length;s++){var a=e[s],u=ki(a.from,i,o),l=ki(xi(a),i,o);if(i=a.to,o=l,"around"==n){var c=t.sel.ranges[s],h=vt(c.head,c.anchor)<0;r[s]=new yi(h?l:u,h?u:l)}else r[s]=new yi(u,u)}return new mi(r,t.sel.primIndex)}(this,r,e),u=r.length-1;u>=0;u--)io(this,r[u]);a?$i(this,a):this.cm&&Cr(this.cm)}),undo:Kr(function(){so(this,"undo")}),redo:Kr(function(){so(this,"redo")}),undoSelection:Kr(function(){so(this,"undo",!0)}),redoSelection:Kr(function(){so(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Di(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Wi(this.history.done),undone:Wi(this.history.undone)}},setHistory:function(t){var e=this.history=new Di(this.history.maxGeneration);e.done=Wi(t.done.slice(0),null,!0),e.undone=Wi(t.undone.slice(0),null,!0)},setGutterMarker:Kr(function(t,e,n){return po(this,t,"gutter",function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&nt(r)&&(t.gutterMarkers=null),!0})}),clearGutter:Kr(function(t){var e=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&po(e,n,"gutter",function(){return n.gutterMarkers[t]=null,nt(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!dt(this,t))return null;if(e=t,!(t=at(this,t)))return null}else if(null==(e=ht(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Kr(function(t,e,n){return po(this,t,"gutter"==e?"gutter":"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[r]){if(k(n).test(t[r]))return!1;t[r]+=" "+n}else t[r]=n;return!0})}),removeLineClass:Kr(function(t,e,n){return po(this,t,"gutter"==e?"gutter":"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",i=t[r];if(!i)return!1;if(null==n)t[r]=null;else{var o=i.match(k(n));if(!o)return!1;var s=o.index+o[0].length;t[r]=i.slice(0,o.index)+(o.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0})}),addLineWidget:Kr(function(t,e,n){return function(t,e,n,r){var i=new mo(t,n,r),o=t.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),po(t,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,o&&!Gt(t,e)){var r=Ht(e)<t.scrollTop;ct(e,e.height+xn(i)),r&&Tr(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&un(o,"lineWidgetAdded",o,i,"number"==typeof e?e:ht(e)),i}(this,t,e,n)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return xo(this,_t(this,t),_t(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return xo(this,t=_t(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=at(this,(t=_t(this,t)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=_t(this,t),e=_t(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var u=s[a];null!=u.to&&i==t.line&&t.ch>=u.to||null==u.from&&i!=t.line||null!=u.from&&i==e.line&&u.from>=e.ch||n&&!n(u.marker)||r.push(u.marker.parent||u.marker)}++i}),r},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)}),t},posFromIndex:function(t){var e,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>t)return e=t,!0;t-=o,++n}),_t(this,gt(n,e))},indexFromPos:function(t){var e=(t=_t(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new Co(lt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new Co(lt(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),o=t.clipPos(i.from),s=t.clipPos(i.to);if(vt(o,s)){var a=xo(t,o,s,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,So(this)),r},unlinkDoc:function(t){if(t instanceof Ss&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),ko(So(this));break}}if(t.history==this.history){var n=[t.id];Mi(t,function(t){return n.push(t.id)},!0),t.history=new Di(null),t.history.done=Wi(this.history.done,n),t.history.undone=Wi(this.history.undone,n)}},iterLinkedDocs:function(t){Mi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):we(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Kr(function(t){var e;("rtl"!=t&&(t="ltr"),t!=this.direction)&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&$r(e=this.cm,function(){Pi(e),Qr(e)}))})}),Co.prototype.eachLine=Co.prototype.iter;var Eo=0;function Oo(t){var e=this;if(Mo(e),!ie(e,t)&&!_n(e.display,t)){ue(t),s&&(Eo=+new Date);var n=ar(e,t,!0),r=t.dataTransfer.files;if(n&&!e.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,u=function(t,r){if(!e.options.allowDropFileTypes||-1!=z(e.options.allowDropFileTypes,t.type)){var s=new FileReader;s.onload=Yr(e,function(){var t=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),o[r]=t,++a==i){var u={from:n=_t(e.doc,n),to:n,text:e.doc.splitLines(o.join(e.doc.lineSeparator())),origin:"paste"};io(e.doc,u),$i(e.doc,wi(n,xi(u)))}}),s.readAsText(t)}},l=0;l<i;++l)u(r[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var c=t.dataTransfer.getData("Text");if(c){var h;if(e.state.draggingText&&!e.state.draggingText.copy&&(h=e.listSelections()),Xi(e.doc,wi(n,n)),h)for(var f=0;f<h.length;++f)lo(e.doc,"",h[f].anchor,h[f].head,"drag");e.replaceSelection(c,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Mo(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Ao(t){if(document.getElementsByClassName)for(var e=document.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var r=e[n].CodeMirror;r&&t(r)}}var Po=!1;function Do(){var t;Po||(te(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Ao(No)},100))}),te(window,"blur",function(){return Ao(yr)}),Po=!0)}function No(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Lo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Io=0;Io<10;Io++)Lo[Io+48]=Lo[Io+96]=String(Io);for(var Ro=65;Ro<=90;Ro++)Lo[Ro]=String.fromCharCode(Ro);for(var jo=1;jo<=12;jo++)Lo[jo+111]=Lo[jo+63235]="F"+jo;var Fo={};function Bo(t){var e,n,r,i,o=t.split(/-(?!$)/);t=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),i&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function zo(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete t[n];continue}for(var i=K(n.split(" "),Bo),o=0;o<i.length;o++){var s=void 0,a=void 0;o==i.length-1?(a=i.join(" "),s=r):(a=i.slice(0,o+1).join(" "),s="...");var u=e[a];if(u){if(u!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[n]}for(var l in e)t[l]=e[l];return t}function Wo(t,e,n,r){var i=(e=qo(e)).call?e.call(t,r):e[t];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Wo(t,e.fallthrough,n,r);for(var o=0;o<e.fallthrough.length;o++){var s=Wo(t,e.fallthrough[o],n,r);if(s)return s}}}function Uo(t){var e="string"==typeof t?t:Lo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Vo(t,e,n){var r=t;return e.altKey&&"Alt"!=r&&(t="Alt-"+t),(_?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(t="Ctrl-"+t),(_?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=r&&(t="Shift-"+t),t}function Go(t,e){if(h&&34==t.keyCode&&t.char)return!1;var n=Lo[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Vo(n,t,e))}function qo(t){return"string"==typeof t?Fo[t]:t}function Ho(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&vt(o.from,X(r).to)<=0;){var s=r.pop();if(vt(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}$r(t,function(){for(var e=r.length-1;e>=0;e--)lo(t.doc,"",r[e].from,r[e].to,"+delete");Cr(t)})}function $o(t,e,n){var r=ot(t.text,e+n,n);return r<0||r>t.text.length?null:r}function Yo(t,e,n){var r=$o(t,e.ch,n);return null==r?null:new gt(e.line,r,n<0?"after":"before")}function Xo(t,e,n,r,i){if(t){var o=Jt(n,e.doc.direction);if(o){var s,a=i<0?X(o):o[0],u=i<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==e.doc.direction){var l=Dn(e,n);s=i<0?n.text.length-1:0;var c=Nn(e,l,s).top;s=st(function(t){return Nn(e,l,t).top==c},i<0==(1==a.level)?a.from:a.to-1,s),"before"==u&&(s=$o(n,s,1))}else s=i<0?a.to:a.from;return new gt(r,s,u)}}return new gt(r,i<0?n.text.length:0,i<0?"before":"after")}Fo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Fo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Fo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Fo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Fo.default=y?Fo.macDefault:Fo.pcDefault;var Ko={selectAll:no,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),V)},killLine:function(t){return Ho(t,function(e){if(e.empty()){var n=at(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:gt(e.head.line+1,0)}:{from:e.head,to:gt(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Ho(t,function(e){return{from:gt(e.from().line,0),to:_t(t.doc,gt(e.to().line+1,0))}})},delLineLeft:function(t){return Ho(t,function(t){return{from:gt(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return Ho(t,function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}})},delWrappedLineRight:function(t){return Ho(t,function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:r}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(gt(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(gt(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Qo(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Jo(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(t,e){var n=at(t.doc,e),r=function(t){for(var e;e=Ft(t);)t=e.find(1,!0).line;return t}(n);r!=n&&(e=ht(r));return Xo(!0,t,n,e,-1)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},q)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},q)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return r.ch<t.getLine(r.line).search(/\S/)?Jo(t,e.head):r},q)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),s=F(t.getLine(o.line),o.ch,r);e.push(Y(r-s%r))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return $r(t,function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++)if(e[r].empty()){var i=e[r].head,o=at(t.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new gt(i.line,i.ch-1)),i.ch>0)i=new gt(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),gt(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var s=at(t.doc,i.line-1).text;s&&(i=new gt(i.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),gt(i.line-1,s.length-1),i,"+transpose"))}n.push(new yi(i,i))}t.setSelections(n)})},newlineAndIndent:function(t){return $r(t,function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var r=0;r<e.length;r++)t.indentLine(e[r].from().line,null,!0);Cr(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Qo(t,e){var n=at(t.doc,e),r=Wt(n);return r!=n&&(e=ht(r)),Xo(!0,t,r,e,1)}function Jo(t,e){var n=Qo(t,e.line),r=at(t.doc,n.line),i=Jt(r,t.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;return gt(n.line,s?0:o,n.sticky)}return n}function Zo(t,e,n){if("string"==typeof e&&!(e=Ko[e]))return!1;t.display.input.ensurePolled();var r=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=U}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}var ts=new B;function es(t,e,n,r){var i=t.state.keySeq;if(i){if(Uo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:ts.set(50,function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())}),ns(t,i+" "+e,n,r))return!0}return ns(t,e,n,r)}function ns(t,e,n,r){var i=function(t,e,n){for(var r=0;r<t.state.keyMaps.length;r++){var i=Wo(e,t.state.keyMaps[r],n,t);if(i)return i}return t.options.extraKeys&&Wo(e,t.options.extraKeys,n,t)||Wo(e,t.options.keyMap,n,t)}(t,e,r);return"multi"==i&&(t.state.keySeq=e),"handled"==i&&un(t,"keyHandled",t,e,n),"handled"!=i&&"multi"!=i||(ue(n),pr(t)),!!i}function rs(t,e){var n=Go(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?es(t,"Shift-"+n,e,function(e){return Zo(t,e,!0)})||es(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Zo(t,e)}):es(t,n,e,function(e){return Zo(t,e)}))}var is=null;function os(t){var e=this;if(e.curOp.focus=D(),!ie(e,t)){s&&a<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var r=rs(e,t);h&&(is=r?n:null,!r&&88==n&&!_e&&(y?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(C(e,"CodeMirror-crosshair"),ne(document,"keyup",n),ne(document,"mouseover",n))}N(e,"CodeMirror-crosshair"),te(document,"keyup",n),te(document,"mouseover",n)}(e)}}function ss(t){16==t.keyCode&&(this.doc.sel.shift=!1),ie(this,t)}function as(t){var e=this;if(!(_n(e.display,t)||ie(e,t)||t.ctrlKey&&!t.altKey||y&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(h&&n==is)return is=null,void ue(t);if(!h||t.which&&!(t.which<10)||!rs(e,t)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(t,e,n){return es(t,"'"+n+"'",e,function(e){return Zo(t,e,!0)})}(e,t,i)||e.display.input.onKeyPress(t))}}}var us,ls,cs=function(t,e,n){this.time=t,this.pos=e,this.button=n};function hs(t){var e=this,n=e.display;if(!(ie(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,_n(n,t))u||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ps(e,t)){var r=ar(e,t),i=de(t),o=r?function(t,e){var n=+new Date;return ls&&ls.compare(n,t,e)?(us=ls=null,"triple"):us&&us.compare(n,t,e)?(ls=new cs(n,t,e),us=null,"double"):(us=new cs(n,t,e),ls=null,"single")}(r,i):"single";window.focus(),1==i&&e.state.selectingText&&e.state.selectingText(t),r&&function(t,e,n,r,i){var o="Click";"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o);return es(t,Vo(o=(1==e?"Left":2==e?"Middle":"Right")+o,i),i,function(e){if("string"==typeof e&&(e=Ko[e]),!e)return!1;var r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r=e(t,n)!=U}finally{t.state.suppressEdits=!1}return r})}(e,i,r,o,t)||(1==i?r?function(t,e,n,r){s?setTimeout(R(gr,t),0):t.curOp.focus=D();var i,o=function(t,e,n){var r=t.getOption("configureMouse"),i=r?r(t,e,n):{};if(null==i.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}(null==i.extend||t.doc.extend)&&(i.extend=t.doc.extend||n.shiftKey);null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey));return i}(t,n,r),l=t.doc.sel;t.options.dragDrop&&ve&&!t.isReadOnly()&&"single"==n&&(i=l.contains(e))>-1&&(vt((i=l.ranges[i]).from(),e)<0||e.xRel>0)&&(vt(i.to(),e)>0||e.xRel<0)?function(t,e,n,r){var i=t.display,o=!1,l=Yr(t,function(e){u&&(i.scroller.draggable=!1),t.state.draggingText=!1,ne(i.wrapper.ownerDocument,"mouseup",l),ne(i.wrapper.ownerDocument,"mousemove",c),ne(i.scroller,"dragstart",h),ne(i.scroller,"drop",l),o||(ue(e),r.addNew||Vi(t.doc,n,null,null,r.extend),u||s&&9==a?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),c=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},h=function(){return o=!0};u&&(i.scroller.draggable=!0);t.state.draggingText=l,l.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop();te(i.wrapper.ownerDocument,"mouseup",l),te(i.wrapper.ownerDocument,"mousemove",c),te(i.scroller,"dragstart",h),te(i.scroller,"drop",l),vr(t),setTimeout(function(){return i.input.focus()},20)}(t,r,e,o):function(t,e,n,r){var i=t.display,o=t.doc;ue(e);var s,a,u=o.sel,l=u.ranges;r.addNew&&!r.extend?(a=o.sel.contains(n),s=a>-1?l[a]:new yi(n,n)):(s=o.sel.primary(),a=o.sel.primIndex);if("rectangle"==r.unit)r.addNew||(s=new yi(n,n)),n=ar(t,e,!0,!0),a=-1;else{var c=fs(t,n,r.unit);s=r.extend?Ui(s,c.anchor,c.head,r.extend):c}r.addNew?-1==a?(a=l.length,Yi(o,bi(l.concat([s]),a),{scroll:!1,origin:"*mouse"})):l.length>1&&l[a].empty()&&"char"==r.unit&&!r.extend?(Yi(o,bi(l.slice(0,a).concat(l.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),u=o.sel):qi(o,a,s,G):(a=0,Yi(o,new mi([s],0),G),u=o.sel);var h=n;function f(e){if(0!=vt(h,e))if(h=e,"rectangle"==r.unit){for(var i=[],l=t.options.tabSize,c=F(at(o,n.line).text,n.ch,l),f=F(at(o,e.line).text,e.ch,l),d=Math.min(c,f),p=Math.max(c,f),g=Math.min(n.line,e.line),v=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=v;g++){var m=at(o,g).text,y=H(m,d,l);d==p?i.push(new yi(gt(g,y),gt(g,y))):m.length>y&&i.push(new yi(gt(g,y),gt(g,H(m,p,l))))}i.length||i.push(new yi(n,n)),Yi(o,bi(u.ranges.slice(0,a).concat(i),a),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,w=s,x=fs(t,e,r.unit),_=w.anchor;vt(x.anchor,_)>0?(b=x.head,_=wt(w.from(),x.anchor)):(b=x.anchor,_=bt(w.to(),x.head));var S=u.ranges.slice(0);S[a]=function(t,e){var n=e.anchor,r=e.head,i=at(t.doc,n.line);if(0==vt(n,r)&&n.sticky==r.sticky)return e;var o=Jt(i);if(!o)return e;var s=Kt(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return e;var u,l=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==l||l==o.length)return e;if(r.line!=n.line)u=(r.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=Kt(o,r.ch,r.sticky),h=c-s||(r.ch-n.ch)*(1==a.level?-1:1);u=c==l-1||c==l?h<0:h>0}var f=o[l+(u?-1:0)],d=u==(1==f.level),p=d?f.from:f.to,g=d?"after":"before";return n.ch==p&&n.sticky==g?e:new yi(new gt(n.line,p,g),r)}(t,new yi(_t(o,_),b)),Yi(o,bi(S,a),G)}}var d=i.wrapper.getBoundingClientRect(),p=0;function g(e){t.state.selectingText=!1,p=1/0,ue(e),i.input.focus(),ne(i.wrapper.ownerDocument,"mousemove",v),ne(i.wrapper.ownerDocument,"mouseup",m),o.history.lastSelOrigin=null}var v=Yr(t,function(e){0!==e.buttons&&de(e)?function e(n){var s=++p;var a=ar(t,n,!0,"rectangle"==r.unit);if(!a)return;if(0!=vt(a,h)){t.curOp.focus=D(),f(a);var u=xr(i,o);(a.line>=u.to||a.line<u.from)&&setTimeout(Yr(t,function(){p==s&&e(n)}),150)}else{var l=n.clientY<d.top?-20:n.clientY>d.bottom?20:0;l&&setTimeout(Yr(t,function(){p==s&&(i.scroller.scrollTop+=l,e(n))}),50)}}(e):g(e)}),m=Yr(t,g);t.state.selectingText=m,te(i.wrapper.ownerDocument,"mousemove",v),te(i.wrapper.ownerDocument,"mouseup",m)}(t,r,e,o)}(e,r,o,t):fe(t)==n.scroller&&ue(t):2==i?(r&&Vi(e.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(S?gs(e,t):vr(e)))}}function fs(t,e,n){if("char"==n)return new yi(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new yi(gt(e.line,0),_t(t.doc,gt(e.line+1,0)));var r=n(t,e);return new yi(r.from,r.to)}function ds(t,e,n,r){var i,o;if(e.touches)i=e.touches[0].clientX,o=e.touches[0].clientY;else try{i=e.clientX,o=e.clientY}catch(e){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&ue(e);var s=t.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!se(t,n))return ce(e);o-=a.top-s.viewOffset;for(var u=0;u<t.options.gutters.length;++u){var l=s.gutters.childNodes[u];if(l&&l.getBoundingClientRect().right>=i)return re(t,n,t,ft(t.doc,o),t.options.gutters[u],e),ce(e)}}function ps(t,e){return ds(t,e,"gutterClick",!0)}function gs(t,e){_n(t.display,e)||function(t,e){if(!se(t,"gutterContextMenu"))return!1;return ds(t,e,"gutterContextMenu",!1)}(t,e)||ie(t,e,"contextmenu")||t.display.input.onContextMenu(e)}function vs(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(t)}cs.prototype.compare=function(t,e,n){return this.time+400>t&&0==vt(e,this.pos)&&n==this.button};var ms={toString:function(){return"CodeMirror.Init"}},ys={},bs={};function ws(t){ci(t),Qr(t),_r(t)}function xs(t,e,n){if(!e!=!(n&&n!=ms)){var r=t.display.dragFunctions,i=e?te:ne;i(t.display.scroller,"dragstart",r.start),i(t.display.scroller,"dragenter",r.enter),i(t.display.scroller,"dragover",r.over),i(t.display.scroller,"dragleave",r.leave),i(t.display.scroller,"drop",r.drop)}}function _s(t){t.options.lineWrapping?(N(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(C(t.display.wrapper,"CodeMirror-wrap"),Yt(t)),sr(t),Qr(t),zn(t),setTimeout(function(){return Rr(t)},100)}function Ss(t,e){var r=this;if(!(this instanceof Ss))return new Ss(t,e);this.options=e=e?j(e):{},j(ys,e,!1),hi(e);var i=e.value;"string"==typeof i?i=new Co(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var o=new Ss.inputStyles[e.inputStyle](this),l=this.display=new function(t,e,r){var i=this;this.input=r,i.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=A("div",null,"CodeMirror-code"),i.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=M("div",null,"CodeMirror-cursors"),i.measure=M("div",null,"CodeMirror-measure"),i.lineMeasure=M("div",null,"CodeMirror-measure"),i.lineSpace=A("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=A("div",[i.lineSpace],"CodeMirror-lines");i.mover=M("div",[o],null,"position: relative"),i.sizer=M("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=M("div",null,null,"position: absolute; height: "+W+"px; width: 1px;"),i.gutters=M("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=M("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=M("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),s&&a<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),u||n&&m||(i.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(i.wrapper):t(i.wrapper)),i.viewFrom=i.viewTo=e.first,i.reportedViewFrom=i.reportedViewTo=e.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}(t,i,o);for(var c in l.wrapper.CodeMirror=this,ci(this),vs(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Br(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},e.autofocus&&!m&&l.input.focus(),s&&a<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(t){var e=t.display;te(e.scroller,"mousedown",Yr(t,hs)),te(e.scroller,"dblclick",s&&a<11?Yr(t,function(e){if(!ie(t,e)){var n=ar(t,e);if(n&&!ps(t,e)&&!_n(t.display,e)){ue(e);var r=t.findWordAt(n);Vi(t.doc,r.anchor,r.head)}}}):function(e){return ie(t,e)||ue(e)});S||te(e.scroller,"contextmenu",function(e){return gs(t,e)});var n,r={end:0};function i(){e.activeTouch&&(n=setTimeout(function(){return e.activeTouch=null},1e3),(r=e.activeTouch).end=+new Date)}function o(t,e){if(null==e.left)return!0;var n=e.left-t.left,r=e.top-t.top;return n*n+r*r>400}te(e.scroller,"touchstart",function(i){if(!ie(t,i)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(i)&&!ps(t,i)){e.input.ensurePolled(),clearTimeout(n);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(e.activeTouch.left=i.touches[0].pageX,e.activeTouch.top=i.touches[0].pageY)}}),te(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),te(e.scroller,"touchend",function(n){var r=e.activeTouch;if(r&&!_n(e,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=t.coordsChar(e.activeTouch,"page");s=!r.prev||o(r,r.prev)?new yi(a,a):!r.prev.prev||o(r,r.prev.prev)?t.findWordAt(a):new yi(gt(a.line,0),_t(t.doc,gt(a.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),ue(n)}i()}),te(e.scroller,"touchcancel",i),te(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Ar(t,e.scroller.scrollTop),Dr(t,e.scroller.scrollLeft,!0),re(t,"scroll",t))}),te(e.scroller,"mousewheel",function(e){return vi(t,e)}),te(e.scroller,"DOMMouseScroll",function(e){return vi(t,e)}),te(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(e){ie(t,e)||he(e)},over:function(e){ie(t,e)||(!function(t,e){var n=ar(t,e);if(n){var r=document.createDocumentFragment();hr(t,n,r),t.display.dragCursor||(t.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),O(t.display.dragCursor,r)}}(t,e),he(e))},start:function(e){return function(t,e){if(s&&(!t.state.draggingText||+new Date-Eo<100))he(e);else if(!ie(t,e)&&!_n(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!f)){var n=M("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(t,e)},drop:Yr(t,Oo),leave:function(e){ie(t,e)||Mo(t)}};var u=e.input.getField();te(u,"keyup",function(e){return ss.call(t,e)}),te(u,"keydown",Yr(t,os)),te(u,"keypress",Yr(t,as)),te(u,"focus",function(e){return mr(t,e)}),te(u,"blur",function(e){return yr(t,e)})}(this),Do(),Wr(this),this.curOp.forceUpdate=!0,Ai(this,i),e.autofocus&&!m||this.hasFocus()?setTimeout(R(mr,this),20):yr(this),bs)bs.hasOwnProperty(c)&&bs[c](r,e[c],ms);Sr(this),e.finishInit&&e.finishInit(this);for(var d=0;d<ks.length;++d)ks[d](r);Ur(this),u&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(l.lineDiv).textRendering&&(l.lineDiv.style.textRendering="auto")}Ss.defaults=ys,Ss.optionHandlers=bs;var ks=[];function Ts(t,e,n,r){var i,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=Fe(t,e).state:n="prev");var s=t.options.tabSize,a=at(o,e),u=F(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var l,c=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&((l=o.mode.indent(i,a.text.slice(c.length),a.text))==U||l>150)){if(!r)return;n="prev"}}else l=0,n="not";"prev"==n?l=e>o.first?F(at(o,e-1).text,null,s):0:"add"==n?l=u+t.options.indentUnit:"subtract"==n?l=u-t.options.indentUnit:"number"==typeof n&&(l=u+n),l=Math.max(0,l);var h="",f=0;if(t.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)f+=s,h+="\t";if(f<l&&(h+=Y(l-f)),h!=c)return lo(o,h,gt(e,0),gt(e,c.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<c.length){var v=gt(e,c.length);qi(o,p,new yi(v,v));break}}}Ss.defineInitHook=function(t){return ks.push(t)};var Cs=null;function Es(t){Cs=t}function Os(t,e,n,r,i){var o=t.doc;t.display.shift=!1,r||(r=o.sel);var s,a=t.state.pasteIncoming||"paste"==i,u=we(e),l=null;if(a&&r.ranges.length>1)if(Cs&&Cs.text.join("\n")==e){if(r.ranges.length%Cs.text.length==0){l=[];for(var c=0;c<Cs.text.length;c++)l.push(o.splitLines(Cs.text[c]))}}else u.length==r.ranges.length&&t.options.pasteLinesPerSelection&&(l=K(u,function(t){return[t]}));for(var h=r.ranges.length-1;h>=0;h--){var f=r.ranges[h],d=f.from(),p=f.to();f.empty()&&(n&&n>0?d=gt(d.line,d.ch-n):t.state.overwrite&&!a?p=gt(p.line,Math.min(at(o,p.line).text.length,p.ch+X(u).length)):Cs&&Cs.lineWise&&Cs.text.join("\n")==e&&(d=p=gt(d.line,0))),s=t.curOp.updateInput;var g={from:d,to:p,text:l?l[h%l.length]:u,origin:i||(a?"paste":t.state.cutIncoming?"cut":"+input")};io(t.doc,g),un(t,"inputRead",t,g)}e&&!a&&As(t,e),Cr(t),t.curOp.updateInput=s,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function Ms(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||$r(e,function(){return Os(e,n,0,null,"paste")}),!0}function As(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=t.getModeAt(i.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(e.indexOf(o.electricChars.charAt(a))>-1){s=Ts(t,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(at(t.doc,i.head.line).text.slice(0,i.head.ch))&&(s=Ts(t,i.head.line,"smart"));s&&un(t,"electricInput",t,i.head.line)}}}function Ps(t){for(var e=[],n=[],r=0;r<t.doc.sel.ranges.length;r++){var i=t.doc.sel.ranges[r].head.line,o={anchor:gt(i,0),head:gt(i+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Ds(t,e){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!!e)}function Ns(){var t=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=M("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?t.style.width="1000px":t.setAttribute("wrap","off"),g&&(t.style.border="1px solid black"),Ds(t),e}function Ls(t,e,n,r,i){var o=e,s=n,a=at(t,e.line);function u(r){var o,s;if(null==(o=i?function(t,e,n,r){var i=Jt(e,t.doc.direction);if(!i)return Yo(e,n,r);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=Kt(i,n.ch,n.sticky),s=i[o];if("ltr"==t.doc.direction&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return Yo(e,n,r);var a,u=function(t,n){return $o(e,t instanceof gt?t.ch:t,n)},l=function(n){return t.options.lineWrapping?(a=a||Dn(t,e),Jn(t,e,a,n)):{begin:0,end:e.text.length}},c=l("before"==n.sticky?u(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var h=1==s.level==r<0,f=u(n,h?1:-1);if(null!=f&&(h?f<=s.to&&f<=c.end:f>=s.from&&f>=c.begin)){var d=h?"before":"after";return new gt(n.line,f,d)}}var p=function(t,e,r){for(var o=function(t,e){return e?new gt(n.line,u(t,1),"before"):new gt(n.line,t,"after")};t>=0&&t<i.length;t+=e){var s=i[t],a=e>0==(1!=s.level),l=a?r.begin:u(r.end,-1);if(s.from<=l&&l<s.to)return o(l,a);if(l=a?s.from:u(s.to,-1),r.begin<=l&&l<r.end)return o(l,a)}},g=p(o+r,r,c);if(g)return g;var v=r>0?c.end:u(c.begin,-1);return null==v||r>0&&v==e.text.length||!(g=p(r>0?0:i.length-1,r,l(v)))?null:g}(t.cm,a,e,n):Yo(a,e,n))){if(r||(s=e.line+n)<t.first||s>=t.first+t.size||(e=new gt(s,e.ch,e.sticky),!(a=at(t,s))))return!1;e=Xo(i,t.cm,a,e.line,n)}else e=o;return!0}if("char"==r)u();else if("column"==r)u(!0);else if("word"==r||"group"==r)for(var l=null,c="group"==r,h=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(n<0)||u(!f);f=!1){var d=a.text.charAt(e.ch)||"\n",p=et(d,h)?"w":c&&"\n"==d?"n":!c||/\s/.test(d)?null:"p";if(!c||f||p||(p="s"),l&&l!=p){n<0&&(n=1,u(),e.sticky="after");break}if(p&&(l=p),n>0&&!u(!f))break}var g=to(t,e,o,s,!0);return mt(o,g)&&(g.hitSide=!0),g}function Is(t,e,n,r){var i,o,s=t.doc,a=e.left;if("page"==r){var u=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(u-.5*er(t.display),3);i=(n>0?e.bottom:e.top)+n*l}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(;(o=Kn(t,a,i)).outside;){if(n<0?i<=0:i>=s.height){o.hitSide=!0;break}i+=5*n}return o}var Rs=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function js(t,e){var n=Pn(t,e.line);if(!n||n.hidden)return null;var r=at(t.doc,e.line),i=Mn(n,r,e.line),o=Jt(r,t.doc.direction),s="left";o&&(s=Kt(o,e.ch)%2?"right":"left");var a=Rn(i.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Fs(t,e){return e&&(t.bad=!0),t}function Bs(t,e,n){var r;if(e==t.display.lineDiv){if(!(r=t.display.lineDiv.childNodes[n]))return Fs(t.clipPos(gt(t.display.viewTo-1)),!0);e=null,n=0}else for(r=e;;r=r.parentNode){if(!r||r==t.display.lineDiv)return null;if(r.parentNode&&r.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var o=t.display.view[i];if(o.node==r)return zs(o,e,n)}}function zs(t,e,n){var r=t.text.firstChild,i=!1;if(!e||!P(r,e))return Fs(gt(ht(t.line),0),!0);if(e==r&&(i=!0,e=r.childNodes[n],n=0,!e)){var o=t.rest?X(t.rest):t.line;return Fs(gt(ht(o),o.text.length),i)}var s=3==e.nodeType?e:null,a=e;for(s||1!=e.childNodes.length||3!=e.firstChild.nodeType||(s=e.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var u=t.measure,l=u.maps;function c(e,n,r){for(var i=-1;i<(l?l.length:0);i++)for(var o=i<0?u.map:l[i],s=0;s<o.length;s+=3){var a=o[s+2];if(a==e||a==n){var c=ht(i<0?t.line:t.rest[i]),h=o[s]+r;return(r<0||a!=e)&&(h=o[s+(r?1:0)]),gt(c,h)}}}var h=c(s,a,n);if(h)return Fs(h,i);for(var f=a.nextSibling,d=s?s.nodeValue.length-n:0;f;f=f.nextSibling){if(h=c(f,f.firstChild,0))return Fs(gt(h.line,h.ch-d),i);d+=f.textContent.length}for(var p=a.previousSibling,g=n;p;p=p.previousSibling){if(h=c(p,p.firstChild,-1))return Fs(gt(h.line,h.ch+g),i);g+=p.textContent.length}}Rs.prototype.init=function(t){var e=this,n=this,r=n.cm,i=n.div=t.lineDiv;function o(t){if(!ie(r,t)){if(r.somethingSelected())Es({lineWise:!1,text:r.getSelections()}),"cut"==t.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var e=Ps(r);Es({lineWise:!0,text:e.text}),"cut"==t.type&&r.operation(function(){r.setSelections(e.ranges,0,V),r.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var o=Cs.text.join("\n");if(t.clipboardData.setData("Text",o),t.clipboardData.getData("Text")==o)return void t.preventDefault()}var s=Ns(),a=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),a.value=Cs.text.join("\n");var u=document.activeElement;I(a),setTimeout(function(){r.display.lineSpace.removeChild(s),u.focus(),u==i&&n.showPrimarySelection()},50)}}Ds(i,r.options.spellcheck),te(i,"paste",function(t){ie(r,t)||Ms(t,r)||a<=11&&setTimeout(Yr(r,function(){return e.updateFromDOM()}),20)}),te(i,"compositionstart",function(t){e.composing={data:t.data,done:!1}}),te(i,"compositionupdate",function(t){e.composing||(e.composing={data:t.data,done:!1})}),te(i,"compositionend",function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),te(i,"touchstart",function(){return n.forceCompositionEnd()}),te(i,"input",function(){e.composing||e.readFromDOMSoon()}),te(i,"copy",o),te(i,"cut",o)},Rs.prototype.prepareSelection=function(){var t=cr(this.cm,!1);return t.focus=this.cm.state.focused,t},Rs.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Rs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Rs.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,r=e.doc.sel.primary(),i=r.from(),o=r.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var s=Bs(e,t.anchorNode,t.anchorOffset),a=Bs(e,t.focusNode,t.focusOffset);if(!s||s.bad||!a||a.bad||0!=vt(wt(s,a),i)||0!=vt(bt(s,a),o)){var u=e.display.view,l=i.line>=e.display.viewFrom&&js(e,i)||{node:u[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&js(e,o);if(!c){var h=u[u.length-1].measure,f=h.maps?h.maps[h.maps.length-1]:h.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(l&&c){var d,p=t.rangeCount&&t.getRangeAt(0);try{d=T(l.node,l.offset,c.offset,c.node)}catch(t){}d&&(!n&&e.state.focused?(t.collapse(l.node,l.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},Rs.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Rs.prototype.showMultipleSelections=function(t){O(this.cm.display.cursorDiv,t.cursors),O(this.cm.display.selectionDiv,t.selection)},Rs.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Rs.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return P(this.div,e)},Rs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Rs.prototype.blur=function(){this.div.blur()},Rs.prototype.getField=function(){return this.div},Rs.prototype.supportsTouch=function(){return!0},Rs.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():$r(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},Rs.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Rs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(v&&c&&this.cm.options.gutters.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Bs(e,t.anchorNode,t.anchorOffset),r=Bs(e,t.focusNode,t.focusOffset);n&&r&&$r(e,function(){Yi(e.doc,wi(n,r),V),(n.bad||r.bad)&&(e.curOp.selectionChanged=!0)})}}},Rs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>r.firstLine()&&(s=gt(s.line-1,at(r.doc,s.line-1).length)),a.ch==at(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=gt(a.line+1,0)),s.line<i.viewFrom||a.line>i.viewTo-1)return!1;s.line==i.viewFrom||0==(t=ur(r,s.line))?(e=ht(i.view[0].line),n=i.view[0].node):(e=ht(i.view[t].line),n=i.view[t-1].node.nextSibling);var u,l,c=ur(r,a.line);if(c==i.view.length-1?(u=i.viewTo-1,l=i.lineDiv.lastChild):(u=ht(i.view[c+1].line)-1,l=i.view[c+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(t,e,n,r,i){var o="",s=!1,a=t.doc.lineSeparator(),u=!1;function l(){s&&(o+=a,u&&(o+=a),s=u=!1)}function c(t){t&&(l(),o+=t)}function h(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void c(n);var o,f=e.getAttribute("cm-marker");if(f){var d=t.findMarks(gt(r,0),gt(i+1,0),(v=+f,function(t){return t.id==v}));return void(d.length&&(o=d[0].find(0))&&c(ut(t.doc,o.from,o.to).join(a)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;p&&l();for(var g=0;g<e.childNodes.length;g++)h(e.childNodes[g]);/^(pre|p)$/i.test(e.nodeName)&&(u=!0),p&&(s=!0)}else 3==e.nodeType&&c(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var v}for(;h(e),e!=n;)e=e.nextSibling,u=!1;return o}(r,n,l,e,u)),f=ut(r.doc,gt(e,0),gt(u,at(r.doc,u).text.length));h.length>1&&f.length>1;)if(X(h)==X(f))h.pop(),f.pop(),u--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),e++}for(var d=0,p=0,g=h[0],v=f[0],m=Math.min(g.length,v.length);d<m&&g.charCodeAt(d)==v.charCodeAt(d);)++d;for(var y=X(h),b=X(f),w=Math.min(y.length-(1==h.length?d:0),b.length-(1==f.length?d:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==h.length&&1==f.length&&e==s.line)for(;d&&d>s.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)d--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var x=gt(e,d),_=gt(u,f.length?X(f).length-p:0);return h.length>1||h[0]||vt(x,_)?(lo(r.doc,h,x,_,"+input"),!0):void 0},Rs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Rs.prototype.reset=function(){this.forceCompositionEnd()},Rs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Rs.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Rs.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||$r(this.cm,function(){return Qr(t.cm)})},Rs.prototype.setUneditable=function(t){t.contentEditable="false"},Rs.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Yr(this.cm,Os)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Rs.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Rs.prototype.onContextMenu=function(){},Rs.prototype.resetPosition=function(){},Rs.prototype.needsContentAttribute=!0;var Ws=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};Ws.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function o(t){if(!ie(r,t)){if(r.somethingSelected())Es({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=Ps(r);Es({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,V):(n.prevInput="",i.value=e.text.join("\n"),I(i))}"cut"==t.type&&(r.state.cutIncoming=!0)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),g&&(i.style.width="0px"),te(i,"input",function(){s&&a>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()}),te(i,"paste",function(t){ie(r,t)||Ms(t,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),te(i,"cut",o),te(i,"copy",o),te(t.scroller,"paste",function(e){_n(t,e)||ie(r,e)||(r.state.pasteIncoming=!0,n.focus())}),te(t.lineSpace,"selectstart",function(e){_n(t,e)||ue(e)}),te(i,"compositionstart",function(){var t=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}}),te(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ws.prototype.createField=function(t){this.wrapper=Ns(),this.textarea=this.wrapper.firstChild},Ws.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,r=cr(t);if(t.options.moveInputWithCursor){var i=$n(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+s.top-o.top)),r.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},Ws.prototype.showSelection=function(t){var e=this.cm.display;O(e.cursorDiv,t.cursors),O(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Ws.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&I(this.textarea),s&&a>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Ws.prototype.getField=function(){return this.textarea},Ws.prototype.supportsTouch=function(){return!1},Ws.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||D()!=this.textarea))try{this.textarea.focus()}catch(t){}},Ws.prototype.blur=function(){this.textarea.blur()},Ws.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ws.prototype.receivedFocus=function(){this.slowPoll()},Ws.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},Ws.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))})},Ws.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||xe(n)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=n.value;if(i==r&&!e.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var u=0,l=Math.min(r.length,i.length);u<l&&r.charCodeAt(u)==i.charCodeAt(u);)++u;return $r(e,function(){Os(e,i.slice(u),r.length-u,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ws.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ws.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Ws.prototype.onContextMenu=function(t){var e=this,n=e.cm,r=n.display,i=e.textarea,o=ar(n,t),l=r.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Yr(n,Yi)(n.doc,wi(o),V);var c=i.style.cssText,f=e.wrapper.style.cssText;e.wrapper.style.cssText="position: absolute";var d,p=e.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",u&&(d=window.scrollY),r.input.focus(),u&&window.scrollTo(null,d),r.input.reset(),n.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=!0,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&a>=9&&v(),S){he(t);var g=function(){ne(window,"mouseup",g),setTimeout(m,20)};te(window,"mouseup",g)}else setTimeout(m,50)}function v(){if(null!=i.selectionStart){var t=n.somethingSelected(),o="\u200b"+(t?i.value:"");i.value="\u21da",i.value=o,e.prevInput=t?"":"\u200b",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function m(){if(e.contextMenuPending=!1,e.wrapper.style.cssText=f,i.style.cssText=c,s&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=i.selectionStart){(!s||s&&a<9)&&v();var t=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==e.prevInput?Yr(n,no)(n):t++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Ws.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},Ws.prototype.setUneditable=function(){},Ws.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,r,i,o){t.defaults[n]=r,i&&(e[n]=o?function(t,e,n){n!=ms&&i(t,e,n)}:i)}t.defineOption=n,t.Init=ms,n("value","",function(t,e){return t.setValue(e)},!0),n("mode",null,function(t,e){t.doc.modeOption=e,Ti(t)},!0),n("indentUnit",2,Ti,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(t){Ci(t),zn(t),Qr(t)},!0),n("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var n=[],r=t.doc.first;t.doc.iter(function(t){for(var i=0;;){var o=t.text.indexOf(e,i);if(-1==o)break;i=o+e.length,n.push(gt(r,o))}r++});for(var i=n.length-1;i>=0;i--)lo(t.doc,e,n[i],gt(n[i].line,n[i].ch+e.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=ms&&t.refresh()}),n("specialCharPlaceholder",Je,function(t){return t.refresh()},!0),n("electricChars",!0),n("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",function(t){vs(t),ws(t)},!0),n("keyMap","default",function(t,e,n){var r=qo(e),i=n!=ms&&qo(n);i&&i.detach&&i.detach(t,r),r.attach&&r.attach(t,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,_s,!0),n("gutters",[],function(t){hi(t.options),ws(t)},!0),n("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?ir(t.display)+"px":"0",t.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(t){return Rr(t)},!0),n("scrollbarStyle","native",function(t){Br(t),Rr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),n("lineNumbers",!1,function(t){hi(t.options),ws(t)},!0),n("firstLineNumber",1,ws,!0),n("lineNumberFormatter",function(t){return t},ws,!0),n("showCursorWhenSelecting",!1,lr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("readOnly",!1,function(t,e){"nocursor"==e&&(yr(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),n("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),n("dragDrop",!0,xs),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,lr,!0),n("singleCursorHeightPerLine",!0,lr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ci,!0),n("addModeClass",!1,Ci,!0),n("pollInterval",100),n("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),n("historyEventDelay",1250),n("viewportMargin",10,function(t){return t.refresh()},!0),n("maxHighlightLength",1e4,Ci,!0),n("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),n("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),n("autofocus",null),n("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),n("phrases",null)}(Ss),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var r=this.options,i=r[t];r[t]==n&&"mode"!=t||(r[t]=n,e.hasOwnProperty(t)&&Yr(this,e[t])(this,n,i),re(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](qo(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:Xr(function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var r=0,i=n(e);r<t.length&&n(t[r])<=i;)r++;t.splice(r,0,e)}(this.state.overlays,{mode:r,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},function(t){return t.priority}),this.state.modeGen++,Qr(this)}),removeOverlay:Xr(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var r=e[n].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return e.splice(n,1),this.state.modeGen++,void Qr(this)}}),indentLine:Xr(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),dt(this.doc,t)&&Ts(this,t,e,n)}),indentSelection:Xr(function(t){for(var e=this.doc.sel.ranges,n=-1,r=0;r<e.length;r++){var i=e[r];if(i.empty())i.head.line>n&&(Ts(this,i.head.line,t,!0),n=i.head.line,r==this.doc.sel.primIndex&&Cr(this));else{var o=i.from(),s=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var u=a;u<n;++u)Ts(this,u,t);var l=this.doc.sel.ranges;0==o.ch&&e.length==l.length&&l[r].from().ch>0&&qi(this.doc,r,new yi(o,l[r].to()),V)}}}),getTokenAt:function(t,e){return Ve(this,t,e)},getLineTokens:function(t,e){return Ve(this,gt(t),e,!0)},getTokenTypeAt:function(t){t=_t(this.doc,t);var e,n=je(this,at(this.doc,t.line)),r=0,i=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var s=r+i>>1;if((s?n[2*s-1]:0)>=o)i=s;else{if(!(n[2*s+1]<o)){e=n[2*s+2];break}r=s+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var r=[];if(!n.hasOwnProperty(e))return r;var i=n[e],o=this.getModeAt(t);if("string"==typeof o[e])i[o[e]]&&r.push(i[o[e]]);else if(o[e])for(var s=0;s<o[e].length;s++){var a=i[o[e][s]];a&&r.push(a)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var u=0;u<i._global.length;u++){var l=i._global[u];l.pred(o,this)&&-1==z(r,l.val)&&r.push(l.val)}return r},getStateAfter:function(t,e){var n=this.doc;return Fe(this,(t=xt(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return $n(this,null==t?n.head:"object"==typeof t?_t(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Hn(this,_t(this.doc,t),e||"page")},coordsChar:function(t,e){return Kn(this,(t=qn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=qn(this,{top:t,left:0},e||"page").top,ft(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var r,i=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,i=!0),r=at(this.doc,t)}else r=t;return Gn(this,r,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-Ht(r):0)},defaultTextHeight:function(){return er(this.display)},defaultCharWidth:function(){return nr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var o,s,a,u=this.display,l=(t=$n(this,_t(this.doc,t))).bottom,c=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),u.sizer.appendChild(e),"over"==r)l=t.top;else if("above"==r||"near"==r){var h=Math.max(u.wrapper.clientHeight,this.doc.height),f=Math.max(u.sizer.clientWidth,u.lineSpace.clientWidth);("above"==r||t.bottom+e.offsetHeight>h)&&t.top>e.offsetHeight?l=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=h&&(l=t.bottom),c+e.offsetWidth>f&&(c=f-e.offsetWidth)}e.style.top=l+"px",e.style.left=e.style.right="","right"==i?(c=u.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?c=0:"middle"==i&&(c=(u.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),n&&(o=this,s={left:c,top:l,right:c+e.offsetWidth,bottom:l+e.offsetHeight},null!=(a=kr(o,s)).scrollTop&&Ar(o,a.scrollTop),null!=a.scrollLeft&&Dr(o,a.scrollLeft))},triggerOnKeyDown:Xr(os),triggerOnKeyPress:Xr(as),triggerOnKeyUp:ss,triggerOnMouseDown:Xr(hs),execCommand:function(t){if(Ko.hasOwnProperty(t))return Ko[t].call(null,this)},triggerElectric:Xr(function(t){As(this,t)}),findPosH:function(t,e,n,r){var i=1;e<0&&(i=-1,e=-e);for(var o=_t(this.doc,t),s=0;s<e&&!(o=Ls(this.doc,o,i,n,r)).hitSide;++s);return o},moveH:Xr(function(t,e){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Ls(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()},q)}),deleteH:Xr(function(t,e){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Ho(this,function(n){var i=Ls(r,n.head,t,e,!1);return t<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(t,e,n,r){var i=1,o=r;e<0&&(i=-1,e=-e);for(var s=_t(this.doc,t),a=0;a<e;++a){var u=$n(this,s,"div");if(null==o?o=u.left:u.left=o,(s=Is(this,u,i,n)).hitSide)break}return s},moveV:Xr(function(t,e){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(s){if(o)return t<0?s.from():s.to();var a=$n(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),i.push(a.left);var u=Is(n,a,t,e);return"page"==e&&s==r.sel.primary()&&Tr(n,Hn(n,u,"div").top-a.top),u},q),i.length)for(var s=0;s<r.sel.ranges.length;s++)r.sel.ranges[s].goalColumn=i[s]}),findWordAt:function(t){var e=at(this.doc,t.line).text,n=t.ch,r=t.ch;if(e){var i=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=e.length||!n?++r:--n;for(var o=e.charAt(n),s=et(o,i)?function(t){return et(t,i)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};n>0&&s(e.charAt(n-1));)--n;for(;r<e.length&&s(e.charAt(r));)++r}return new yi(gt(t.line,n),gt(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?N(this.display.cursorDiv,"CodeMirror-overwrite"):C(this.display.cursorDiv,"CodeMirror-overwrite"),re(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==D()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xr(function(t,e){Er(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Cn(this)-this.display.barHeight,width:t.scrollWidth-Cn(this)-this.display.barWidth,clientHeight:On(this),clientWidth:En(this)}},scrollIntoView:Xr(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:gt(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Or(t),t.curOp.scrollToPos=e}(this,t):Mr(this,t.from,t.to,t.margin)}),setSize:Xr(function(t,e){var n=this,r=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&Bn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){Jr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,re(this,"refresh",this)}),operation:function(t){return $r(this,t)},startOperation:function(){return Wr(this)},endOperation:function(){return Ur(this)},refresh:Xr(function(){var t=this.display.cachedTextHeight;Qr(this),this.curOp.forceUpdate=!0,zn(this),Er(this,this.doc.scrollLeft,this.doc.scrollTop),ui(this),(null==t||Math.abs(t-er(this.display))>.5)&&sr(this),re(this,"refresh",this)}),swapDoc:Xr(function(t){var e=this.doc;return e.cm=null,Ai(this,t),zn(this),this.display.input.reset(),Er(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,un(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ae(t),t.registerHelper=function(e,r,i){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][r]=i},t.registerGlobalHelper=function(e,r,i,o){t.registerHelper(e,r,o),n[e]._global.push({pred:i,val:o})}}(Ss);var Us,Vs="iter insert remove copy getEditor constructor".split(" ");for(var Gs in Co.prototype)Co.prototype.hasOwnProperty(Gs)&&z(Vs,Gs)<0&&(Ss.prototype[Gs]=function(t){return function(){return t.apply(this.doc,arguments)}}(Co.prototype[Gs]));return ae(Co),Ss.inputStyles={textarea:Ws,contenteditable:Rs},Ss.defineMode=function(t){Ss.defaults.mode||"null"==t||(Ss.defaults.mode=t),function(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),ke[t]=e}.apply(this,arguments)},Ss.defineMIME=function(t,e){Te[t]=e},Ss.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Ss.defineMIME("text/plain","null"),Ss.defineExtension=function(t,e){Ss.prototype[t]=e},Ss.defineDocExtension=function(t,e){Co.prototype[t]=e},Ss.fromTextArea=function(t,e){if((e=e?j(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=D();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=a.getValue()}var i;if(t.form&&(te(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(t){}}e.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(ne(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=i))}},t.style.display="none";var a=Ss(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return a},(Us=Ss).off=ne,Us.on=te,Us.wheelEventPixels=gi,Us.Doc=Co,Us.splitLines=we,Us.countColumn=F,Us.findColumn=H,Us.isWordChar=tt,Us.Pass=U,Us.signal=re,Us.Line=He,Us.changeEnd=xi,Us.scrollbarModel=Fr,Us.Pos=gt,Us.cmpPos=vt,Us.modes=ke,Us.mimeModes=Te,Us.resolveMode=Ce,Us.getMode=Ee,Us.modeExtensions=Oe,Us.extendMode=Me,Us.copyState=Ae,Us.startState=De,Us.innerMode=Pe,Us.commands=Ko,Us.keyMap=Fo,Us.keyName=Go,Us.isModifierKey=Uo,Us.lookupKey=Wo,Us.normalizeKeyMap=zo,Us.StringStream=Ne,Us.SharedTextMarker=_o,Us.TextMarker=wo,Us.LineWidget=mo,Us.e_preventDefault=ue,Us.e_stopPropagation=le,Us.e_stop=he,Us.addClass=N,Us.contains=P,Us.rmClass=C,Us.keyNames=Lo,Ss.version="5.40.0",Ss},t.exports=r()},function(t,e,n){n(75),t.exports=n(80)},function(t,e,n){"use strict";"undefined"===typeof Promise&&(n(76).enable(),window.Promise=n(78)),n(79),Object.assign=n(17)},function(t,e,n){"use strict";var r=n(34),i=[ReferenceError,TypeError,RangeError],o=!1;function s(){o=!1,r._47=null,r._71=null}function a(t,e){return e.some(function(e){return t instanceof e})}e.disable=s,e.enable=function(t){t=t||{},o&&s();o=!0;var e=0,n=0,u={};function l(e){(t.allRejections||a(u[e].error,t.whitelist||i))&&(u[e].displayId=n++,t.onUnhandled?(u[e].logged=!0,t.onUnhandled(u[e].displayId,u[e].error)):(u[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}(u[e].displayId,u[e].error)))}r._47=function(e){var n;2===e._83&&u[e._56]&&(u[e._56].logged?(n=e._56,u[n].logged&&(t.onHandled?t.onHandled(u[n].displayId,u[n].error):u[n].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[n].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[n].displayId+".")))):clearTimeout(u[e._56].timeout),delete u[e._56])},r._71=function(t,n){0===t._75&&(t._56=e++,u[t._56]={displayId:null,error:n,timeout:setTimeout(l.bind(null,t._56),a(n,i)?100:2e3),logged:!1})}}},function(t,e,n){"use strict";(function(e){function n(t){i.length||(r(),!0),i[i.length]=t}t.exports=n;var r,i=[],o=0,s=1024;function a(){for(;o<i.length;){var t=o;if(o+=1,i[t].call(),o>s){for(var e=0,n=i.length-o;e<n;e++)i[e]=i[e+o];i.length-=o,o=0}}i.length=0,o=0,!1}var u,l,c,h="undefined"!==typeof e?e:self,f=h.MutationObserver||h.WebKitMutationObserver;function d(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"===typeof f?(u=1,l=new f(a),c=document.createTextNode(""),l.observe(c,{characterData:!0}),r=function(){u=-u,c.data=u}):r=d(a),n.requestFlush=r,n.makeRequestCallFromTimer=d}).call(e,n(3))},function(t,e,n){"use strict";var r=n(34);t.exports=r;var i=c(!0),o=c(!1),s=c(null),a=c(void 0),u=c(0),l=c("");function c(t){var e=new r(r._44);return e._83=1,e._18=t,e}r.resolve=function(t){if(t instanceof r)return t;if(null===t)return s;if(void 0===t)return a;if(!0===t)return i;if(!1===t)return o;if(0===t)return u;if(""===t)return l;if("object"===typeof t||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new r(e.bind(t))}catch(t){return new r(function(e,n){n(t)})}return c(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,n){if(0===e.length)return t([]);var i=e.length;function o(s,a){if(a&&("object"===typeof a||"function"===typeof a)){if(a instanceof r&&a.then===r.prototype.then){for(;3===a._83;)a=a._18;return 1===a._83?o(s,a._18):(2===a._83&&n(a._18),void a.then(function(t){o(s,t)},n))}var u=a.then;if("function"===typeof u)return void new r(u.bind(a)).then(function(t){o(s,t)},n)}e[s]=a,0===--i&&t(e)}for(var s=0;s<e.length;s++)o(s,e[s])})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){t.forEach(function(t){r.resolve(t).then(e,n)})})},r.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};c.prototype.append=function(t,e){t=a(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},c.prototype.delete=function(t){delete this.map[a(t)]},c.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},c.prototype.set=function(t,e){this.map[a(t)]=u(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),l(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),l(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),l(t)},e.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];y.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=c,t.Request=v,t.Response=y,t.fetch=function(t,n){return new Promise(function(r,i){var o=new v(t,n),s=new XMLHttpRequest;s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new c,t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new y(i,n))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials&&(s.withCredentials=!0),"responseType"in s&&e.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!==typeof t&&(t=String(t)),t}function l(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function d(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t,e,n,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=f(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t,e){var n,r,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this;Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),a=n(21);n(85),n(86);var u=n(22),l=n(128),c=n(159),h=n(168),f=new u.FSM,d=new l.SDBClient(new WebSocket("ws://"+window.location.hostname+":3000")).get("touchdoc","touchdoc");window.fsm=f;var p=window.location.pathname.includes("code");r(o,void 0,Promise,function(){var t;return i(this,function(e){switch(e.label){case 0:return d.subscribe(),[4,d.fetch()];case 1:return e.sent(),t=p?s.createElement(c.FSMEditor,{doc:d,fsm:f}):s.createElement(h.CodeEditor,{doc:d}),a.render(s.createElement("div",{className:"container"},t),document.getElementById("root")),[2]}})})},function(t,e,n){"use strict";var r=n(17),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112;i&&Symbol.for("react.placeholder");var p="function"===typeof Symbol&&Symbol.iterator;function g(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,s,a){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,a],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||v}function b(){}function w(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&g("85"),this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=y.prototype;var x=w.prototype=new b;x.constructor=w,r(x,y.prototype),x.isPureReactComponent=!0;var _={current:null,currentDispatcher:null},S=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var r=void 0,i={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)S.call(e,r)&&!k.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:_.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var E=/\/+/g,O=[];function M(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function A(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function P(t,e,n){return null==t?0:function t(e,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case s:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+D(a=e[l],l);u+=t(a,c,r,i)}else if(c=null===e||"object"!==typeof e?null:"function"===typeof(c=p&&e[p]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)u+=t(a=a.value,c=n+D(a,l++),r,i);else"object"===a&&g("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return u}(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function L(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?I(t,r,n,function(t){return t}):null!=t&&(C(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(E,"$&/")+"/")+n)),r.push(t))}function I(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(E,"$&/")+"/"),P(t,L,e=M(e,o,r,i)),A(e)}var R={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return I(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;P(t,N,e=M(null,null,e,n)),A(e)},count:function(t){return P(t,function(){return null},null)},toArray:function(t){var e=[];return I(t,e,null,function(t){return t}),e},only:function(t){return C(t)||g("143"),t}},createRef:function(){return{current:null}},Component:y,PureComponent:w,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,Provider:null,Consumer:null,unstable_read:null}).Provider={$$typeof:c,_context:t},t.Consumer=t,t.unstable_read=function(t,e){var n=_.currentDispatcher;return null===n&&g("277"),n.readContext(t,e)}.bind(null,t),t},forwardRef:function(t){return{$$typeof:d,render:t}},Fragment:a,StrictMode:u,unstable_AsyncMode:f,unstable_Profiler:l,createElement:T,cloneElement:function(t,e,n){(null===t||void 0===t)&&g("267",t);var i=void 0,s=r({},t.props),a=t.key,u=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,l=_.current),void 0!==e.key&&(a=""+e.key);var c=void 0;for(i in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)S.call(e,i)&&!k.hasOwnProperty(i)&&(s[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(1===(i=arguments.length-2))s.children=n;else if(1<i){c=Array(i);for(var h=0;h<i;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:o,type:t.type,key:a,ref:u,props:s,_owner:l}},createFactory:function(t){var e=T.bind(null,t);return e.type=t,e},isValidElement:C,version:"16.5.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:_,assign:r}},j={default:R},F=j&&R||j;t.exports=F.default||F},function(t,e,n){"use strict";var r=n(6),i=n(17),o=n(83);function s(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,s,a){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,a],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||s("227");var a=!1,u=null,l=!1,c=null,h={onError:function(t){a=!0,u=t}};function f(t,e,n,r,i,o,s,l,c){a=!1,u=null,function(t,e,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}.apply(h,arguments)}var d=null,p={};function g(){if(d)for(var t in p){var e=p[t],n=d.indexOf(t);if(-1<n||s("96",t),!m[n])for(var r in e.extractEvents||s("97",t),m[n]=e,n=e.eventTypes){var i=void 0,o=n[r],a=e,u=r;y.hasOwnProperty(u)&&s("99",u),y[u]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&v(l[i],a,u);i=!0}else o.registrationName?(v(o.registrationName,a,u),i=!0):i=!1;i||s("98",r,t)}}}function v(t,e,n){b[t]&&s("100",t),b[t]=e,w[t]=e.eventTypes[n].dependencies}var m=[],y={},b={},w={},x=null,_=null,S=null;function k(t,e,n,r){e=t.type||"unknown-event",t.currentTarget=S(r),function(t,e,n,r,i,o,h,d,p){if(f.apply(this,arguments),a){if(a){var g=u;a=!1,u=null}else s("198"),g=void 0;l||(l=!0,c=g)}}(e,n,void 0,t),t.currentTarget=null}function T(t,e){return null==e&&s("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function C(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var E=null;function O(t,e){if(t){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)k(t,e,n[i],r[i]);else n&&k(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function M(t){return O(t,!0)}function A(t){return O(t,!1)}var P={injectEventPluginOrder:function(t){d&&s("101"),d=Array.prototype.slice.call(t),g()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];p.hasOwnProperty(e)&&p[e]===r||(p[e]&&s("102",e),p[e]=r,n=!0)}n&&g()}};function D(t,e){var n=t.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&s("231",e,typeof n),n)}function N(t,e){if(null!==t&&(E=T(E,t)),t=E,E=null,t&&(C(t,e?M:A),E&&s("95"),l))throw e=c,l=!1,c=null,e}var L=Math.random().toString(36).slice(2),I="__reactInternalInstance$"+L,R="__reactEventHandlers$"+L;function j(t){if(t[I])return t[I];for(;!t[I];){if(!t.parentNode)return null;t=t.parentNode}return 7===(t=t[I]).tag||8===t.tag?t:null}function F(t){return!(t=t[I])||7!==t.tag&&8!==t.tag?null:t}function B(t){if(7===t.tag||8===t.tag)return t.stateNode;s("33")}function z(t){return t[R]||null}function W(t){do{t=t.return}while(t&&7!==t.tag);return t||null}function U(t,e,n){(e=D(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function V(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=W(e);for(e=n.length;0<e--;)U(n[e],"captured",t);for(e=0;e<n.length;e++)U(n[e],"bubbled",t)}}function G(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=D(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function q(t){t&&t.dispatchConfig.registrationName&&G(t._targetInst,null,t)}function H(t){C(t,V)}var $=!("undefined"===typeof window||!window.document||!window.document.createElement);function Y(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var X={animationend:Y("Animation","AnimationEnd"),animationiteration:Y("Animation","AnimationIteration"),animationstart:Y("Animation","AnimationStart"),transitionend:Y("Transition","TransitionEnd")},K={},Q={};function J(t){if(K[t])return K[t];if(!X[t])return t;var e,n=X[t];for(e in n)if(n.hasOwnProperty(e)&&e in Q)return K[t]=n[e];return t}$&&(Q=document.createElement("div").style,"AnimationEvent"in window||(delete X.animationend.animation,delete X.animationiteration.animation,delete X.animationstart.animation),"TransitionEvent"in window||delete X.transitionend.transition);var Z=J("animationend"),tt=J("animationiteration"),et=J("animationstart"),nt=J("transitionend"),rt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),it=null,ot=null,st=null;function at(){if(st)return st;var t,e,n=ot,r=n.length,i="value"in it?it.value:it.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return st=i.slice(t,1<e?1-e:void 0)}function ut(){return!0}function lt(){return!1}function ct(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ut:lt,this.isPropagationStopped=lt,this}function ht(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ft(t){t instanceof this||s("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function dt(t){t.eventPool=[],t.getPooled=ht,t.release=ft}i(ct.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=ut)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=ut)},persist:function(){this.isPersistent=ut},isPersistent:lt,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=lt,this._dispatchInstances=this._dispatchListeners=null}}),ct.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ct.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,dt(n),n},dt(ct);var pt=ct.extend({data:null}),gt=ct.extend({data:null}),vt=[9,13,27,32],mt=$&&"CompositionEvent"in window,yt=null;$&&"documentMode"in document&&(yt=document.documentMode);var bt=$&&"TextEvent"in window&&!yt,wt=$&&(!mt||yt&&8<yt&&11>=yt),xt=String.fromCharCode(32),_t={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},St=!1;function kt(t,e){switch(t){case"keyup":return-1!==vt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Tt(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Ct=!1;var Et={eventTypes:_t,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(mt)t:{switch(t){case"compositionstart":i=_t.compositionStart;break t;case"compositionend":i=_t.compositionEnd;break t;case"compositionupdate":i=_t.compositionUpdate;break t}i=void 0}else Ct?kt(t,n)&&(i=_t.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=_t.compositionStart);return i?(wt&&"ko"!==n.locale&&(Ct||i!==_t.compositionStart?i===_t.compositionEnd&&Ct&&(o=at()):(ot="value"in(it=r)?it.value:it.textContent,Ct=!0)),i=pt.getPooled(i,e,n,r),o?i.data=o:null!==(o=Tt(n))&&(i.data=o),H(i),o=i):o=null,(t=bt?function(t,e){switch(t){case"compositionend":return Tt(e);case"keypress":return 32!==e.which?null:(St=!0,xt);case"textInput":return(t=e.data)===xt&&St?null:t;default:return null}}(t,n):function(t,e){if(Ct)return"compositionend"===t||!mt&&kt(t,e)?(t=at(),st=ot=it=null,Ct=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=gt.getPooled(_t.beforeInput,e,n,r)).data=t,H(e)):e=null,null===o?e:null===e?o:[o,e]}},Ot=null,Mt=null,At=null;function Pt(t){if(t=_(t)){"function"!==typeof Ot&&s("280");var e=x(t.stateNode);Ot(t.stateNode,t.type,e)}}function Dt(t){Mt?At?At.push(t):At=[t]:Mt=t}function Nt(){if(Mt){var t=Mt,e=At;if(At=Mt=null,Pt(t),e)for(t=0;t<e.length;t++)Pt(e[t])}}function Lt(t,e){return t(e)}function It(t,e,n){return t(e,n)}function Rt(){}var jt=!1;function Ft(t,e){if(jt)return t(e);jt=!0;try{return Lt(t,e)}finally{jt=!1,(null!==Mt||null!==At)&&(Rt(),Nt())}}var Bt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Bt[t.type]:"textarea"===e}function Wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Ut(t){if(!$)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}function Vt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Gt(t){t._valueTracker||(t._valueTracker=function(t){var e=Vt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function qt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var Ht=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$t=/^(.*)[\\\/]/,Yt="function"===typeof Symbol&&Symbol.for,Xt=Yt?Symbol.for("react.element"):60103,Kt=Yt?Symbol.for("react.portal"):60106,Qt=Yt?Symbol.for("react.fragment"):60107,Jt=Yt?Symbol.for("react.strict_mode"):60108,Zt=Yt?Symbol.for("react.profiler"):60114,te=Yt?Symbol.for("react.provider"):60109,ee=Yt?Symbol.for("react.context"):60110,ne=Yt?Symbol.for("react.async_mode"):60111,re=Yt?Symbol.for("react.forward_ref"):60112,ie=Yt?Symbol.for("react.placeholder"):60113,oe="function"===typeof Symbol&&Symbol.iterator;function se(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function ae(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case ne:return"AsyncMode";case Qt:return"Fragment";case Kt:return"Portal";case Zt:return"Profiler";case Jt:return"StrictMode";case ie:return"Placeholder"}if("object"===typeof t){switch(t.$$typeof){case ee:return"Context.Consumer";case te:return"Context.Provider";case re:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef")}if("function"===typeof t.then&&(t=1===t._reactStatus?t._reactResult:null))return ae(t)}return null}function ue(t){var e="";do{t:switch(t.tag){case 4:case 0:case 1:case 2:case 3:case 7:case 10:var n=t._debugOwner,r=t._debugSource,i=ae(t.type),o=null;n&&(o=ae(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace($t,"")+":"+r.lineNumber+")":o&&(i=" (created by "+o+")"),o="\n    in "+(n||"Unknown")+i;break t;default:o=""}e+=o,t=t.return}while(t);return e}var le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,he={},fe={};function de(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pe[t]=new de(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pe[e]=new de(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){pe[t]=new de(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pe[t]=new de(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pe[t]=new de(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){pe[t]=new de(t,3,!0,t,null)}),["capture","download"].forEach(function(t){pe[t]=new de(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){pe[t]=new de(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){pe[t]=new de(t,5,!1,t.toLowerCase(),null)});var ge=/[\-:]([a-z])/g;function ve(t){return t[1].toUpperCase()}function me(t,e,n,r){var i=pe.hasOwnProperty(e)?pe[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!ce.call(fe,t)||!ce.call(he,t)&&(le.test(t)?fe[t]=!0:(he[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ye(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function be(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function we(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=ye(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function xe(t,e){null!=(e=e.checked)&&me(t,"checked",e,!1)}function _e(t,e){xe(t,e);var n=ye(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?ke(t,e.type,n):e.hasOwnProperty("defaultValue")&&ke(t,e.type,ye(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Se(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function ke(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ge,ve);pe[e]=new de(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ge,ve);pe[e]=new de(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ge,ve);pe[e]=new de(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),pe.tabIndex=new de("tabIndex",1,!1,"tabindex",null);var Te={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ce(t,e,n){return(t=ct.getPooled(Te.change,t,e,n)).type="change",Dt(n),H(t),t}var Ee=null,Oe=null;function Me(t){N(t,!1)}function Ae(t){if(qt(B(t)))return t}function Pe(t,e){if("change"===t)return e}var De=!1;function Ne(){Ee&&(Ee.detachEvent("onpropertychange",Le),Oe=Ee=null)}function Le(t){"value"===t.propertyName&&Ae(Oe)&&Ft(Me,t=Ce(Oe,t,Wt(t)))}function Ie(t,e,n){"focus"===t?(Ne(),Oe=n,(Ee=e).attachEvent("onpropertychange",Le)):"blur"===t&&Ne()}function Re(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ae(Oe)}function je(t,e){if("click"===t)return Ae(e)}function Fe(t,e){if("input"===t||"change"===t)return Ae(e)}$&&(De=Ut("input")&&(!document.documentMode||9<document.documentMode));var Be={eventTypes:Te,_isInputEventSupported:De,extractEvents:function(t,e,n,r){var i=e?B(e):window,o=void 0,s=void 0,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type?o=Pe:zt(i)?De?o=Fe:(o=Re,s=Ie):(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=je),o&&(o=o(t,e)))return Ce(o,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&ke(i,"number",i.value)}},ze=ct.extend({view:null,detail:null}),We={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=We[t])&&!!e[t]}function Ve(){return Ue}var Ge=0,qe=0,He=!1,$e=!1,Ye=ze.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ve,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ge;return Ge=t.screenX,He?"mousemove"===t.type?t.screenX-e:0:(He=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=qe;return qe=t.screenY,$e?"mousemove"===t.type?t.screenY-e:0:($e=!0,0)}}),Xe=Ye.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ke={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qe={eventTypes:Ke,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?j(e):null):o=null,o===e)return null;var s=void 0,a=void 0,u=void 0,l=void 0;"mouseout"===t||"mouseover"===t?(s=Ye,a=Ke.mouseLeave,u=Ke.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(s=Xe,a=Ke.pointerLeave,u=Ke.pointerEnter,l="pointer");var c=null==o?i:B(o);if(i=null==e?i:B(e),(t=s.getPooled(a,o,n,r)).type=l+"leave",t.target=c,t.relatedTarget=i,(n=s.getPooled(u,e,n,r)).type=l+"enter",n.target=i,n.relatedTarget=c,r=e,o&&r)t:{for(i=r,l=0,s=e=o;s;s=W(s))l++;for(s=0,u=i;u;u=W(u))s++;for(;0<l-s;)e=W(e),l--;for(;0<s-l;)i=W(i),s--;for(;l--;){if(e===i||e===i.alternate)break t;e=W(e),i=W(i)}e=null}else e=null;for(i=e,e=[];o&&o!==i&&(null===(l=o.alternate)||l!==i);)e.push(o),o=W(o);for(o=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)o.push(r),r=W(r);for(r=0;r<e.length;r++)G(e[r],"bubbled",t);for(r=o.length;0<r--;)G(o[r],"captured",n);return[t,n]}},Je=Object.prototype.hasOwnProperty;function Ze(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function tn(t,e){if(Ze(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Je.call(e,n[r])||!Ze(t[n[r]],e[n[r]]))return!1;return!0}function en(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(0!==(2&(e=e.return).effectTag))return 1}return 5===e.tag?2:3}function nn(t){2!==en(t)&&s("188")}function rn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=en(t))&&s("188"),1===e?null:t;for(var n=t,r=e;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return nn(i),t;if(a===r)return nn(i),e;a=a.sibling}s("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}a||s("189")}}n.alternate!==r&&s("190")}return 5!==n.tag&&s("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(7===e.tag||8===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var on=ct.extend({animationName:null,elapsedTime:null,pseudoElement:null}),sn=ct.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),an=ze.extend({relatedTarget:null});function un(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn=ze.extend({key:function(t){if(t.key){var e=ln[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=un(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?cn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ve,charCode:function(t){return"keypress"===t.type?un(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?un(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),fn=Ye.extend({dataTransfer:null}),dn=ze.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ve}),pn=ct.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),gn=Ye.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),vn=[["abort","abort"],[Z,"animationEnd"],[tt,"animationIteration"],[et,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[nt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],mn={},yn={};function bn(t,e){var n=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},mn[t]=e,yn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){bn(t,!0)}),vn.forEach(function(t){bn(t,!1)});var wn={eventTypes:mn,isInteractiveTopLevelEventType:function(t){return void 0!==(t=yn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=yn[t];if(!i)return null;switch(t){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":t=hn;break;case"blur":case"focus":t=an;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ye;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=dn;break;case Z:case tt:case et:t=on;break;case nt:t=pn;break;case"scroll":t=ze;break;case"wheel":t=gn;break;case"copy":case"cut":case"paste":t=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Xe;break;default:t=ct}return H(e=t.getPooled(i,e,n,r)),e}},xn=wn.isInteractiveTopLevelEventType,_n=[];function Sn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=5!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=j(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Wt(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,s=null,a=0;a<m.length;a++){var u=m[a];u&&(u=u.extractEvents(r,e,o,i))&&(s=T(s,u))}N(s,!1)}}var kn=!0;function Tn(t,e){if(!e)return null;var n=(xn(t)?En:On).bind(null,t);e.addEventListener(t,n,!1)}function Cn(t,e){if(!e)return null;var n=(xn(t)?En:On).bind(null,t);e.addEventListener(t,n,!0)}function En(t,e){It(On,t,e)}function On(t,e){if(kn){var n=Wt(e);if(null===(n=j(n))||"number"!==typeof n.tag||2===en(n)||(n=null),_n.length){var r=_n.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Ft(Sn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>_n.length&&_n.push(t)}}}var Mn={},An=0,Pn="_reactListenersID"+(""+Math.random()).slice(2);function Dn(t){return Object.prototype.hasOwnProperty.call(t,Pn)||(t[Pn]=An++,Mn[t[Pn]]={}),Mn[t[Pn]]}function Nn(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Ln(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function In(t,e){var n,r=Ln(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Ln(r)}}function Rn(){for(var t=window,e=Nn();e instanceof t.HTMLIFrameElement;){try{t=e.contentDocument.defaultView}catch(t){break}e=Nn(t.document)}return e}function jn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Fn=$&&"documentMode"in document&&11>=document.documentMode,Bn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zn=null,Wn=null,Un=null,Vn=!1;function Gn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Vn||null==zn||zn!==Nn(n)?null:("selectionStart"in(n=zn)&&jn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Un&&tn(Un,n)?null:(Un=n,(t=ct.getPooled(Bn.select,Wn,t,e)).type="select",t.target=zn,H(t),t))}var qn={eventTypes:Bn,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=Dn(o),i=w.onSelect;for(var s=0;s<i.length;s++){var a=i[s];if(!o.hasOwnProperty(a)||!o[a]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?B(e):window,t){case"focus":(zt(o)||"true"===o.contentEditable)&&(zn=o,Wn=e,Un=null);break;case"blur":Un=Wn=zn=null;break;case"mousedown":Vn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Vn=!1,Gn(n,r);case"selectionchange":if(Fn)break;case"keydown":case"keyup":return Gn(n,r)}return null}};function Hn(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function $n(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ye(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Yn(t,e){return null!=e.dangerouslySetInnerHTML&&s("91"),i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xn(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&s("92"),Array.isArray(e)&&(1>=e.length||s("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:ye(n)}}function Kn(t,e){var n=ye(e.value);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=""+ye(e.defaultValue))}function Qn(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=z,_=F,S=B,P.injectEventPluginsByName({SimpleEventPlugin:wn,EnterLeaveEventPlugin:Qe,ChangeEventPlugin:Be,SelectEventPlugin:qn,BeforeInputEventPlugin:Et});var Jn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Zn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Zn(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var er,nr=void 0,rr=(er=function(t,e){if(t.namespaceURI!==Jn.svg||"innerHTML"in t)t.innerHTML=e;else{for((nr=nr||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=nr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction(function(){return er(t,e)})}:er);function ir(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];function ar(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=e[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||or.hasOwnProperty(i)&&or[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(or).forEach(function(t){sr.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),or[e]=or[t]})});var ur=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(t,e){e&&(ur[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&s("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&s("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||s("61")),null!=e.style&&"object"!==typeof e.style&&s("62",""))}function cr(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function hr(t,e){var n=Dn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=w[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Cn("scroll",t);break;case"focus":case"blur":Cn("focus",t),Cn("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ut(i)&&Cn(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===rt.indexOf(i)&&Tn(i,t)}n[i]=!0}}}function fr(){}var dr=null,pr=null;function gr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}function mr(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function yr(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var br=[],wr=-1;function xr(t){0>wr||(t.current=br[wr],br[wr]=null,wr--)}function _r(t,e){br[++wr]=t.current,t.current=e}var Sr={},kr={current:Sr},Tr={current:!1},Cr=Sr;function Er(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Or(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mr(t){xr(Tr),xr(kr)}function Ar(t){xr(Tr),xr(kr)}function Pr(t,e,n){kr.current!==Sr&&s("168"),_r(kr,e),_r(Tr,n)}function Dr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in t||s("108",ae(e)||"Unknown",o);return i({},n,r)}function Nr(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Sr,Cr=kr.current,_r(kr,e),_r(Tr,Tr.current),!0}function Lr(t,e,n){var r=t.stateNode;r||s("169"),n?(e=Dr(t,e,Cr),r.__reactInternalMemoizedMergedChildContext=e,xr(Tr),xr(kr),_r(kr,e)):xr(Tr),_r(Tr,n)}var Ir=null,Rr=null;function jr(t){return function(e){try{return t(e)}catch(t){}}}function Fr(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=e,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Br(t){return!(!(t=t.prototype)||!t.isReactComponent)}function zr(t,e,n){var r=t.alternate;return null===r?((r=new Fr(t.tag,e,t.key,t.mode)).type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=t.childExpirationTime,r.expirationTime=e!==t.pendingProps?n:t.expirationTime,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.firstContextDependency=t.firstContextDependency,r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Wr(t,e,n){var r=t.type,i=t.key;t=t.props;var o=void 0;if("function"===typeof r)o=Br(r)?2:4;else if("string"===typeof r)o=7;else t:switch(r){case Qt:return Ur(t.children,e,n,i);case ne:o=10,e|=3;break;case Jt:o=10,e|=2;break;case Zt:return(r=new Fr(15,t,i,4|e)).type=Zt,r.expirationTime=n,r;case ie:o=16;break;default:if("object"===typeof r&&null!==r)switch(r.$$typeof){case te:o=12;break t;case ee:o=11;break t;case re:o=13;break t;default:if("function"===typeof r.then){o=4;break t}}s("130",null==r?r:typeof r,"")}return(e=new Fr(o,t,i,e)).type=r,e.expirationTime=n,e}function Ur(t,e,n,r){return(t=new Fr(9,t,r,e)).expirationTime=n,t}function Vr(t,e,n){return(t=new Fr(8,t,null,e)).expirationTime=n,t}function Gr(t,e,n){return(e=new Fr(6,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qr(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n>e?t.earliestPendingTime=e:t.latestPendingTime<e&&(t.latestPendingTime=e),Hr(e,t)}function Hr(t,e){var n=e.earliestSuspendedTime,r=e.latestSuspendedTime,i=e.earliestPendingTime,o=e.latestPingedTime;0===(i=0!==i?i:o)&&(0===t||r>t)&&(i=r),0!==(t=i)&&0!==n&&n<t&&(t=n),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}var $r=!1;function Yr(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xr(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Kr(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Qr(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Jr(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=Yr(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=Yr(t.memoizedState),i=n.updateQueue=Yr(n.memoizedState)):r=t.updateQueue=Xr(i):null===i&&(i=n.updateQueue=Xr(r));null===i||r===i?Qr(r,e):null===r.lastUpdate||null===i.lastUpdate?(Qr(r,e),Qr(i,e)):(Qr(r,e),i.lastUpdate=e)}function Zr(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Yr(t.memoizedState):ti(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function ti(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Xr(e)),e}function ei(t,e,n,r,o,s){switch(n.tag){case 1:return"function"===typeof(t=n.payload)?t.call(s,r,o):t;case 3:t.effectTag=-1025&t.effectTag|64;case 0:if(null===(o="function"===typeof(t=n.payload)?t.call(s,r,o):t)||void 0===o)break;return i({},r,o);case 2:$r=!0}return r}function ni(t,e,n,r,i){$r=!1;for(var o=(e=ti(t,e)).baseState,s=null,a=0,u=e.firstUpdate,l=o;null!==u;){var c=u.expirationTime;c>i?(null===s&&(s=u,o=l),(0===a||a>c)&&(a=c)):(l=ei(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(c=null,u=e.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h>i?(null===c&&(c=u,null===s&&(o=l)),(0===a||a>h)&&(a=h)):(l=ei(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===s&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===s&&null===c&&(o=l),e.baseState=o,e.firstUpdate=s,e.firstCapturedUpdate=c,t.expirationTime=a,t.memoizedState=l}function ri(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ii(e.firstEffect,n),e.firstEffect=e.lastEffect=null,ii(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function ii(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;"function"!==typeof n&&s("191",n),n.call(r)}t=t.nextEffect}}function oi(t,e){return{value:t,source:e,stack:ue(e)}}var si={current:null},ai=null,ui=null,li=null;function ci(t,e){var n=t.type._context;_r(si,n._currentValue),n._currentValue=e}function hi(t){var e=si.current;xr(si),t.type._context._currentValue=e}function fi(t){ai=t,li=ui=null,t.firstContextDependency=null}function di(t,e){return li!==t&&!1!==e&&0!==e&&("number"===typeof e&&1073741823!==e||(li=t,e=1073741823),e={context:t,observedBits:e,next:null},null===ui?(null===ai&&s("277"),ai.firstContextDependency=ui=e):ui=ui.next=e),t._currentValue}var pi={},gi={current:pi},vi={current:pi},mi={current:pi};function yi(t){return t===pi&&s("174"),t}function bi(t,e){_r(mi,e),_r(vi,t),_r(gi,pi);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tr(null,"");break;default:e=tr(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}xr(gi),_r(gi,e)}function wi(t){xr(gi),xr(vi),xr(mi)}function xi(t){yi(mi.current);var e=yi(gi.current),n=tr(e,t.type);e!==n&&(_r(vi,t),_r(gi,n))}function _i(t){vi.current===t&&(xr(gi),xr(vi))}var Si=(new r.Component).refs;function ki(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var Ti={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===en(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=as(),i=Kr(r=No(r,t));i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Jr(t,i),Lo(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=as(),i=Kr(r=No(r,t));i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Jr(t,i),Lo(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=as(),r=Kr(n=No(n,t));r.tag=2,void 0!==e&&null!==e&&(r.callback=e),Jr(t,r),Lo(t,n)}};function Ci(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!tn(n,r)||!tn(i,o))}function Ei(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ti.enqueueReplaceState(e,e.state,null)}function Oi(t,e,n,r){var i=t.stateNode,o=Or(e)?Cr:kr.current;i.props=n,i.state=t.memoizedState,i.refs=Si,i.context=Er(t,o),null!==(o=t.updateQueue)&&(ni(t,o,n,i,r),i.state=t.memoizedState),"function"===typeof(o=e.getDerivedStateFromProps)&&(ki(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ti.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(ni(t,o,n,i,r),i.state=t.memoizedState)),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var Mi=Array.isArray;function Ai(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){var r=void 0;(n=n._owner)&&(2!==n.tag&&3!==n.tag&&s("110"),r=n.stateNode),r||s("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===Si&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!==typeof t&&s("284"),n._owner||s("254",t)}return t}function Pi(t,e){"textarea"!==t.type&&s("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function Di(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=zr(t,e,n)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||8!==e.tag?((e=Vr(n,t.mode,r)).return=t,e):((e=i(e,n,r)).return=t,e)}function l(t,e,n,r){return null!==e&&e.type===n.type?((r=i(e,n.props,r)).ref=Ai(t,e,n),r.return=t,r):((r=Wr(n,t.mode,r)).ref=Ai(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||6!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Gr(n,t.mode,r)).return=t,e):((e=i(e,n.children||[],r)).return=t,e)}function h(t,e,n,r,o){return null===e||9!==e.tag?((e=Ur(n,t.mode,r,o)).return=t,e):((e=i(e,n,r)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Vr(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Xt:return(n=Wr(e,t.mode,n)).ref=Ai(t,null,e),n.return=t,n;case Kt:return(e=Gr(e,t.mode,n)).return=t,e}if(Mi(e)||se(e))return(e=Ur(e,t.mode,n,null)).return=t,e;Pi(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Xt:return n.key===i?n.type===Qt?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case Kt:return n.key===i?c(t,e,n,r):null}if(Mi(n)||se(n))return null!==i?null:h(t,e,n,r,null);Pi(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Xt:return t=t.get(null===r.key?n:r.key)||null,r.type===Qt?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case Kt:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(Mi(r)||se(r))return h(e,t=t.get(n)||null,r,i,null);Pi(e,r)}return null}function g(i,s,a,u){for(var l=null,c=null,h=s,g=s=0,v=null;null!==h&&g<a.length;g++){h.index>g?(v=h,h=null):v=h.sibling;var m=d(i,h,a[g],u);if(null===m){null===h&&(h=v);break}t&&h&&null===m.alternate&&e(i,h),s=o(m,s,g),null===c?l=m:c.sibling=m,c=m,h=v}if(g===a.length)return n(i,h),l;if(null===h){for(;g<a.length;g++)(h=f(i,a[g],u))&&(s=o(h,s,g),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);g<a.length;g++)(v=p(h,i,g,a[g],u))&&(t&&null!==v.alternate&&h.delete(null===v.key?g:v.key),s=o(v,s,g),null===c?l=v:c.sibling=v,c=v);return t&&h.forEach(function(t){return e(i,t)}),l}function v(i,a,u,l){var c=se(u);"function"!==typeof c&&s("150"),null==(u=c.call(u))&&s("151");for(var h=c=null,g=a,v=a=0,m=null,y=u.next();null!==g&&!y.done;v++,y=u.next()){g.index>v?(m=g,g=null):m=g.sibling;var b=d(i,g,y.value,l);if(null===b){g||(g=m);break}t&&g&&null===b.alternate&&e(i,g),a=o(b,a,v),null===h?c=b:h.sibling=b,h=b,g=m}if(y.done)return n(i,g),c;if(null===g){for(;!y.done;v++,y=u.next())null!==(y=f(i,y.value,l))&&(a=o(y,a,v),null===h?c=y:h.sibling=y,h=y);return c}for(g=r(i,g);!y.done;v++,y=u.next())null!==(y=p(g,i,v,y.value,l))&&(t&&null!==y.alternate&&g.delete(null===y.key?v:y.key),a=o(y,a,v),null===h?c=y:h.sibling=y,h=y);return t&&g.forEach(function(t){return e(i,t)}),c}return function(t,r,o,u){var l="object"===typeof o&&null!==o&&o.type===Qt&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case Xt:t:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(9===l.tag?o.type===Qt:l.type===o.type){n(t,l.sibling),(r=i(l,o.type===Qt?o.props.children:o.props,u)).ref=Ai(t,l,o),r.return=t,t=r;break t}n(t,l);break}e(t,l),l=l.sibling}o.type===Qt?((r=Ur(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Wr(o,t.mode,u)).ref=Ai(t,r,o),u.return=t,t=u)}return a(t);case Kt:t:{for(l=o.key;null!==r;){if(r.key===l){if(6===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[],u)).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Gr(o,t.mode,u)).return=t,t=r}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&8===r.tag?(n(t,r.sibling),(r=i(r,o,u)).return=t,t=r):(n(t,r),(r=Vr(o,t.mode,u)).return=t,t=r),a(t);if(Mi(o))return g(t,r,o,u);if(se(o))return v(t,r,o,u);if(c&&Pi(t,o),"undefined"===typeof o&&!l)switch(t.tag){case 2:case 3:case 0:s("152",(u=t.type).displayName||u.name||"Component")}return n(t,r)}}var Ni=Di(!0),Li=Di(!1),Ii=null,Ri=null,ji=!1;function Fi(t,e){var n=new Fr(7,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Bi(t,e){switch(t.tag){case 7:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 8:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function zi(t){if(ji){var e=Ri;if(e){var n=e;if(!Bi(t,e)){if(!(e=mr(n))||!Bi(t,e))return t.effectTag|=2,ji=!1,void(Ii=t);Fi(Ii,n)}Ii=t,Ri=yr(e)}else t.effectTag|=2,ji=!1,Ii=t}}function Wi(t){for(t=t.return;null!==t&&7!==t.tag&&5!==t.tag;)t=t.return;Ii=t}function Ui(t){if(t!==Ii)return!1;if(!ji)return Wi(t),ji=!0,!1;var e=t.type;if(7!==t.tag||"head"!==e&&"body"!==e&&!vr(e,t.memoizedProps))for(e=Ri;e;)Fi(t,e),e=mr(e);return Wi(t),Ri=Ii?mr(t.stateNode):null,!0}function Vi(){Ri=Ii=null,ji=!1}var Gi=Ht.ReactCurrentOwner;function qi(t,e,n,r){e.child=null===t?Li(e,null,n,r):Ni(e,t.child,n,r)}function Hi(t,e,n,r,i){n=n.render;var o=e.ref;return Tr.current||e.memoizedProps!==r||o!==(null!==t?t.ref:null)?(qi(t,e,n=n(r,o),i),e.memoizedProps=r,e.child):Zi(t,e,i)}function $i(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Yi(t,e,n,r,i){var o=Or(n)?Cr:kr.current;return o=Er(e,o),fi(e),n=n(r,o),e.effectTag|=1,qi(t,e,n,i),e.memoizedProps=r,e.child}function Xi(t,e,n,r,i){if(Or(n)){var o=!0;Nr(e)}else o=!1;if(fi(e),null===t)if(null===e.stateNode){var s=Or(n)?Cr:kr.current,a=n.contextTypes,u=null!==a&&void 0!==a,l=new n(r,a=u?Er(e,s):Sr);e.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=Ti,e.stateNode=l,l._reactInternalFiber=e,u&&((u=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,u.__reactInternalMemoizedMaskedChildContext=a),Oi(e,n,r,i),r=!0}else{s=e.stateNode,a=e.memoizedProps,s.props=a;var c=s.context;u=Er(e,u=Or(n)?Cr:kr.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==u)&&Ei(e,s,r,u),$r=!1;var f=e.memoizedState;c=s.state=f;var d=e.updateQueue;null!==d&&(ni(e,d,r,s,i),c=e.memoizedState),a!==r||f!==c||Tr.current||$r?("function"===typeof h&&(ki(e,n,h,r),c=e.memoizedState),(a=$r||Ci(e,n,a,r,f,c,u))?(l||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.effectTag|=4)):("function"===typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=u,r=a):("function"===typeof s.componentDidMount&&(e.effectTag|=4),r=!1)}else s=e.stateNode,a=e.memoizedProps,s.props=a,c=s.context,u=Er(e,u=Or(n)?Cr:kr.current),(l="function"===typeof(h=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==u)&&Ei(e,s,r,u),$r=!1,c=e.memoizedState,f=s.state=c,null!==(d=e.updateQueue)&&(ni(e,d,r,s,i),f=e.memoizedState),a!==r||c!==f||Tr.current||$r?("function"===typeof h&&(ki(e,n,h,r),f=e.memoizedState),(h=$r||Ci(e,n,a,r,c,f,u))?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,u)),"function"===typeof s.componentDidUpdate&&(e.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=u,r=h):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),r=!1);return Ki(t,e,n,r,o,i)}function Ki(t,e,n,r,i,o){$i(t,e);var s=0!==(64&e.effectTag);if(!r&&!s)return i&&Lr(e,n,!1),Zi(t,e,o);r=e.stateNode,Gi.current=e;var a=s?null:r.render();return e.effectTag|=1,null!==t&&s&&(qi(t,e,null,o),e.child=null),qi(t,e,a,o),e.memoizedState=r.state,e.memoizedProps=r.props,i&&Lr(e,n,!0),e.child}function Qi(t){var e=t.stateNode;e.pendingContext?Pr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Pr(0,e.context,!1),bi(t,e.containerInfo)}function Ji(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}function Zi(t,e,n){null!==t&&(e.firstContextDependency=t.firstContextDependency);var r=e.childExpirationTime;if(0===r||r>n)return null;if(null!==t&&e.child!==t.child&&s("153"),null!==e.child){for(n=zr(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=zr(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function to(t,e,n){var r=e.expirationTime;if(!Tr.current&&(0===r||r>n)){switch(e.tag){case 5:Qi(e),Vi();break;case 7:xi(e);break;case 2:Or(e.type)&&Nr(e);break;case 3:Or(e.type._reactResult)&&Nr(e);break;case 6:bi(e,e.stateNode.containerInfo);break;case 12:ci(e,e.memoizedProps.value)}return Zi(t,e,n)}switch(e.expirationTime=0,e.tag){case 4:return function(t,e,n,r){null!==t&&s("155");var i=e.pendingProps;if("object"===typeof n&&null!==n&&"function"===typeof n.then){var o=n=function(t){switch(t._reactStatus){case 1:return t._reactResult;case 2:throw t._reactResult;case 0:throw t;default:throw t._reactStatus=0,t.then(function(e){if(0===t._reactStatus){if(t._reactStatus=1,"object"===typeof e&&null!==e){var n=e.default;e=void 0!==n&&null!==n?n:e}t._reactResult=e}},function(e){0===t._reactStatus&&(t._reactStatus=2,t._reactResult=e)}),t}}(n);o="function"===typeof o?Br(o)?3:1:void 0!==o&&null!==o&&o.$$typeof?14:4,o=e.tag=o;var a=Ji(n,i);switch(o){case 1:return Yi(t,e,n,a,r);case 3:return Xi(t,e,n,a,r);case 14:return Hi(t,e,n,a,r);default:s("283",n)}}if(o=Er(e,kr.current),fi(e),o=n(i,o),e.effectTag|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){e.tag=2,Or(n)?(a=!0,Nr(e)):a=!1,e.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var u=n.getDerivedStateFromProps;return"function"===typeof u&&ki(e,n,u,i),o.updater=Ti,e.stateNode=o,o._reactInternalFiber=e,Oi(e,n,i,r),Ki(t,e,n,!0,a,r)}return e.tag=0,qi(t,e,o,r),e.memoizedProps=i,e.child}(t,e,e.type,n);case 0:return Yi(t,e,e.type,e.pendingProps,n);case 1:var i=e.type._reactResult;return t=Yi(t,e,i,Ji(i,r=e.pendingProps),n),e.memoizedProps=r,t;case 2:return Xi(t,e,e.type,e.pendingProps,n);case 3:return t=Xi(t,e,i=e.type._reactResult,Ji(i,r=e.pendingProps),n),e.memoizedProps=r,t;case 5:return Qi(e),null===(r=e.updateQueue)&&s("282"),i=null!==(i=e.memoizedState)?i.element:null,ni(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i?(Vi(),e=Zi(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(Ri=yr(e.stateNode.containerInfo),Ii=e,i=ji=!0),i?(e.effectTag|=2,e.child=Li(e,null,r,n)):(qi(t,e,r,n),Vi()),e=e.child),e;case 7:xi(e),null===t&&zi(e),r=e.type,i=e.pendingProps;var o=null!==t?t.memoizedProps:null,a=i.children;return vr(r,i)?a=null:null!==o&&vr(r,o)&&(e.effectTag|=16),$i(t,e),1073741823!==n&&1&e.mode&&i.hidden?(e.expirationTime=1073741823,e.memoizedProps=i,e=null):(qi(t,e,a,n),e.memoizedProps=i,e=e.child),e;case 8:return null===t&&zi(e),e.memoizedProps=e.pendingProps,null;case 16:return null;case 6:return bi(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ni(e,null,r,n):qi(t,e,r,n),e.memoizedProps=r,e.child;case 13:return Hi(t,e,e.type,e.pendingProps,n);case 14:return t=Hi(t,e,i=e.type._reactResult,Ji(i,r=e.pendingProps),n),e.memoizedProps=r,t;case 9:return qi(t,e,r=e.pendingProps,n),e.memoizedProps=r,e.child;case 10:return qi(t,e,r=e.pendingProps.children,n),e.memoizedProps=r,e.child;case 15:return qi(t,e,(r=e.pendingProps).children,n),e.memoizedProps=r,e.child;case 12:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,e.memoizedProps=i,ci(e,o),null!==a){var u=a.value;if(0===(o=u===o&&(0!==u||1/u===1/o)||u!==u&&o!==o?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!Tr.current){e=Zi(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){if(null!==(u=a.firstContextDependency))do{if(u.context===r&&0!==(u.observedBits&o)){if(2===a.tag||3===a.tag){var l=Kr(n);l.tag=2,Jr(a,l)}(0===a.expirationTime||a.expirationTime>n)&&(a.expirationTime=n),null!==(l=a.alternate)&&(0===l.expirationTime||l.expirationTime>n)&&(l.expirationTime=n);for(var c=a.return;null!==c;){if(l=c.alternate,0===c.childExpirationTime||c.childExpirationTime>n)c.childExpirationTime=n,null!==l&&(0===l.childExpirationTime||l.childExpirationTime>n)&&(l.childExpirationTime=n);else{if(null===l||!(0===l.childExpirationTime||l.childExpirationTime>n))break;l.childExpirationTime=n}c=c.return}}l=a.child,u=u.next}while(null!==u);else l=12===a.tag&&a.type===e.type?null:a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===e){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}}qi(t,e,i.children,n),e=e.child}return e;case 11:return o=e.type,i=(r=e.pendingProps).children,fi(e),i=i(o=di(o,r.unstable_observedBits)),e.effectTag|=1,qi(t,e,i,n),e.memoizedProps=r,e.child;default:s("156")}}function eo(t){t.effectTag|=4}var no=void 0,ro=void 0,io=void 0;function oo(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=ue(n)),null!==n&&ae(n.type),e=e.value,null!==t&&2===t.tag&&ae(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function so(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(e){Do(t,e)}else e.current=null}function ao(t){switch("function"===typeof Rr&&Rr(t),t.tag){case 2:case 3:so(t);var e=t.stateNode;if("function"===typeof e.componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Do(t,e)}break;case 7:so(t);break;case 6:co(t)}}function uo(t){return 7===t.tag||5===t.tag||6===t.tag}function lo(t){t:{for(var e=t.return;null!==e;){if(uo(e)){var n=e;break t}e=e.return}s("160"),n=void 0}var r=e=void 0;switch(n.tag){case 7:e=n.stateNode,r=!1;break;case 5:case 6:e=n.stateNode.containerInfo,r=!0;break;default:s("161")}16&n.effectTag&&(ir(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||uo(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;7!==n.tag&&8!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||6===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){if(7===i.tag||8===i.tag)if(n)if(r){var o=e,a=i.stateNode,u=n;8===o.nodeType?o.parentNode.insertBefore(a,u):o.insertBefore(a,u)}else e.insertBefore(i.stateNode,n);else r?(o=e,a=i.stateNode,8===o.nodeType?(u=o.parentNode).insertBefore(a,o):(u=o).appendChild(a),null===u.onclick&&(u.onclick=fr)):e.appendChild(i.stateNode);else if(6!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function co(t){for(var e=t,n=!1,r=void 0,i=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&s("160"),n.tag){case 7:r=n.stateNode,i=!1;break t;case 5:case 6:r=n.stateNode.containerInfo,i=!0;break t}n=n.return}n=!0}if(7===e.tag||8===e.tag){t:for(var o=e,a=o;;)if(ao(a),null!==a.child&&6!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=r,a=e.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(e.stateNode)}else if(6===e.tag?(r=e.stateNode.containerInfo,i=!0):ao(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;6===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function ho(t,e){switch(e.tag){case 2:case 3:break;case 7:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[R]=r,"input"===t&&"radio"===r.type&&null!=r.name&&xe(n,r),cr(t,i),e=cr(t,r),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?ar(n,u):"dangerouslySetInnerHTML"===a?rr(n,u):"children"===a?ir(n,u):me(n,a,u,e)}switch(t){case"input":_e(n,r);break;case"textarea":Kn(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?$n(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?$n(n,!!r.multiple,r.defaultValue,!0):$n(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 8:null===e.stateNode&&s("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 5:case 15:case 16:break;default:s("163")}}function fo(t,e,n){(n=Kr(n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ps(r),oo(t,e)},n}function po(t,e,n){(n=Kr(n)).tag=3;var r=t.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){null===Eo?Eo=new Set([this]):Eo.add(this);var n=e.value,r=e.stack;oo(t,e),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function go(t){switch(t.tag){case 2:Or(t.type)&&Mr();var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return Or(t.type._reactResult)&&Mr(),1024&(e=t.effectTag)?(t.effectTag=-1025&e|64,t):null;case 5:return wi(),Ar(),0!==(64&(e=t.effectTag))&&s("285"),t.effectTag=-1025&e|64,t;case 7:return _i(t),null;case 16:return 1024&(e=t.effectTag)?(t.effectTag=-1025&e|64,t):null;case 6:return wi(),null;case 12:return hi(t),null;default:return null}}no=function(){},ro=function(t,e,n,r,o){var s=t.memoizedProps;if(s!==r){var a=e.stateNode;switch(yi(gi.current),t=null,n){case"input":s=be(a,s),r=be(a,r),t=[];break;case"option":s=Hn(a,s),r=Hn(a,r),t=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":s=Yn(a,s),r=Yn(a,r),t=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(a.onclick=fr)}lr(n,r),a=n=void 0;var u=null;for(n in s)if(!r.hasOwnProperty(n)&&s.hasOwnProperty(n)&&null!=s[n])if("style"===n){var l=s[n];for(a in l)l.hasOwnProperty(a)&&(u||(u={}),u[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var c=r[n];if(l=null!=s?s[n]:void 0,r.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if("style"===n)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(u||(u={}),u[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(u||(u={}),u[a]=c[a])}else u||(t||(t=[]),t.push(n,u)),u=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(n,""+c)):"children"===n?l===c||"string"!==typeof c&&"number"!==typeof c||(t=t||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&hr(o,n),t||l===c||(t=[])):(t=t||[]).push(n,c))}u&&(t=t||[]).push("style",u),o=t,(e.updateQueue=o)&&eo(e)}},io=function(t,e,n,r){n!==r&&eo(e)};var vo={readContext:di},mo=Ht.ReactCurrentOwner,yo=0,bo=0,wo=!1,xo=null,_o=null,So=0,ko=!1,To=null,Co=!1,Eo=null;function Oo(){if(null!==xo)for(var t=xo.return;null!==t;){var e=t;switch(e.tag){case 2:var n=e.type.childContextTypes;null!==n&&void 0!==n&&Mr();break;case 3:null!==(n=e.type._reactResult.childContextTypes)&&void 0!==n&&Mr();break;case 5:wi(),Ar();break;case 7:_i(e);break;case 6:wi();break;case 12:hi(e)}t=t.return}_o=null,So=0,ko=!1,xo=null}function Mo(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(512&t.effectTag)){var o=e,a=(e=t).pendingProps;switch(e.tag){case 0:case 1:break;case 2:Or(e.type)&&Mr();break;case 3:Or(e.type._reactResult)&&Mr();break;case 5:wi(),Ar(),(a=e.stateNode).pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==o&&null!==o.child||(Ui(e),e.effectTag&=-3),no(e);break;case 7:_i(e);var u=yi(mi.current),l=e.type;if(null!==o&&null!=e.stateNode)ro(o,e,l,a,u),o.ref!==e.ref&&(e.effectTag|=128);else if(a){var c=yi(gi.current);if(Ui(e)){o=(a=e).stateNode;var h=a.type,f=a.memoizedProps,d=u;switch(o[I]=a,o[R]=f,l=void 0,u=h){case"iframe":case"object":Tn("load",o);break;case"video":case"audio":for(h=0;h<rt.length;h++)Tn(rt[h],o);break;case"source":Tn("error",o);break;case"img":case"image":case"link":Tn("error",o),Tn("load",o);break;case"form":Tn("reset",o),Tn("submit",o);break;case"details":Tn("toggle",o);break;case"input":we(o,f),Tn("invalid",o),hr(d,"onChange");break;case"select":o._wrapperState={wasMultiple:!!f.multiple},Tn("invalid",o),hr(d,"onChange");break;case"textarea":Xn(o,f),Tn("invalid",o),hr(d,"onChange")}for(l in lr(u,f),h=null,f)f.hasOwnProperty(l)&&(c=f[l],"children"===l?"string"===typeof c?o.textContent!==c&&(h=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(h=["children",""+c]):b.hasOwnProperty(l)&&null!=c&&hr(d,l));switch(u){case"input":Gt(o),Se(o,f,!0);break;case"textarea":Gt(o),Qn(o);break;case"select":case"option":break;default:"function"===typeof f.onClick&&(o.onclick=fr)}l=h,a.updateQueue=l,(a=null!==l)&&eo(e)}else{f=e,o=l,d=a,h=9===u.nodeType?u:u.ownerDocument,c===Jn.html&&(c=Zn(o)),c===Jn.html?"script"===o?((o=h.createElement("div")).innerHTML="<script><\/script>",h=o.removeChild(o.firstChild)):"string"===typeof d.is?h=h.createElement(o,{is:d.is}):(h=h.createElement(o),"select"===o&&d.multiple&&(h.multiple=!0)):h=h.createElementNS(c,o),(o=h)[I]=f,o[R]=a;t:for(f=o,d=e,h=d.child;null!==h;){if(7===h.tag||8===h.tag)f.appendChild(h.stateNode);else if(6!==h.tag&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===d)break;for(;null===h.sibling;){if(null===h.return||h.return===d)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}d=o;var p=u,g=cr(h=l,f=a);switch(h){case"iframe":case"object":Tn("load",d),u=f;break;case"video":case"audio":for(u=0;u<rt.length;u++)Tn(rt[u],d);u=f;break;case"source":Tn("error",d),u=f;break;case"img":case"image":case"link":Tn("error",d),Tn("load",d),u=f;break;case"form":Tn("reset",d),Tn("submit",d),u=f;break;case"details":Tn("toggle",d),u=f;break;case"input":we(d,f),u=be(d,f),Tn("invalid",d),hr(p,"onChange");break;case"option":u=Hn(d,f);break;case"select":d._wrapperState={wasMultiple:!!f.multiple},u=i({},f,{value:void 0}),Tn("invalid",d),hr(p,"onChange");break;case"textarea":Xn(d,f),u=Yn(d,f),Tn("invalid",d),hr(p,"onChange");break;default:u=f}lr(h,u),c=void 0;var v=h,m=d,y=u;for(c in y)if(y.hasOwnProperty(c)){var w=y[c];"style"===c?ar(m,w):"dangerouslySetInnerHTML"===c?null!=(w=w?w.__html:void 0)&&rr(m,w):"children"===c?"string"===typeof w?("textarea"!==v||""!==w)&&ir(m,w):"number"===typeof w&&ir(m,""+w):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=w&&hr(p,c):null!=w&&me(m,c,w,g))}switch(h){case"input":Gt(d),Se(d,f,!1);break;case"textarea":Gt(d),Qn(d);break;case"option":null!=f.value&&d.setAttribute("value",""+ye(f.value));break;case"select":(u=d).multiple=!!f.multiple,null!=(d=f.value)?$n(u,!!f.multiple,d,!1):null!=f.defaultValue&&$n(u,!!f.multiple,f.defaultValue,!0);break;default:"function"===typeof u.onClick&&(d.onclick=fr)}(a=gr(l,a))&&eo(e),e.stateNode=o}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&s("166");break;case 8:o&&null!=e.stateNode?io(o,e,o.memoizedProps,a):("string"!==typeof a&&(null===e.stateNode&&s("166")),o=yi(mi.current),yi(gi.current),Ui(e)?(l=(a=e).stateNode,o=a.memoizedProps,l[I]=a,(a=l.nodeValue!==o)&&eo(e)):(l=e,(a=(9===o.nodeType?o:o.ownerDocument).createTextNode(a))[I]=l,e.stateNode=a));break;case 13:case 14:case 16:case 9:case 10:case 15:break;case 6:wi(),no(e);break;case 12:hi(e);break;case 11:break;case 4:s("167");default:s("156")}if(e=xo=null,a=t,1073741823===So||1073741823!==a.childExpirationTime){for(l=0,o=a.child;null!==o;)u=o.expirationTime,f=o.childExpirationTime,(0===l||0!==u&&u<l)&&(l=u),(0===l||0!==f&&f<l)&&(l=f),o=o.sibling;a.childExpirationTime=l}if(null!==e)return e;null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=go(t)))return t.effectTag&=511,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512)}if(null!==r)return r;if(null===n)break;t=n}return null}function Ao(t){var e=to(t.alternate,t,So);return null===e&&(e=Mo(t)),mo.current=null,e}function Po(t,e,n){wo&&s("243"),wo=!0,mo.currentDispatcher=vo;var r=t.nextExpirationTimeToWorkOn;r===So&&t===_o&&null!==xo||(Oo(),So=r,xo=zr((_o=t).current,null,So),t.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(e)for(;null!==xo&&!ds();)xo=Ao(xo);else for(;null!==xo;)xo=Ao(xo)}catch(t){if(null===xo)i=!0,ps(t);else{null===xo&&s("271");var o=xo,a=o.return;if(null!==a){t:{var u=a,l=o,c=t;a=So,l.effectTag|=512,l.firstEffect=l.lastEffect=null,ko=!0,c=oi(c,l);do{switch(u.tag){case 5:u.effectTag|=1024,u.expirationTime=a,Zr(u,a=fo(u,c,a));break t;case 2:case 3:l=c;var h=u.stateNode;if(0===(64&u.effectTag)&&null!==h&&"function"===typeof h.componentDidCatch&&(null===Eo||!Eo.has(h))){u.effectTag|=1024,u.expirationTime=a,Zr(u,a=po(u,l,a));break t}}u=u.return}while(null!==u)}xo=Mo(o);continue}i=!0,ps(t)}}break}if(wo=!1,li=ui=ai=mo.currentDispatcher=null,i)_o=null,t.finishedWork=null;else if(null!==xo)t.finishedWork=null;else{if(null===(e=t.current.alternate)&&s("281"),_o=null,ko){if(i=t.latestPendingTime,o=t.latestSuspendedTime,a=t.latestPingedTime,0!==i&&i>r||0!==o&&o>r||0!==a&&a>r)return t.didError=!1,0!==(n=t.latestPingedTime)&&n<=r&&(t.latestPingedTime=0),n=t.earliestPendingTime,e=t.latestPendingTime,n===r?t.earliestPendingTime=e===r?t.latestPendingTime=0:e:e===r&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,e=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=r:n>r?t.earliestSuspendedTime=r:e<r&&(t.latestSuspendedTime=r),Hr(r,t),void(t.expirationTime=t.expirationTime);if(!t.didError&&!n)return t.didError=!0,t.nextExpirationTimeToWorkOn=r,r=t.expirationTime=1,void(t.expirationTime=r)}t.pendingCommitExpirationTime=r,t.finishedWork=e}}function Do(t,e){var n;t:{for(wo&&!Co&&s("263"),n=t.return;null!==n;){switch(n.tag){case 2:case 3:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof r.componentDidCatch&&(null===Eo||!Eo.has(r))){Jr(n,t=po(n,t=oi(e,t),1)),Lo(n,1),n=void 0;break t}break;case 5:Jr(n,t=fo(n,t=oi(e,t),1)),Lo(n,1),n=void 0;break t}n=n.return}5===t.tag&&(Jr(t,n=fo(t,n=oi(e,t),1)),Lo(t,1)),n=void 0}return n}function No(t,e){return 0!==bo?t=bo:wo?t=Co?1:So:1&e.mode?(t=Ko?2+10*(1+((t-2+15)/10|0)):2+25*(1+((t-2+500)/25|0)),null!==_o&&t===So&&(t+=1)):t=1,Ko&&(0===Vo||t>Vo)&&(Vo=t),t}function Lo(t,e){t:{(0===t.expirationTime||t.expirationTime>e)&&(t.expirationTime=e);var n=t.alternate;null!==n&&(0===n.expirationTime||n.expirationTime>e)&&(n.expirationTime=e);var r=t.return;if(null===r&&5===t.tag)t=t.stateNode;else{for(;null!==r;){if(n=r.alternate,(0===r.childExpirationTime||r.childExpirationTime>e)&&(r.childExpirationTime=e),null!==n&&(0===n.childExpirationTime||n.childExpirationTime>e)&&(n.childExpirationTime=e),null===r.return&&5===r.tag){t=r.stateNode;break t}r=r.return}t=null}}null!==t&&(!wo&&0!==So&&e<So&&Oo(),qr(t,e),wo&&!Co&&_o===t||(e=t,t=t.expirationTime,null===e.nextScheduledRoot?(e.expirationTime=t,null===jo?(Ro=jo=e,e.nextScheduledRoot=e):(jo=jo.nextScheduledRoot=e).nextScheduledRoot=Ro):(0===(n=e.expirationTime)||t<n)&&(e.expirationTime=t),zo||(Yo?Xo&&(Wo=e,Uo=1,hs(e,1,!0)):1===t?cs(1,null):ss(e,t))),ns>es&&(ns=0,s("185")))}function Io(t,e,n,r,i){var o=bo;bo=1;try{return t(e,n,r,i)}finally{bo=o}}var Ro=null,jo=null,Fo=0,Bo=void 0,zo=!1,Wo=null,Uo=0,Vo=0,Go=!1,qo=!1,Ho=null,$o=null,Yo=!1,Xo=!1,Ko=!1,Qo=null,Jo=o.unstable_now(),Zo=2+(Jo/10|0),ts=Zo,es=50,ns=0,rs=null,is=1;function os(){Zo=2+((o.unstable_now()-Jo)/10|0)}function ss(t,e){if(0!==Fo){if(e>Fo)return;null!==Bo&&o.unstable_cancelScheduledWork(Bo)}Fo=e,t=o.unstable_now()-Jo,Bo=o.unstable_scheduleWork(ls,{timeout:10*(e-2)-t})}function as(){return zo?ts:(us(),0!==Uo&&1073741823!==Uo||(os(),ts=Zo),ts)}function us(){var t=0,e=null;if(null!==jo)for(var n=jo,r=Ro;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===jo)&&s("244"),r===r.nextScheduledRoot){Ro=jo=r.nextScheduledRoot=null;break}if(r===Ro)Ro=i=r.nextScheduledRoot,jo.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===jo){(jo=n).nextScheduledRoot=Ro,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===t||i<t)&&(t=i,e=r),r===jo)break;if(1===t)break;n=r,r=r.nextScheduledRoot}}Wo=e,Uo=t}function ls(t){if(t.didTimeout&&null!==Ro){os();var e=Ro;do{var n=e.expirationTime;0!==n&&Zo>=n&&(e.nextExpirationTimeToWorkOn=Zo),e=e.nextScheduledRoot}while(e!==Ro)}cs(0,t)}function cs(t,e){if($o=e,us(),null!==$o)for(os(),ts=Zo;null!==Wo&&0!==Uo&&(0===t||t>=Uo)&&(!Go||Zo>=Uo);)hs(Wo,Uo,Zo>=Uo),us(),os(),ts=Zo;else for(;null!==Wo&&0!==Uo&&(0===t||t>=Uo);)hs(Wo,Uo,!0),us();if(null!==$o&&(Fo=0,Bo=null),0!==Uo&&ss(Wo,Uo),$o=null,Go=!1,ns=0,rs=null,null!==Qo)for(t=Qo,Qo=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){qo||(qo=!0,Ho=t)}}if(qo)throw t=Ho,Ho=null,qo=!1,t}function hs(t,e,n){if(zo&&s("245"),zo=!0,null===$o||n){var r=t.finishedWork;null!==r?fs(t,r,e):(t.finishedWork=null,Po(t,!1,n),null!==(r=t.finishedWork)&&fs(t,r,e))}else null!==(r=t.finishedWork)?fs(t,r,e):(t.finishedWork=null,Po(t,!0,n),null!==(r=t.finishedWork)&&(ds()?t.finishedWork=r:fs(t,r,e)));zo=!1}function fs(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Qo?Qo=[r]:Qo.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===rs?ns++:(rs=t,ns=0),Co=wo=!0,t.current===e&&s("177"),0===(n=t.pendingCommitExpirationTime)&&s("261"),t.pendingCommitExpirationTime=0,r=e.expirationTime;var i=e.childExpirationTime;if(r=0===r||0!==i&&i<r?i:r,t.didError=!1,0===r?(t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0):(0!==(i=t.latestPendingTime)&&(i<r?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime<r&&(t.earliestPendingTime=t.latestPendingTime)),0===(i=t.earliestSuspendedTime)?qr(t,r):r>t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,qr(t,r)):r<i&&qr(t,r)),Hr(0,t),mo.current=null,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,r=e.firstEffect):r=e:r=e.firstEffect,dr=kn,jn(i=Rn())){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{var a=(o=(o=i.ownerDocument)&&o.defaultView||window).getSelection&&o.getSelection();if(a&&0!==a.rangeCount){o=a.anchorNode;var u=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{o.nodeType,l.nodeType}catch(t){o=null;break t}var c=0,h=-1,f=-1,d=0,p=0,g=i,v=null;e:for(;;){for(var m;g!==o||0!==u&&3!==g.nodeType||(h=c+u),g!==l||0!==a&&3!==g.nodeType||(f=c+a),3===g.nodeType&&(c+=g.nodeValue.length),null!==(m=g.firstChild);)v=g,g=m;for(;;){if(g===i)break e;if(v===o&&++d===u&&(h=c),v===l&&++p===a&&(f=c),null!==(m=g.nextSibling))break;v=(g=v).parentNode}g=m}o=-1===h||-1===f?null:{start:h,end:f}}else o=null}o=o||{start:0,end:0}}else o=null;for(pr={focusedElem:i,selectionRange:o},kn=!1,To=r;null!==To;){i=!1,o=void 0;try{for(;null!==To;){if(256&To.effectTag){var y=To.alternate;t:switch(u=To,u.tag){case 2:case 3:if(256&u.effectTag&&null!==y){var b=y.memoizedProps,w=y.memoizedState,x=u.stateNode;x.props=u.memoizedProps,x.state=u.memoizedState;var _=x.getSnapshotBeforeUpdate(b,w);x.__reactInternalSnapshotBeforeUpdate=_}break t;case 5:case 7:case 8:case 6:break t;default:s("163")}}To=To.nextEffect}}catch(t){i=!0,o=t}i&&(null===To&&s("178"),Do(To,o),null!==To&&(To=To.nextEffect))}for(To=r;null!==To;){y=!1,b=void 0;try{for(;null!==To;){var S=To.effectTag;if(16&S&&ir(To.stateNode,""),128&S){var k=To.alternate;if(null!==k){var T=k.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(14&S){case 2:lo(To),To.effectTag&=-3;break;case 6:lo(To),To.effectTag&=-3,ho(To.alternate,To);break;case 4:ho(To.alternate,To);break;case 8:co(w=To),w.return=null,w.child=null,w.alternate&&(w.alternate.child=null,w.alternate.return=null)}To=To.nextEffect}}catch(t){y=!0,b=t}y&&(null===To&&s("178"),Do(To,b),null!==To&&(To=To.nextEffect))}if(T=pr,k=Rn(),S=T.focusedElem,b=T.selectionRange,k!==S&&S&&S.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(S.ownerDocument.documentElement,S)){null!==b&&jn(S)&&(k=b.start,void 0===(T=b.end)&&(T=k),"selectionStart"in S?(S.selectionStart=k,S.selectionEnd=Math.min(T,S.value.length)):(k=((y=S.ownerDocument||document)?y.defaultView:window).getSelection(),w=S.textContent.length,T=Math.min(b.start,w),b=void 0===b.end?T:Math.min(b.end,w),!k.extend&&T>b&&(w=b,b=T,T=w),w=In(S,T),x=In(S,b),w&&x&&(1!==k.rangeCount||k.anchorNode!==w.node||k.anchorOffset!==w.offset||k.focusNode!==x.node||k.focusOffset!==x.offset)&&((y=y.createRange()).setStart(w.node,w.offset),k.removeAllRanges(),T>b?(k.addRange(y),k.extend(x.node,x.offset)):(y.setEnd(x.node,x.offset),k.addRange(y))))),k=[];for(T=S;T=T.parentNode;)1===T.nodeType&&k.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof S.focus&&S.focus(),S=0;S<k.length;S++)(T=k[S]).element.scrollLeft=T.left,T.element.scrollTop=T.top}for(pr=null,kn=!!dr,dr=null,t.current=e,To=r;null!==To;){r=!1,S=void 0;try{for(k=n;null!==To;){var C=To.effectTag;if(36&C){var E=To.alternate;switch(y=k,(T=To).tag){case 2:case 3:var O=T.stateNode;if(4&T.effectTag)if(null===E)O.props=T.memoizedProps,O.state=T.memoizedState,O.componentDidMount();else{var M=E.memoizedProps,A=E.memoizedState;O.props=T.memoizedProps,O.state=T.memoizedState,O.componentDidUpdate(M,A,O.__reactInternalSnapshotBeforeUpdate)}var P=T.updateQueue;null!==P&&(O.props=T.memoizedProps,O.state=T.memoizedState,ri(0,P,O));break;case 5:var D=T.updateQueue;if(null!==D){if(b=null,null!==T.child)switch(T.child.tag){case 7:b=T.child.stateNode;break;case 2:case 3:b=T.child.stateNode}ri(0,D,b)}break;case 7:var N=T.stateNode;null===E&&4&T.effectTag&&gr(T.type,T.memoizedProps)&&N.focus();break;case 8:case 6:case 15:case 16:break;default:s("163")}}if(128&C){var L=To.ref;if(null!==L){var I=To.stateNode;switch(To.tag){case 7:var R=I;break;default:R=I}"function"===typeof L?L(R):L.current=R}}var j=To.nextEffect;To.nextEffect=null,To=j}}catch(t){r=!0,S=t}r&&(null===To&&s("178"),Do(To,S),null!==To&&(To=To.nextEffect))}wo=Co=!1,"function"===typeof Ir&&Ir(e.stateNode),C=e.expirationTime,e=e.childExpirationTime,0===(e=0===C||0!==e&&e<C?e:C)&&(Eo=null),t.expirationTime=e,t.finishedWork=null}function ds(){return!!Go||!(null===$o||$o.timeRemaining()>is)&&(Go=!0)}function ps(t){null===Wo&&s("246"),Wo.expirationTime=0,qo||(qo=!0,Ho=t)}function gs(t,e){var n=Yo;Yo=!0;try{return t(e)}finally{(Yo=n)||zo||cs(1,null)}}function vs(t,e){if(Yo&&!Xo){Xo=!0;try{return t(e)}finally{Xo=!1}}return t(e)}function ms(t,e,n){if(Ko)return t(e,n);Yo||zo||0===Vo||(cs(Vo,null),Vo=0);var r=Ko,i=Yo;Yo=Ko=!0;try{return t(e,n)}finally{Ko=r,(Yo=i)||zo||cs(1,null)}}function ys(t,e,n,r,i){var o=e.current;return n=function(t){if(!t)return Sr;t=t._reactInternalFiber;t:{(2!==en(t)||2!==t.tag&&3!==t.tag)&&s("170");var e=t;do{switch(e.tag){case 5:e=e.stateNode.context;break t;case 2:if(Or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}break;case 3:if(Or(e.type._reactResult)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);s("171"),e=void 0}if(2===t.tag){var n=t.type;if(Or(n))return Dr(t,n,e)}else if(3===t.tag&&Or(n=t.type._reactResult))return Dr(t,n,e);return e}(n),null===e.context?e.context=n:e.pendingContext=n,e=i,(i=Kr(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Jr(o,i),Lo(o,r),r}function bs(t,e,n,r){var i=e.current;return ys(t,e,n,i=No(as(),i),r)}function ws(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 7:default:return t.child.stateNode}}function xs(t){var e=2+25*(1+((as()-2+500)/25|0));e<=yo&&(e=yo+1),this._expirationTime=yo=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function _s(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ss(t,e,n){t={current:e=new Fr(5,null,null,e?3:0),containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function ks(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ts(t,e,n,r,i){ks(n)||s("200");var o=n._reactRootContainer;if(o){if("function"===typeof i){var a=i;i=function(){var t=ws(o._internalRoot);a.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Ss(t,!1,e)}(n,r),"function"===typeof i){var u=i;i=function(){var t=ws(o._internalRoot);u.call(t)}}vs(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)})}return ws(o._internalRoot)}function Cs(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return ks(e)||s("200"),function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Kt,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Ot=function(t,e,n){switch(e){case"input":if(_e(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=z(r);i||s("90"),qt(r),_e(r,i)}}}break;case"textarea":Kn(t,n);break;case"select":null!=(e=n.value)&&$n(t,!!n.multiple,e,!1)}},xs.prototype.render=function(t){this._defer||s("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new _s;return ys(t,e,null,n,r._onCommit),r},xs.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},xs.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||s("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)r=i,i=i._next;null===r&&s("251"),r._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,e=n,zo&&s("253"),Wo=t,Uo=e,hs(t,e,!0),cs(1,null),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},xs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},_s.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},_s.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&s("191",n),n()}}},Ss.prototype.render=function(t,e){var n=this._internalRoot,r=new _s;return null!==(e=void 0===e?null:e)&&r.then(e),bs(t,n,null,r._onCommit),r},Ss.prototype.unmount=function(t){var e=this._internalRoot,n=new _s;return null!==(t=void 0===t?null:t)&&n.then(t),bs(null,e,null,n._onCommit),n},Ss.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new _s;return null!==(n=void 0===n?null:n)&&i.then(n),bs(e,r,t,i._onCommit),i},Ss.prototype.createBatch=function(){var t=new xs(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime<=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},Lt=gs,It=ms,Rt=function(){zo||0===Vo||(cs(Vo,null),Vo=0)};var Es={createPortal:Cs,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?s("188"):s("268",Object.keys(t))),t=null===(t=rn(e))?null:t.stateNode},hydrate:function(t,e,n){return Ts(null,t,e,!0,n)},render:function(t,e,n){return Ts(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return(null==t||void 0===t._reactInternalFiber)&&s("38"),Ts(t,e,n,!1,r)},unmountComponentAtNode:function(t){return ks(t)||s("40"),!!t._reactRootContainer&&(vs(function(){Ts(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Cs.apply(void 0,arguments)},unstable_batchedUpdates:gs,unstable_interactiveUpdates:ms,flushSync:function(t,e){zo&&s("187");var n=Yo;Yo=!0;try{return Io(t,e)}finally{Yo=n,cs(1,null)}},unstable_flushControlled:function(t){var e=Yo;Yo=!0;try{Io(t)}finally{(Yo=e)||zo||cs(1,null)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[F,B,z,P.injectEventPluginsByName,y,H,function(t){C(t,q)},Dt,Nt,On,N]},unstable_createRoot:function(t,e){return ks(t)||s("278"),new Ss(t,!0,null!=e&&!0===e.hydrate)}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Ir=jr(function(t){return e.onCommitFiberRoot(n,t)}),Rr=jr(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}})(i({},t,{findHostInstanceByFiber:function(t){return null===(t=rn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:j,bundleType:0,version:"16.5.1",rendererPackageName:"react-dom"});var Os={default:Es},Ms=Os&&Es||Os;t.exports=Ms.default||Ms},function(t,e,n){"use strict";t.exports=n(84)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i=Date,o="function"===typeof setTimeout?setTimeout:void 0,s="function"===typeof clearTimeout?clearTimeout:void 0,a="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,u="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0,l="object"===typeof performance&&"function"===typeof performance.now;if(e.unstable_now=void 0,l){var c=performance;e.unstable_now=function(){return c.now()}}else e.unstable_now=function(){return i.now()};if(e.unstable_scheduleWork=void 0,e.unstable_cancelScheduledWork=void 0,r){var h=null,f=null,d=-1,p=!1,g=!1,v=void 0,m=void 0,y=function(t){v=a(function(e){s(m),t(e)}),m=o(function(){u(v),t(e.unstable_now())},100)},b=0,w=33,x=33,_={didTimeout:!1,timeRemaining:function(){var t=b-e.unstable_now();return 0<t?t:0}},S=function(t,n){var r=t.scheduledCallback,i=!1;try{r(n),i=!0}finally{e.unstable_cancelScheduledWork(t),i||(p=!0,window.postMessage(k,"*"))}},k="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===k&&(p=!1,null!==h)){if(null!==h){var n=e.unstable_now();if(!(-1===d||d>n)){t=-1;for(var r=[],i=h;null!==i;){var o=i.timeoutTime;-1!==o&&o<=n?r.push(i):-1!==o&&(-1===t||o<t)&&(t=o),i=i.next}if(0<r.length)for(_.didTimeout=!0,n=0,i=r.length;n<i;n++)S(r[n],_);d=t}}for(t=e.unstable_now();0<b-t&&null!==h;)t=h,_.didTimeout=!1,S(t,_),t=e.unstable_now();null===h||g||(g=!0,y(T))}},!1);var T=function(t){g=!1;var e=t-b+x;e<x&&w<x?(8>e&&(e=8),x=e<w?w:e):w=e,b=t+x,p||(p=!0,window.postMessage(k,"*"))};e.unstable_scheduleWork=function(t,n){var r=-1;return null!=n&&"number"===typeof n.timeout&&(r=e.unstable_now()+n.timeout),(-1===d||-1!==r&&r<d)&&(d=r),t={scheduledCallback:t,timeoutTime:r,prev:null,next:null},null===h?h=t:null!==(n=t.prev=f)&&(n.next=t),f=t,g||(g=!0,y(T)),t},e.unstable_cancelScheduledWork=function(t){if(null!==t.prev||h===t){var e=t.next,n=t.prev;t.next=null,t.prev=null,null!==e?null!==n?(n.next=e,e.prev=n):(e.prev=null,h=e):null!==n?(n.next=null,f=n):f=h=null}}}else{var C=new Map;e.unstable_scheduleWork=function(t){var e={scheduledCallback:t,timeoutTime:0,next:null,prev:null},n=o(function(){t({timeRemaining:function(){return 1/0},didTimeout:!1})});return C.set(t,n),e},e.unstable_cancelScheduledWork=function(t){var e=C.get(t.scheduledCallback);C.delete(t),s(e)}}},function(t,e){},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8);class i extends r.EventEmitter{constructor(t){super(),this.payload=t,this.active=!1,this.outgoingTransitions=[],this.incomingTransitions=[],this.onOutgoingTransitionFired=(t=>{if(!this.isActive())throw new Error("Received transition fired event while not active");{const{transition:e,event:n,source:r}=t,i=e.getToState();this.setIsActive(!1),i.setIsActive(!0)}})}getPayload(){return this.payload}setPayload(t){this.payload=t,this.emit("payloadChanged",{payload:t})}_getOutgoingTransitions(){return this.outgoingTransitions}_getIncomingTransitions(){return this.incomingTransitions}_addOutgoingTransition(t){this.outgoingTransitions.push(t),this.isActive()?(t.setEligible(!0),t.addListener("fire",this.onOutgoingTransitionFired)):t.setEligible(!1)}_removeOutgoingTransition(t){const e=this.outgoingTransitions.indexOf(t);return e>=0&&(this.outgoingTransitions.splice(e,1),this.isActive()&&(t.setEligible(!1),t.removeListener("fire",this.onOutgoingTransitionFired)),!0)}_addIncomingTransition(t){this.incomingTransitions.push(t)}_removeIncomingTransition(t){const e=this.incomingTransitions.indexOf(t);return e>=0&&(this.incomingTransitions.splice(e,1),!0)}isActive(){return this.active}setIsActive(t){this.active=t,this.isActive()?(this.addOutgoingTransitionListeners(),this.emit("active",{})):(this.removeOutgoingTransitionListeners(),this.emit("not_active",{}))}addOutgoingTransitionListeners(){this.outgoingTransitions.forEach(t=>{t.setEligible(!0),t.addListener("fire",this.onOutgoingTransitionFired)})}removeOutgoingTransitionListeners(){this.outgoingTransitions.forEach(t=>{t.setEligible(!1),t.removeListener("fire",this.onOutgoingTransitionFired)})}remove(){for(this.removeOutgoingTransitionListeners();this.incomingTransitions.length>0;)this.incomingTransitions[0].remove();for(;this.outgoingTransitions.length>0;)this.outgoingTransitions[0].remove();this.emit("removed",{})}}e.AbstractState=i;e.StartState=class extends i{constructor(t){super(t)}_addOutgoingTransition(t){if(this._getOutgoingTransitions().length>0)throw new Error("Can only have one outgoing transition from a start state");super._addOutgoingTransition(t)}_addIncomingTransition(t){throw new Error("Start states cannot have incoming transitions")}isStartState(){return!0}};e.State=class extends i{constructor(t){super(t)}isStartState(){return!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8);e.Transition=class extends r.EventEmitter{constructor(t,e,n,r){super(),this.fromState=t,this.toState=e,this.alias=n,this.payload=r,this.fromState._addOutgoingTransition(this),this.toState._addIncomingTransition(this)}getAlias(){return this.alias}setAlias(t){this.alias=t,this.emit("aliasChanged",{alias:t})}isEligible(){return this.eligible}setEligible(t){this.eligible=t}remove(){this.fromState._removeOutgoingTransition(this),this.toState._removeIncomingTransition(this),this.emit("removed",{})}getFromState(){return this.fromState}getToState(){return this.toState}fire(t,e){this.emit("fire",{transition:this,event:t,source:e})}setFromState(t){const e=this.fromState;try{this.fromState._removeOutgoingTransition(this)}catch(t){throw t}try{this.fromState=t,this.fromState._addOutgoingTransition(this),this.emit("fromStateChanged",{oldFrom:e,state:t})}catch(t){throw e._addOutgoingTransition(this),this.fromState=e,t}}setToState(t){const e=this.toState;try{this.toState._removeIncomingTransition(this)}catch(t){throw t}try{this.toState=t,this.toState._addIncomingTransition(this),this.emit("toStateChanged",{oldTo:e,state:t})}catch(t){throw e._addIncomingTransition(this),this.toState=e,t}}getPayload(){return this.payload}setPayload(t){this.payload=t,this.emit("payloadChanged",{payload:t})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(35),i=n(4);e.SDBBinding=class{constructor(t,e,n=null){this.doc=t,this.path=e,this.fsm=n,this.ignoreFSMChanges=!1,this.ignoreSDBChanges=!1,this.onDocEvent=((t,e,n)=>{this.ignoreSDBChanges||(null===t?this.initialize():"op"===t&&e.forEach(t=>{const{p:e}=t;if(i.isEqual(e.slice(0,this.path.length),this.path)){const n=e.slice(this.path.length);if(this.ignoreFSMChanges=!0,i.isEqual(n,[]))this.syncSDBToFSM();else if("states"===n[0]){const e=n[1];if(2===n.length){if(i.has(t,"od")&&this.fsm.removeState(e),i.has(t,"oi")){const{oi:n}=t,{payload:r,active:i}=n;this.fsm.addState(r,e),i&&this.fsm.setActiveState(e)}}else if(3===n.length)if("payload"===n[2]){if(i.has(t,"oi")){const{oi:n}=t;this.fsm.setStatePayload(e,n)}}else if("active"===n[2]&&i.has(t,"oi")){const{oi:n}=t;!0===n&&this.fsm.setActiveState(e)}}else if("transitions"===n[0]){const e=n[1];if(2===n.length){if(i.has(t,"oi")){const{oi:n}=t,{from:r,to:i,payload:o,alias:s}=n;this.fsm.addTransition(r,i,s,o,e)}i.has(t,"od")&&this.fsm.removeTransition(e)}else if(3===n.length)if("from"===n[2]){if(i.has(t,"oi")){const{oi:n}=t;this.fsm.setTransitionFrom(e,n)}}else if("to"===n[2]){if(i.has(t,"oi")){const{oi:n}=t;this.fsm.setTransitionTo(e,n)}}else if("alias"===n[2]){if(i.has(t,"oi")){const{oi:n}=t;this.fsm.setTransitionAlias(e,n)}}else if("payload"===n[2]&&i.has(t,"oi")){const{oi:n}=t;this.fsm.setTransitionPayload(e,n)}}else console.log(n);this.ignoreFSMChanges=!1}}))}),this.onStateAdded=(t=>{if(!this.ignoreFSMChanges){const{state:e,payload:n}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectInsertOp(this.path.concat("states",e),{payload:n,active:this.fsm.getActiveState()===e}),this.ignoreSDBChanges=!1}}),this.onStateRemoved=(t=>{if(!this.ignoreFSMChanges){const{state:e}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectDeleteOp(this.path.concat("states",e)),this.ignoreSDBChanges=!1}}),this.onActiveStateChanged=(t=>{if(!this.ignoreFSMChanges){const{state:e,oldActiveState:n}=t;this.ignoreSDBChanges=!0,n&&this.doc.submitObjectReplaceOp(this.path.concat("states",n,"active"),!1),this.doc.submitObjectReplaceOp(this.path.concat("states",e,"active"),!0),this.ignoreSDBChanges=!1}}),this.onTransitionAdded=(t=>{if(!this.ignoreFSMChanges){const{transition:e,from:n,to:r,payload:i,alias:o}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectInsertOp(this.path.concat("transitions",e),{from:n,to:r,payload:i,alias:o}),this.ignoreSDBChanges=!1}}),this.onStatePayloadChanged=(t=>{if(!this.ignoreFSMChanges){const{state:e,payload:n}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectReplaceOp(this.path.concat("states",e,"payload"),n),this.ignoreSDBChanges=!1}}),this.onTransitionPayloadChanged=(t=>{if(!this.ignoreFSMChanges){const{transition:e,payload:n}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectReplaceOp(this.path.concat("transitions",e,"payload"),n),this.ignoreSDBChanges=!1}}),this.onTransitionRemoved=(t=>{if(!this.ignoreFSMChanges){const{transition:e}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectDeleteOp(this.path.concat("transitions",e)),this.ignoreSDBChanges=!1}}),this.onTransitionToStateChanged=(t=>{if(!this.ignoreFSMChanges){const{transition:e,state:n}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectReplaceOp(this.path.concat("transitions",e,"to"),n),this.ignoreSDBChanges=!1}}),this.onTransitionFromStateChanged=(t=>{if(!this.ignoreFSMChanges){const{transition:e,state:n}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectReplaceOp(this.path.concat("transitions",e,"from"),n),this.ignoreSDBChanges=!1}}),this.onTransitionAliasChanged=(t=>{if(!this.ignoreFSMChanges){const{transition:e,alias:n}=t;this.ignoreSDBChanges=!0,this.doc.submitObjectReplaceOp(this.path.concat("transitions",e,"alias"),n),this.ignoreSDBChanges=!1}}),this.fsmProvided=!!this.fsm,this.fsm?this.fsmProvided=!0:(this.fsm=new r.FSM,this.fsmProvided=!1),this.subscribeToSDB()}destroy(){this.fsm.removeListener("stateAdded",this.onStateAdded),this.fsm.removeListener("stateRemoved",this.onStateRemoved),this.fsm.removeListener("transitionAdded",this.onTransitionAdded),this.fsm.removeListener("transitionRemoved",this.onTransitionRemoved),this.fsm.removeListener("activeStateChanged",this.onActiveStateChanged),this.fsm.removeListener("statePayloadChanged",this.onStatePayloadChanged),this.fsm.removeListener("statePayloadChanged",this.onStatePayloadChanged),this.fsm.removeListener("transitionAliasChanged",this.onTransitionAliasChanged),this.fsm.removeListener("transitionPayloadChanged",this.onTransitionPayloadChanged),this.fsm.removeListener("transitionToStateChanged",this.onTransitionToStateChanged),this.fsm.removeListener("transitionFromStateChanged",this.onTransitionFromStateChanged),this.unsubscribeFromSDB()}getFSM(){return this.fsm}unsubscribeFromSDB(){this.doc.unsubscribe(this.onDocEvent),this.ignoreSDBChanges=!0}subscribeToSDB(){this.doc.subscribe(this.onDocEvent)}initialize(){this.fsmProvided?this.syncFSMToSDB():this.syncSDBToFSM(),this.fsm.on("stateAdded",this.onStateAdded),this.fsm.on("stateRemoved",this.onStateRemoved),this.fsm.on("transitionAdded",this.onTransitionAdded),this.fsm.on("transitionRemoved",this.onTransitionRemoved),this.fsm.on("activeStateChanged",this.onActiveStateChanged),this.fsm.on("statePayloadChanged",this.onStatePayloadChanged),this.fsm.on("transitionAliasChanged",this.onTransitionAliasChanged),this.fsm.on("transitionPayloadChanged",this.onTransitionPayloadChanged),this.fsm.on("transitionToStateChanged",this.onTransitionToStateChanged),this.fsm.on("transitionFromStateChanged",this.onTransitionFromStateChanged)}syncFSMToSDB(){const t=this.fsm.serialize();this.ignoreSDBChanges=!0,this.doc.submitObjectReplaceOp(this.path,t),this.ignoreSDBChanges=!1}syncSDBToFSM(){const t=this.doc.traverse(this.path);t&&(this.ignoreFSMChanges=!0,r.FSM.deserialize(t,this.fsm),this.ignoreFSMChanges=!1)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(37),i=n(4);e.DagreBinding=class{constructor(t,e,n,i={}){this.fsm=t,this.stateOptions=e,this.transitionOptions=n,this.graphOptions=i,this.graph=new r.graphlib.Graph({multigraph:!0,directed:!0}),this.onStateAdded=(t=>{const{state:e}=t;this.graph.setNode(e,this.getStateOptions(e))}),this.onStateRemoved=(t=>{const{state:e}=t;this.graph.removeNode(e)}),this.onTransitionAdded=(t=>{const{transition:e,from:n,to:r}=t;this.graph.setEdge(n,r,this.getTransitionOptions(e),e)}),this.onTransitionRemoved=(t=>{const{transition:e,oldFrom:n,oldTo:r}=t;this.graph.removeEdge({name:e,v:n,w:r})}),this.onTransitionFromStateChanged=(t=>{const{oldFrom:e}=t,n=t.transition,r=e,i=this.fsm.getTransitionTo(n);this.graph.removeEdge({name:n,v:r,w:i}),this.graph.setEdge(this.fsm.getTransitionFrom(n),i,this.getTransitionOptions(n),n)}),this.onTransitionToStateChanged=(t=>{const{oldTo:e}=t,n=t.transition,r=this.fsm.getTransitionFrom(n),i=e;this.graph.removeEdge({name:n,v:r,w:i}),this.graph.setEdge(r,this.fsm.getTransitionTo(n),this.getTransitionOptions(n),n)}),this.graph.setGraph(i),this.fsm.getStates().forEach(t=>{this.graph.setNode(t,this.getStateOptions(t))}),this.fsm.getTransitions().forEach(t=>{const e=this.fsm.getTransitionFrom(t),n=this.fsm.getTransitionTo(t);this.graph.setEdge(e,n,this.getTransitionOptions(t),t)}),this.fsm.on("stateAdded",this.onStateAdded),this.fsm.on("stateRemoved",this.onStateRemoved),this.fsm.on("transitionAdded",this.onTransitionAdded),this.fsm.on("transitionRemoved",this.onTransitionRemoved),this.fsm.on("transitionToStateChanged",this.onTransitionToStateChanged),this.fsm.on("transitionFromStateChanged",this.onTransitionFromStateChanged)}getGraph(){return this.graph}getStateOptions(t){return i.isFunction(this.stateOptions)?this.stateOptions(t):this.stateOptions?i.clone(this.stateOptions):{}}getTransitionOptions(t){return i.isFunction(this.transitionOptions)?this.transitionOptions(t):this.transitionOptions?i.clone(this.transitionOptions):{}}}},function(t,e,n){var r=n(92);t.exports={Graph:r.Graph,json:n(94),alg:n(95),version:r.version}},function(t,e,n){t.exports={Graph:n(23),version:n(93)}},function(t,e){t.exports="2.1.5"},function(t,e,n){var r=n(5),i=n(23);t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}(t),edges:function(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},function(t,e,n){t.exports={components:n(96),dijkstra:n(38),dijkstraAll:n(97),findCycles:n(98),floydWarshall:n(99),isAcyclic:n(100),postorder:n(101),preorder:n(102),prim:n(103),tarjan:n(40),topsort:n(41)}},function(t,e,n){var r=n(5);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),function(t){e=[],o(t),e.length&&i.push(e)}),i}},function(t,e,n){var r=n(38),i=n(5);t.exports=function(t,e,n){return i.transform(t.nodes(),function(i,o){i[o]=r(t,o,e,n)},{})}},function(t,e,n){var r=n(5),i=n(40);t.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},function(t,e,n){var r=n(5);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(41);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(42);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(42);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(5),i=n(23),o=n(39);t.exports=function(t,e){var n,s=new i,a={},u=new o;function l(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var o=e(t);o<i&&(a[r]=n,u.decrease(r,o))}}if(0===t.nodeCount())return s;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),u.decrease(t.nodes()[0],0);var c=!1;for(;u.size()>0;){if(n=u.removeMin(),r.has(a,n))s.setEdge(n,a[n]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(n).forEach(l)}return s}},function(t,e,n){"use strict";var r=n(0),i=n(105),o=n(108),s=n(109),a=n(2).normalizeRanks,u=n(111),l=n(2).removeEmptyRanks,c=n(112),h=n(113),f=n(114),d=n(115),p=n(124),g=n(2),v=n(7).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new v({multigraph:!0,compound:!0}),n=C(t.graph());return e.setGraph(r.merge({},y,T(n,m),r.pick(n,b))),r.forEach(t.nodes(),function(n){var i=C(t.node(n));e.setNode(n,r.defaults(T(i,w),x)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=C(t.edge(n));e.setEdge(n,r.merge({},S,T(i,_),r.pick(i,k)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){c.run(t)}),e("    rank",function(){s(g.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};g.addDummyNode(t,"edge-proxy",o,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){l(t)}),e("    nestingGraph.cleanup",function(){c.cleanup(t)}),e("    normalizeRanks",function(){a(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){o.run(t)}),e("    parentDummyChains",function(){u(t)}),e("    addBorderSegments",function(){h(t)}),e("    order",function(){d(t)}),e("    insertSelfEdges",function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){f.adjust(t)}),e("    position",function(){p(t)}),e("    positionSelfEdges",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),s=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(o.y-i.y),n.x=s.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){o.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){f.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,u=s.marginy||0;function l(t){var r=t.x,s=t.y,a=t.width,u=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,s-u/2),o=Math.max(o,s+u/2)}r.forEach(t.nodes(),function(e){l(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&l(n)}),e-=a,i-=u,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var o=t.edge(n);r.forEach(o.points,function(t){t.x-=e,t.y-=i}),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)}),s.width=n-e+a,s.height=o-i+u}(t)}),e("    assignNodeIntersects",function(){!function(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(s,r))})}(t)}),e("    reversePoints",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){i.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],w=["width","height"],x={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},k=["labelpos"];function T(t,e){return r.mapValues(r.pick(t,e),Number)}function C(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},function(t,e,n){"use strict";var r=n(0),i=n(106);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function o(s){r.has(i,s)||(i[s]=!0,n[s]=!0,r.forEach(t.outEdges(s),function(t){r.has(n,t.w)?e.push(t):o(t.w)}),delete n[s])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},function(t,e,n){var r=n(0),i=n(7).Graph,o=n(107);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,s=0,a=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),a=Math.max(a,n.node(t.v).out+=i),s=Math.max(s,n.node(t.w).in+=i)});var l=r.range(a+s+3).map(function(){return new o}),c=s+1;return r.forEach(n.nodes(),function(t){u(l,c,n.node(t))}),{graph:n,buckets:l,zeroIdx:c}}(t,e||s),l=function(t,e,n){var r,i=[],o=e[e.length-1],s=e[0];for(;t.nodeCount();){for(;r=s.dequeue();)a(t,e,n,r);for(;r=o.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(l,function(e){return t.outEdges(e.v,e.w)}),!0)};var s=r.constant(1);function a(t,e,n,i,o){var s=o?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),a=t.node(r.v);o&&s.push({v:r.v,w:r.w}),a.out-=i,u(e,n,a)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),o=r.w,s=t.node(o);s.in-=i,u(e,n,s)}),t.removeNode(i.v),s}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,i)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(0),i=n(2);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n,r,o,s=e.v,a=t.node(s).rank,u=e.w,l=t.node(u).rank,c=e.name,h=t.edge(e),f=h.labelRank;if(l===a+1)return;for(t.removeEdge(e),o=0,++a;a<l;++o,++a)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},n=i.addDummyNode(t,"edge",r,"_d"),a===f&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(s,n,{weight:h.weight},c),0===o&&t.graph().dummyChains.push(n),s=n;t.setEdge(s,u,{weight:h.weight},c)}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}}},function(t,e,n){"use strict";var r=n(18).longestPath,i=n(43),o=n(110);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":a(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":s(t);break;default:a(t)}};var s=r;function a(t){o(t)}},function(t,e,n){"use strict";var r=n(0),i=n(43),o=n(18).slack,s=n(18).longestPath,a=n(7).alg.preorder,u=n(7).alg.postorder,l=n(2).simplify;function c(t){t=l(t),s(t);var e,n=i(t);for(d(n),h(n,t);e=p(n);)v(n,t,e,g(n,t,e))}function h(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=f(t,e,n)}(t,e,n)})}function f(t,e,n){var i=t.node(n).parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,r.forEach(e.nodeEdges(n),function(r){var s,u,l=r.v===n,c=l?r.w:r.v;if(c!==i){var h=l===o,f=e.edge(r).weight;if(a+=h?f:-f,s=n,u=c,t.hasEdge(s,u)){var d=t.edge(n,c).cutvalue;a+=h?-d:d}}}),a}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,i,o,s){var a=i,u=e.node(o);n[o]=!0;r.forEach(e.neighbors(o),function(s){r.has(n,s)||(i=t(e,n,i,s,o))});u.low=a;u.lim=i++;s?u.parent=s:delete u.parent;return i}(t,{},1,e)}function p(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function g(t,e,n){var i=n.v,s=n.w;e.hasEdge(i,s)||(i=n.w,s=n.v);var a=t.node(i),u=t.node(s),l=a,c=!1;a.lim>u.lim&&(l=u,c=!0);var h=r.filter(e.edges(),function(e){return c===m(t,t.node(e.v),l)&&c!==m(t,t.node(e.w),l)});return r.minBy(h,function(t){return o(e,t)})}function v(t,e,n,i){var o=n.v,s=n.w;t.removeEdge(o,s),t.setEdge(i.v,i.w,{}),d(t),h(t,e),function(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=a(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function m(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=c,c.initLowLimValues=d,c.initCutValues=h,c.calcCutValue=f,c.leaveEdge=p,c.enterEdge=g,c.exchangeEdges=v},function(t,e,n){var r=n(0);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(o){var s=n;r.forEach(t.children(o),i),e[o]={low:s,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,s=[],a=[],u=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>u||l>e[i].lim));o=i,i=r;for(;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}(t,e,i.v,i.w),s=o.path,a=o.lca,u=0,l=s[u],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(l=s[u])!==a&&t.node(l).maxRank<r.rank;)u++;l===a&&(c=!1)}if(!c){for(;u<s.length-1&&t.node(l=s[u+1]).minRank<=r.rank;)u++;l=s[u]}t.setParent(n,l),n=t.successors(n)[0]}})}},function(t,e,n){var r=n(0),i=n(2);t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),function(n){!function n(i,o){var s=t.children(i);s&&s.length&&r.forEach(s,function(t){n(t,o+1)}),e[i]=o}(n,1)}),e}(t),o=r.max(r.values(n))-1,s=2*o+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=s});var a=function(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;r.forEach(t.children(),function(u){!function t(e,n,o,s,a,u,l){var c=e.children(l);if(!c.length)return void(l!==n&&e.setEdge(n,l,{weight:0,minlen:o}));var h=i.addBorderNode(e,"_bt"),f=i.addBorderNode(e,"_bb"),d=e.node(l);e.setParent(h,l);d.borderTop=h;e.setParent(f,l);d.borderBottom=f;r.forEach(c,function(r){t(e,n,o,s,a,u,r);var i=e.node(r),c=i.borderTop?i.borderTop:r,d=i.borderBottom?i.borderBottom:r,p=i.borderTop?s:2*s,g=c!==d?1:a-u[l]+1;e.setEdge(h,c,{weight:p,minlen:g,nestingEdge:!0}),e.setEdge(d,f,{weight:p,minlen:g,nestingEdge:!0})});e.parent(l)||e.setEdge(n,h,{weight:0,minlen:a+u[l]})}(t,e,s,a,o,n,u)}),t.graph().nodeRankFactor=s},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}}},function(t,e,n){var r=n(0),i=n(2);function o(t,e,n,r,o,s){var a={width:0,height:0,rank:s,borderType:e},u=o[e][s-1],l=i.addDummyNode(t,"border",a,n);o[e][s]=l,t.setParent(l,r),u&&t.setEdge(u,l,{weight:1})}t.exports=function(t){r.forEach(t.children(),function e(n){var i=t.children(n),s=t.node(n);i.length&&r.forEach(i,e);if(r.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,u=s.maxRank+1;a<u;++a)o(t,"borderLeft","_bl",n,s,a),o(t,"borderRight","_br",n,s,a)}})}},function(t,e,n){"use strict";var r=n(0);function i(t){r.forEach(t.nodes(),function(e){o(t.node(e))}),r.forEach(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"y")&&s(n)})}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"x")&&a(n)})}(t),i(t))}}},function(t,e,n){"use strict";var r=n(0),i=n(116),o=n(117),s=n(118),a=n(122),u=n(123),l=n(7).Graph,c=n(2);function h(t,e,n){return r.map(e,function(e){return a(t,e,n)})}function f(t,e){var n=new l;r.forEach(t,function(t){var i=t.graph().root,o=s(t,i,n,e);r.forEach(o.vs,function(e,n){t.node(e).order=n}),u(t,n,o.vs)})}function d(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}t.exports=function(t){var e=c.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),s=h(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);d(t,a);for(var u,l=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){f(p%2?n:s,p%4>=2),a=c.buildLayerMatrix(t);var v=o(t,a);v<l&&(g=0,u=r.cloneDeep(a),l=v)}d(t,u)}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),o=r.map(r.range(i+1),function(){return[]});var s=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(s,function n(i){if(!r.has(e,i)){e[i]=!0;var s=t.node(i);o[s.rank].push(i),r.forEach(t.successors(i),n)}}),o}},function(t,e,n){"use strict";var r=n(0);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),o=r.flatten(r.map(e,function(e){return r.chain(t.outEdges(e)).map(function(e){return{pos:i[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var u=r.map(new Array(a),function(){return 0}),l=0;return r.forEach(o.forEach(function(t){var e=t.pos+s;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;l+=t.weight*n})),l}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(0),i=n(119),o=n(120),s=n(121);t.exports=function t(e,n,a,u){var l=e.children(n),c=e.node(n),h=c?c.borderLeft:void 0,f=c?c.borderRight:void 0,d={};h&&(l=r.filter(l,function(t){return t!==h&&t!==f}));var p=i(e,l);r.forEach(p,function(n){if(e.children(n.v).length){var i=t(e,n.v,a,u);d[n.v]=i,r.has(i,"barycenter")&&(o=n,s=i,r.isUndefined(o.barycenter)?(o.barycenter=s.barycenter,o.weight=s.weight):(o.barycenter=(o.barycenter*o.weight+s.barycenter*s.weight)/(o.weight+s.weight),o.weight+=s.weight))}var o,s});var g=o(p,a);!function(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(g,d);var v=s(g,u);if(h&&(v.vs=r.flatten([h,v.vs,f],!0),e.predecessors(h).length)){var m=e.node(e.predecessors(h)[0]),y=e.node(e.predecessors(f)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+m.order+y.order)/(v.weight+2),v.weight+=2}return v}},function(t,e,n){var r=n(0);t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,i,o,s;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,o=0,s=0,(n=t).weight&&(o+=n.barycenter*n.weight,s+=n.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/s,n.weight=s,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0===--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.chain(e).filter(function(t){return!t.merged}).map(function(t){return r.pick(t,["vs","i","barycenter","weight"])}).value()}(r.filter(n,function(t){return!t.indegree}))}},function(t,e,n){var r=n(0),i=n(2);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n=i.partition(t,function(t){return r.has(t,"barycenter")}),s=n.lhs,a=r.sortBy(n.rhs,function(t){return-t.i}),u=[],l=0,c=0,h=0;s.sort((f=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:f?e.i-t.i:t.i-e.i})),h=o(u,a,h),r.forEach(s,function(t){h+=t.vs.length,u.push(t.vs),l+=t.barycenter*t.weight,c+=t.weight,h=o(u,a,h)});var f;var d={vs:r.flatten(u,!0)};c&&(d.barycenter=l/c,d.weight=c);return d}},function(t,e,n){var r=n(0),i=n(7).Graph;t.exports=function(t,e,n){var o=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),s=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||o),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,o=s.edge(n,i),a=r.isUndefined(o)?0:o.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),r.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}},function(t,e,n){var r=n(0);t.exports=function(t,e,n){var i,o={};r.forEach(n,function(n){for(var r,s,a=t.parent(n);a;){if((r=t.parent(a))?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void e.setEdge(s,a);a=r}})}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(125).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=o+i/2}),o+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),function(e,n){t.node(n).x=e})}},function(t,e,n){"use strict";var r=n(0),i=n(7).Graph,o=n(2);function s(t,e){var n={};return r.reduce(e,function(e,i){var o=0,s=0,a=e.length,l=r.last(i);return r.forEach(i,function(e,c){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),f=h?t.node(h).order:a;(h||e===l)&&(r.forEach(i.slice(s,c+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),s=i.order;!(s<o||f<s)||i.dummy&&t.node(e).dummy||u(n,r,e)})}),s=c+1,o=f)}),i}),n}function a(t,e){var n={};function i(e,i,o,s,a){var l;r.forEach(r.range(i,o),function(i){l=e[i],t.node(l).dummy&&r.forEach(t.predecessors(l),function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>a)&&u(n,e,l)})})}return r.reduce(e,function(e,n){var o,s=-1,a=0;return r.forEach(n,function(r,u){if("border"===t.node(r).dummy){var l=t.predecessors(r);l.length&&(o=t.node(l[0]).order,i(n,a,u,s,o),a=u,s=o)}i(n,a,n.length,o,e.length)}),n}),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function l(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function c(t,e,n,i){var o={},s={},a={};return r.forEach(e,function(t){r.forEach(t,function(t,e){o[t]=t,s[t]=t,a[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var u=i(t);if(u.length)for(var c=((u=r.sortBy(u,function(t){return a[t]})).length-1)/2,h=Math.floor(c),f=Math.ceil(c);h<=f;++h){var d=u[h];s[t]===t&&e<a[d]&&!l(n,t,d)&&(s[d]=t,s[t]=o[t]=o[d],e=a[d])}})}),{root:o,align:s}}function h(t,e,n,o,s){var a={},u=function(t,e,n,o){var s=new i,a=t.graph(),u=function(t,e,n){return function(i,o,s){var a,u=i.node(o),l=i.node(s),c=0;if(c+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(c+=n?a:-a),a=0,c+=(u.dummy?e:t)/2,c+=(l.dummy?e:t)/2,c+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2}return a&&(c+=n?a:-a),a=0,c}}(a.nodesep,a.edgesep,o);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(s.setNode(r),i){var o=n[i],a=s.edge(o,r);s.setEdge(o,r,Math.max(u(t,e,i),a||0))}i=e})}),s}(t,e,n,s),l=s?"borderLeft":"borderRight";function c(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return c(function(t){a[t]=u.inEdges(t).reduce(function(t,e){return Math.max(t,a[e.v]+u.edge(e))},0)},r.bind(u.predecessors,u)),c(function(e){var n=u.outEdges(e).reduce(function(t,e){return Math.min(t,a[e.w]-u.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==l&&(a[e]=Math.max(a[e],n))},r.bind(u.successors,u)),r.forEach(o,function(t){a[t]=a[n[t]]}),a}function f(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)}),n-i})}function d(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(s){var a,u=n+s,l=t[u];if(l!==e){var c=r.values(l);(a="l"===s?i-r.min(c):o-r.max(c))&&(t[u]=r.mapValues(l,function(t){return t+a}))}})})}function p(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2})}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(s(t,n),a(t,n)),u={};r.forEach(["u","d"],function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var s=r.bind("u"===o?t.predecessors:t.successors,t),a=c(t,e,i,s),l=h(t,e,a.root,a.align,"r"===n);"r"===n&&(l=r.mapValues(l,function(t){return-t})),u[o+n]=l})});var l=f(t,u);return d(u,l),p(u,t.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:u,hasConflict:l,verticalAlignment:c,horizontalCompaction:h,alignCoordinates:d,findSmallestWidthAlignment:f,balance:p}},function(t,e,n){var r=n(0),i=n(2),o=n(7).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},function(t,e){t.exports="0.8.2"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(24);e.SDBDoc=r.SDBDoc;const i=n(129);e.SDBClient=i.SDBClient;const o=n(156);e.SDBServer=o.SDBServer;const s=n(44);e.SDBSubDoc=s.SDBSubDoc},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(46),i=n(155);e.SDBClient=class extends r.SDB{constructor(t){super(),this.ws=t,this.connection=new i.Connection(t)}close(){return Promise.resolve()}}},function(t,e,n){var r=n(48),i=n(50),o=n(53),s=n(12),a=n(56),u=n(137),l=n(58),c=n(31),h=n(32),f=n(68),d=n(26),p=n(153),g=n(69),v=n(11),m=!0,y=!0;function b(t){if(!(this instanceof b))return new b(t);s.EventEmitter.call(this),t||(t={}),this.db=t.db||new a,this.pubsub=t.pubsub||new l,this.extraDbs=t.extraDbs||{},this.milestoneDb=t.milestoneDb||new u,this.projections={},this.suppressPublish=!!t.suppressPublish,this.maxSubmitRetries=t.maxSubmitRetries||null,this.middleware={},this.agentsCount=0,this.remoteAgentsCount=0,t.disableDocAction||this._shimDocAction(),t.disableSpaceDelimitedActions||this._shimAfterSubmit()}function w(t){for(var e in t)t[e].destroy()}t.exports=b,s.mixin(b),b.prototype.MIDDLEWARE_ACTIONS={afterSubmit:"afterSubmit","after submit":"after submit",apply:"apply",commit:"commit",connect:"connect",doc:"doc",op:"op",query:"query",receive:"receive",readSnapshots:"readSnapshots",submit:"submit"},b.prototype.SNAPSHOT_TYPES={current:"current",byVersion:"byVersion"},b.prototype._shimDocAction=function(){m&&(m=!1,console.warn('DEPRECATED: "doc" middleware action. Use "readSnapshots" instead. Pass `disableDocAction: true` option to ShareDB to disable the "doc" action and this warning.'));var t=this;this.use(this.MIDDLEWARE_ACTIONS.readSnapshots,function(e,n){r.each(e.snapshots,function(n,r){var i={collection:e.collection,id:n.id,snapshot:n};t.trigger(t.MIDDLEWARE_ACTIONS.doc,e.agent,i,r)},n)})},b.prototype._shimAfterSubmit=function(){y&&(y=!1,console.warn('DEPRECATED: "after submit" middleware action. Use "afterSubmit" instead. Pass `disableSpaceDelimitedActions: true` option to ShareDB to disable the "after submit" action and this warning.'));var t=this;this.use(t.MIDDLEWARE_ACTIONS.afterSubmit,function(e,n){t.trigger(t.MIDDLEWARE_ACTIONS["after submit"],e.agent,e,n)})},b.prototype.close=function(t){var e=4,n=this;function r(r){if(r)return t?t(r):n.emit("error",r);--e||t&&t()}for(var i in this.pubsub.close(r),this.db.close(r),this.milestoneDb.close(r),this.extraDbs)e++,this.extraDbs[i].close(r);r()},b.prototype.connect=function(t,e){var n=new p;t?t.bindToSocket(n):t=new o(n),n._open();var r=this.listen(n.stream,e);return t.agent=r,t},b.prototype.listen=function(t,e){var n=new i(this,t);return this.trigger(this.MIDDLEWARE_ACTIONS.connect,n,{stream:t,req:e},function(t){if(t)return n.close(t);n._open()}),n},b.prototype.addProjection=function(t,e,n){if(this.projections[t])throw new Error("Projection "+t+" already exists");for(var r in n)if(!0!==n[r])throw new Error("Invalid field "+r+" - fields must be {somekey: true}. Subfields not currently supported.");this.projections[t]={target:e,fields:n}},b.prototype.use=function(t,e){if(!Array.isArray(t))return(this.middleware[t]||(this.middleware[t]=[])).push(e),this;for(var n=0;n<t.length;n++)this.use(t[n],e)},b.prototype.trigger=function(t,e,n,r){n.action=t,n.agent=e,n.backend=this;var i=this.middleware[t];if(!i)return r();i=i.slice();var o=function(t){if(t)return r(t);var e=i.shift();if(!e)return r();e(n,o)};o()},b.prototype.submit=function(t,e,n,r,i,o){var s=c.checkOp(r);if(s)return o(s);var a=new g(this,t,e,n,r,i),u=this;u.trigger(u.MIDDLEWARE_ACTIONS.submit,t,a,function(e){if(e)return o(e);a.submit(function(e){if(e)return o(e);u.trigger(u.MIDDLEWARE_ACTIONS.afterSubmit,t,a,function(e){if(e)return o(e);u._sanitizeOps(t,a.projection,a.collection,n,a.ops,function(t){if(t)return o(t);u.emit("timing","submit.total",Date.now()-a.start,a),o(t,a.ops)})})})})},b.prototype._sanitizeOp=function(t,e,n,r,i,o){if(e)try{h.projectOp(e.fields,i)}catch(t){return o(t)}this.trigger(this.MIDDLEWARE_ACTIONS.op,t,{collection:n,id:r,op:i},o)},b.prototype._sanitizeOps=function(t,e,n,i,o,s){var a=this;r.each(o,function(r,o){a._sanitizeOp(t,e,n,i,r,o)},s)},b.prototype._sanitizeOpsBulk=function(t,e,n,i,o){var s=this;r.forEachOf(i,function(r,i,o){s._sanitizeOps(t,e,n,i,r,o)},o)},b.prototype._sanitizeSnapshots=function(t,e,n,r,i,o){if(e)try{h.projectSnapshots(e.fields,r)}catch(t){return o(t)}var s={collection:n,snapshots:r,snapshotType:i};this.trigger(this.MIDDLEWARE_ACTIONS.readSnapshots,t,s,o)},b.prototype._getSnapshotProjection=function(t,e){return t.projectsSnapshots?null:e},b.prototype._getSnapshotsFromMap=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++){var i=t[r];n[r]=e[i]}return n},b.prototype.getOps=function(t,e,n,r,i,o){var s=Date.now(),a=this.projections[e],u=a?a.target:e,l=this,c={agent:t,index:e,collection:u,id:n,from:r,to:i};l.db.getOps(u,n,r,i,null,function(e,r){if(e)return o(e);l._sanitizeOps(t,a,u,n,r,function(t){if(t)return o(t);l.emit("timing","getOps",Date.now()-s,c),o(t,r)})})},b.prototype.getOpsBulk=function(t,e,n,r,i){var o=Date.now(),s=this.projections[e],a=s?s.target:e,u=this,l={agent:t,index:e,collection:a,fromMap:n,toMap:r};u.db.getOpsBulk(a,n,r,null,function(e,n){if(e)return i(e);u._sanitizeOpsBulk(t,s,a,n,function(t){if(t)return i(t);u.emit("timing","getOpsBulk",Date.now()-o,l),i(t,n)})})},b.prototype.fetch=function(t,e,n,r){var i=Date.now(),o=this.projections[e],s=o?o.target:e,a=o&&o.fields,u=this,l={agent:t,index:e,collection:s,id:n};u.db.getSnapshot(s,n,a,null,function(e,n){if(e)return r(e);var a=u._getSnapshotProjection(u.db,o),c=[n];u._sanitizeSnapshots(t,a,s,c,u.SNAPSHOT_TYPES.current,function(t){if(t)return r(t);u.emit("timing","fetch",Date.now()-i,l),r(null,n)})})},b.prototype.fetchBulk=function(t,e,n,r){var i=Date.now(),o=this.projections[e],s=o?o.target:e,a=o&&o.fields,u=this,l={agent:t,index:e,collection:s,ids:n};u.db.getSnapshotBulk(s,n,a,null,function(e,a){if(e)return r(e);var c=u._getSnapshotProjection(u.db,o),h=u._getSnapshotsFromMap(n,a);u._sanitizeSnapshots(t,c,s,h,u.SNAPSHOT_TYPES.current,function(t){if(t)return r(t);u.emit("timing","fetchBulk",Date.now()-i,l),r(null,a)})})},b.prototype.subscribe=function(t,e,n,r,i){var o=Date.now(),s=this.projections[e],a=s?s.target:e,u=this.getDocChannel(a,n),l=this,c={agent:t,index:e,collection:a,id:n,version:r};l.pubsub.subscribe(u,function(u,h){if(u)return i(u);h.initProjection(l,t,s),null==r?l.fetch(t,e,n,function(t,e){if(t)return i(t);l.emit("timing","subscribe.snapshot",Date.now()-o,c),i(null,h,e)}):l.db.getOps(a,n,r,null,null,function(t,e){if(t)return i(t);h.pushOps(a,n,e),l.emit("timing","subscribe.ops",Date.now()-o,c),i(null,h)})})},b.prototype.subscribeBulk=function(t,e,n,i){var o=Date.now(),s=this.projections[e],a=s?s.target:e,u=this,l={},c=Array.isArray(n),h=c?n:Object.keys(n),f={agent:t,index:e,collection:a,versions:n};r.each(h,function(e,n){var r=u.getDocChannel(a,e);u.pubsub.subscribe(r,function(r,i){if(r)return n(r);i.initProjection(u,t,s),l[e]=i,n()})},function(r){if(r)return w(l),i(r);c?u.fetchBulk(t,e,h,function(t,e){if(t)return w(l),i(t);u.emit("timing","subscribeBulk.snapshot",Date.now()-o,f),i(null,l,e)}):u.db.getOpsBulk(a,n,null,null,function(t,e){if(t)return w(l),i(t);for(var n in e){var r=e[n];l[n].pushOps(a,n,r)}u.emit("timing","subscribeBulk.ops",Date.now()-o,f),i(null,l)})})},b.prototype.queryFetch=function(t,e,n,r,i){var o=Date.now(),s=this;s._triggerQuery(t,e,n,r,function(e,n){if(e)return i(e);s._query(t,n,function(t,e,r){if(t)return i(t);s.emit("timing","queryFetch",Date.now()-o,n),i(null,e,r)})})},b.prototype.querySubscribe=function(t,e,n,r,i){var o=Date.now(),s=this;s._triggerQuery(t,e,n,r,function(e,n){return e?i(e):n.db.disableSubscribe?i({code:4002,message:"DB does not support subscribe"}):void s.pubsub.subscribe(n.channel,function(e,a){if(e)return i(e);if(a.initProjection(s,t,n.projection),r.ids){var u=new f(n,a,r.ids);return s.emit("timing","querySubscribe.reconnect",Date.now()-o,n),void i(null,u)}s._query(t,n,function(t,e,r){if(t)return a.destroy(),i(t);var u=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].id);return e}(e),l=new f(n,a,u,r);s.emit("timing","querySubscribe.initial",Date.now()-o,n),i(null,l,e,r)})})})},b.prototype._triggerQuery=function(t,e,n,r,i){var o=this.projections[e],s=o?o.target:e,a=o&&o.fields,u={index:e,collection:s,projection:o,fields:a,channel:this.getCollectionChannel(s),query:n,options:r,db:null,snapshotProjection:null},l=this;l.trigger(l.MIDDLEWARE_ACTIONS.query,t,u,function(t){return t?i(t):(u.db=r.db?l.extraDbs[r.db]:l.db,u.db?(u.snapshotProjection=l._getSnapshotProjection(u.db,o),void i(null,u)):i({code:4003,message:"DB not found"}))})},b.prototype._query=function(t,e,n){var r=this;e.db.query(e.collection,e.query,e.fields,e.options,function(i,o,s){if(i)return n(i);r._sanitizeSnapshots(t,e.snapshotProjection,e.collection,o,r.SNAPSHOT_TYPES.current,function(t){n(t,o,s)})})},b.prototype.getCollectionChannel=function(t){return t},b.prototype.getDocChannel=function(t,e){return t+"."+e},b.prototype.getChannels=function(t,e){return[this.getCollectionChannel(t),this.getDocChannel(t,e)]},b.prototype.fetchSnapshot=function(t,e,n,r,i){var o=Date.now(),s=this,a=this.projections[e],u=a?a.target:e,l={agent:t,index:e,collection:u,id:n,version:r};this._fetchSnapshot(u,n,r,function(e,n){if(e)return i(e);var r=s._getSnapshotProjection(s.db,a),c=[n],h=s.SNAPSHOT_TYPES.byVersion;s._sanitizeSnapshots(t,r,u,c,h,function(t){if(t)return i(t);s.emit("timing","fetchSnapshot",Date.now()-o,l),i(null,n)})})},b.prototype._fetchSnapshot=function(t,e,n,r){var i=this.db;this.milestoneDb.getMilestoneSnapshot(t,e,n,function(o,s){if(o)return r(o);var a=s?s.v:0;i.getOps(t,e,a,n,null,function(t,i){if(t)return r(t);var o,a=null,u=0;if(s){if(!(a=v.map[s.type]))return r({code:4008,message:"Unknown type"});o=s.data,u=s.v}for(var l=0;l<i.length;l++){var c=i[l];if(u=c.v+1,c.create){if(!(a=v.map[c.create.type]))return r({code:4008,message:"Unknown type"});o=a.create(c.create.data)}else c.del?(o=void 0,a=null):o=a.apply(o,c.op)}if(a=a?a.uri:null,n>u)return r({code:4024,message:"Requested version exceeds latest snapshot version"});var h=new d(e,u,a,o,null);r(null,h)})})}},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"===typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),f.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[u]=i,r(u),u++},f.clearImmediate=d}function d(t){delete l[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{d(t),c=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(e,n(3),n(1))},function(t,e){var n=t.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var r=Math.log(Math.pow(2,t))/Math.log(e),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,t/i))/Math.log(e)*i;var o=r-Math.floor(r),s="";for(i=0;i<Math.floor(r);i++){s=Math.floor(Math.random()*e).toString(e)+s}if(o){var a=Math.pow(e,o);s=Math.floor(Math.random()*a).toString(e)+s}var u=parseInt(s,e);return u!==1/0&&u>=Math.pow(2,t)?n(t,e):s};n.rack=function(t,e,r){var i=function(i){var s=0;do{if(s++>10){if(!r)throw new Error("too many ID collisions, use more bits");t+=r}var a=n(t,e)}while(Object.hasOwnProperty.call(o,a));return o[a]=i,a},o=i.hats={};return i.get=function(t){return i.hats[t]},i.set=function(t,e){return i.hats[t]=e,i},i.bits=t||128,i.base=e||16,i}},function(t,e,n){var r=function(t){return"[object Array]"==Object.prototype.toString.call(t)},i=function(t){return JSON.parse(JSON.stringify(t))},o={name:"json0",uri:"http://sharejs.org/types/JSONv0"},s={};function a(t){t.t="text0";var e={p:t.p.pop()};null!=t.si&&(e.i=t.si),null!=t.sd&&(e.d=t.sd),t.o=[e]}function u(t){t.p.push(t.o[0].p),null!=t.o[0].i&&(t.si=t.o[0].i),null!=t.o[0].d&&(t.sd=t.o[0].d),delete t.t,delete t.o}o.registerSubtype=function(t){s[t.name]=t},o.create=function(t){return void 0===t?null:i(t)},o.invertComponent=function(t){var e={p:t.p};return t.t&&s[t.t]&&(e.t=t.t,e.o=s[t.t].invert(t.o)),void 0!==t.si&&(e.sd=t.si),void 0!==t.sd&&(e.si=t.sd),void 0!==t.oi&&(e.od=t.oi),void 0!==t.od&&(e.oi=t.od),void 0!==t.li&&(e.ld=t.li),void 0!==t.ld&&(e.li=t.ld),void 0!==t.na&&(e.na=-t.na),void 0!==t.lm&&(e.lm=t.p[t.p.length-1],e.p=t.p.slice(0,t.p.length-1).concat([t.lm])),e},o.invert=function(t){for(var e=t.slice().reverse(),n=[],r=0;r<e.length;r++)n.push(o.invertComponent(e[r]));return n},o.checkValidOp=function(t){for(var e=0;e<t.length;e++)if(!r(t[e].p))throw new Error("Missing path")},o.checkList=function(t){if(!r(t))throw new Error("Referenced element not a list")},o.checkObj=function(t){if(!(e=t)||e.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(t)+")");var e},o.apply=function(t,e){o.checkValidOp(e),e=i(e);for(var n={data:t},r=0;r<e.length;r++){var u=e[r];null==u.si&&null==u.sd||a(u);for(var l=null,c=n,h="data",f=0;f<u.p.length;f++){var d=u.p[f];if(l=c,h,c=c[h],h=d,null==l)throw new Error("Path invalid")}if(u.t&&void 0!==u.o&&s[u.t])c[h]=s[u.t].apply(c[h],u.o);else if(void 0!==u.na){if("number"!=typeof c[h])throw new Error("Referenced element not a number");c[h]+=u.na}else if(void 0!==u.li&&void 0!==u.ld)o.checkList(c),c[h]=u.li;else if(void 0!==u.li)o.checkList(c),c.splice(h,0,u.li);else if(void 0!==u.ld)o.checkList(c),c.splice(h,1);else if(void 0!==u.lm){if(o.checkList(c),u.lm!=h){var p=c[h];c.splice(h,1),c.splice(u.lm,0,p)}}else if(void 0!==u.oi)o.checkObj(c),c[h]=u.oi;else{if(void 0===u.od)throw new Error("invalid / missing instruction in op");o.checkObj(c),delete c[h]}}return n.data},o.shatter=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n]]);return e},o.incrementalApply=function(t,e,n){for(var r=0;r<e.length;r++){var i=[e[r]];n(i,t=o.apply(t,i))}return t};var l=o.pathMatches=function(t,e,n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r]&&(!n||r!==t.length-1))return!1;return!0};o.append=function(t,e){if(e=i(e),0!==t.length){var n=t[t.length-1];if(null==e.si&&null==e.sd||null==n.si&&null==n.sd||(a(e),a(n)),l(e.p,n.p))if(e.t&&n.t&&e.t===n.t&&s[e.t]){if(n.o=s[e.t].compose(n.o,e.o),null!=e.si||null!=e.sd){for(var r=e.p,o=0;o<n.o.length-1;o++)e.o=[n.o.pop()],e.p=r.slice(),u(e),t.push(e);u(n)}}else null!=n.na&&null!=e.na?t[t.length-1]={p:n.p,na:n.na+e.na}:void 0!==n.li&&void 0===e.li&&e.ld===n.li?void 0!==n.ld?delete n.li:t.pop():void 0!==n.od&&void 0===n.oi&&void 0!==e.oi&&void 0===e.od?n.oi=e.oi:void 0!==n.oi&&void 0!==e.od?void 0!==e.oi?n.oi=e.oi:void 0!==n.od?delete n.oi:t.pop():void 0!==e.lm&&e.p[e.p.length-1]===e.lm||t.push(e);else null==e.si&&null==e.sd||null==n.si&&null==n.sd||(u(e),u(n)),t.push(e)}else t.push(e)},o.compose=function(t,e){o.checkValidOp(t),o.checkValidOp(e);for(var n=i(t),r=0;r<e.length;r++)o.append(n,e[r]);return n},o.normalize=function(t){var e=[];t=r(t)?t:[t];for(var n=0;n<t.length;n++){var i=t[n];null==i.p&&(i.p=[]),o.append(e,i)}return e},o.commonLengthForOps=function(t,e){var n=t.p.length,r=e.p.length;if((null!=t.na||t.t)&&n++,(null!=e.na||e.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var i=0;i<n;i++){var o=t.p[i];if(i>=r||o!==e.p[i])return null}return n},o.canOpAffectPath=function(t,e){return null!=o.commonLengthForOps({p:e},t)},o.transformComponent=function(t,e,n,l){e=i(e);var c=o.commonLengthForOps(n,e),h=o.commonLengthForOps(e,n),f=e.p.length,d=n.p.length;if((null!=e.na||e.t)&&f++,(null!=n.na||n.t)&&d++,null!=h&&d>f&&e.p[h]==n.p[h])if(void 0!==e.ld)(g=i(n)).p=g.p.slice(f),e.ld=o.apply(i(e.ld),[g]);else if(void 0!==e.od){(g=i(n)).p=g.p.slice(f),e.od=o.apply(i(e.od),[g])}if(null!=c){var p=f==d,g=n;if(null==e.si&&null==e.sd||null==n.si&&null==n.sd||(a(e),a(g=i(n))),g.t&&s[g.t]){if(e.t&&e.t===g.t){var v=s[e.t].transform(e.o,g.o,l);if(null!=e.si||null!=e.sd)for(var m=e.p,y=0;y<v.length;y++)e.o=[v[y]],e.p=m.slice(),u(e),o.append(t,e);else(!r(v)||v.length>0)&&(e.o=v,o.append(t,e));return t}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[c]===e.p[c]){if(!p)return t;if(void 0!==e.ld){if(void 0===e.li||"left"!==l)return t;e.ld=i(n.li)}}}else if(void 0!==n.li)void 0!==e.li&&void 0===e.ld&&p&&e.p[c]===n.p[c]?"right"===l&&e.p[c]++:n.p[c]<=e.p[c]&&e.p[c]++,void 0!==e.lm&&p&&n.p[c]<=e.lm&&e.lm++;else if(void 0!==n.ld){if(void 0!==e.lm&&p){if(n.p[c]===e.p[c])return t;m=n.p[c];var b=e.p[c];(m<(w=e.lm)||m===w&&b<w)&&e.lm--}if(n.p[c]<e.p[c])e.p[c]--;else if(n.p[c]===e.p[c]){if(d<f)return t;if(void 0!==e.ld){if(void 0===e.li)return t;delete e.ld}}}else if(void 0!==n.lm)if(void 0!==e.lm&&f===d){b=e.p[c];var w=e.lm,x=n.p[c],_=n.lm;if(x!==_)if(b===x){if("left"!==l)return t;e.p[c]=_,b===w&&(e.lm=_)}else b>x&&e.p[c]--,b>_?e.p[c]++:b===_&&x>_&&(e.p[c]++,b===w&&e.lm++),w>x?e.lm--:w===x&&w>b&&e.lm--,w>_?e.lm++:w===_&&(_>x&&w>b||_<x&&w<b?"right"===l&&e.lm++:w>b?e.lm++:w===x&&e.lm--)}else if(void 0!==e.li&&void 0===e.ld&&p){b=n.p[c],w=n.lm;(m=e.p[c])>b&&e.p[c]--,m>w&&e.p[c]++}else{b=n.p[c],w=n.lm;(m=e.p[c])===b?e.p[c]=w:(m>b&&e.p[c]--,m>w?e.p[c]++:m===w&&b>w&&e.p[c]++)}else if(void 0!==n.oi&&void 0!==n.od){if(e.p[c]===n.p[c]){if(void 0===e.oi||!p)return t;if("right"===l)return t;e.od=n.oi}}else if(void 0!==n.oi){if(void 0!==e.oi&&e.p[c]===n.p[c]){if("left"!==l)return t;o.append(t,{p:e.p,od:n.oi})}}else if(void 0!==n.od&&e.p[c]==n.p[c]){if(!p)return t;if(void 0===e.oi)return t;delete e.od}}return o.append(t,e),t},n(52)(o,o.transformComponent,o.checkValidOp,o.append);var c=n(134);o.registerSubtype(c),t.exports=o},function(t,e,n){var r=t.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(t){if(null!=t&&"string"!==typeof t)throw new Error("Initial data must be a string");return t||""}},i=function(t,e,n){return t.slice(0,e)+n+t.slice(e)},o=function(t){if("number"!==typeof t.p)throw new Error("component missing position field");if("string"===typeof t.i===("string"===typeof t.d))throw new Error("component needs an i or d field");if(t.p<0)throw new Error("position cannot be negative")},s=function(t){for(var e=0;e<t.length;e++)o(t[e])};r.apply=function(t,e){var n;s(e);for(var r=0;r<e.length;r++){var o=e[r];if(null!=o.i)t=i(t,o.p,o.i);else{if(n=t.slice(o.p,o.p+o.d.length),o.d!==n)throw new Error("Delete component '"+o.d+"' does not match deleted text '"+n+"'");t=t.slice(0,o.p)+t.slice(o.p+o.d.length)}}return t};var a=r._append=function(t,e){if(""!==e.i&&""!==e.d)if(0===t.length)t.push(e);else{var n=t[t.length-1];null!=n.i&&null!=e.i&&n.p<=e.p&&e.p<=n.p+n.i.length?t[t.length-1]={i:i(n.i,e.p-n.p,e.i),p:n.p}:null!=n.d&&null!=e.d&&e.p<=n.p&&n.p<=e.p+e.d.length?t[t.length-1]={d:i(e.d,n.p-e.p,n.d),p:e.p}:t.push(e)}};r.compose=function(t,e){s(t),s(e);for(var n=t.slice(),r=0;r<e.length;r++)a(n,e[r]);return n},r.normalize=function(t){var e=[];null==t.i&&null==t.p||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];null==r.p&&(r.p=0),a(e,r)}return e};var u=function(t,e,n){return null!=e.i?e.p<t||e.p===t&&n?t+e.i.length:t:t<=e.p?t:t<=e.p+e.d.length?e.p:t-e.d.length};r.transformCursor=function(t,e,n){for(var r="right"===n,i=0;i<e.length;i++)t=u(t,e[i],r);return t};var l=r._tc=function(t,e,n,r){if(o(e),o(n),null!=e.i)a(t,{i:e.i,p:u(e.p,n,"right"===r)});else if(null!=n.i){var i=e.d;e.p<n.p&&(a(t,{d:i.slice(0,n.p-e.p),p:e.p}),i=i.slice(n.p-e.p)),""!==i&&a(t,{d:i,p:e.p+n.i.length})}else if(e.p>=n.p+n.d.length)a(t,{d:e.d,p:e.p-n.d.length});else if(e.p+e.d.length<=n.p)a(t,e);else{var s={d:"",p:e.p};e.p<n.p&&(s.d=e.d.slice(0,n.p-e.p)),e.p+e.d.length>n.p+n.d.length&&(s.d+=e.d.slice(n.p+n.d.length-e.p));var l=Math.max(e.p,n.p),c=Math.min(e.p+e.d.length,n.p+n.d.length);if(e.d.slice(l-e.p,c-e.p)!==n.d.slice(l-n.p,c-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==s.d&&(s.p=u(s.p,n),a(t,s))}return t};r.invert=function(t){t=t.slice().reverse();for(var e=0;e<t.length;e++)t[e]=null!=(n=t[e]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return t},n(52)(r,l,s,a)},function(t,e,n){"use strict";var r="undefined"!==typeof Reflect?Reflect.construct:void 0,i=Object.defineProperty,o=Error.captureStackTrace;function s(t){void 0!==t&&i(this,"message",{configurable:!0,value:t,writable:!0});var e=this.constructor.name;void 0!==e&&e!==this.name&&i(this,"name",{configurable:!0,value:e,writable:!0}),o(this,this.constructor)}void 0===o&&(o=function(t){var e=new Error;i(t,"stack",{configurable:!0,get:function(){var t=e.stack;return i(this,"stack",{configurable:!0,value:t,writable:!0}),t},set:function(e){i(t,"stack",{configurable:!0,value:e,writable:!0})}})}),s.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:s,writable:!0}});var a=function(){function t(t,e){return i(t,"name",{configurable:!0,value:e})}try{var e=function(){};if(t(e,"foo"),"foo"===e.name)return t}catch(t){}}();(t.exports=function(t,e){if(null==e||e===Error)e=s;else if("function"!==typeof e)throw new TypeError("super_ should be a function");var n;if("string"===typeof t)n=t,t=void 0!==r?function(){return r(e,arguments,this.constructor)}:function(){e.apply(this,arguments)},void 0!==a&&(a(t,n),n=void 0);else if("function"!==typeof t)throw new TypeError("constructor should be either a string or a function");t.super_=t.super=e;var i={constructor:{configurable:!0,value:t,writable:!0}};return void 0!==n&&(i.name={configurable:!0,value:n,writable:!0}),t.prototype=Object.create(e.prototype,i),t}).BaseError=s},function(t,e,n){var r=n(26),i=n(10),o=n(12);function s(t,e,n,r,s,a){if(o.EventEmitter.call(this),"function"!==typeof a)throw new Error("Callback is required for SnapshotRequest");if(!i.isValidVersion(s))throw new Error("Snapshot version must be a positive integer or null");this.requestId=e,this.connection=t,this.id=r,this.collection=n,this.version=s,this.callback=a,this.sent=!1}t.exports=s,o.mixin(s),s.prototype.send=function(){if(this.connection.canSend){var t={a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version};this.connection.send(t),this.sent=!0}},s.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.connection.canSend||(this.sent=!1)},s.prototype._handleResponse=function(t,e){if(this.emit("ready"),t)return this.callback(t);var n=new r(this.id,e.v,e.type,e.data,null);this.callback(null,n)}},function(t,e,n){(function(e){var r=n(27);function i(t){r.call(this,t)}t.exports=i,i.prototype=Object.create(r.prototype),i.prototype.getMilestoneSnapshot=function(t,n,r,i){e.nextTick(i,null,void 0)},i.prototype.saveMilestoneSnapshot=function(t,n,r){if(r)return e.nextTick(r,null);this.emit("save",t,n)}}).call(e,n(1))},function(t,e,n){var r=n(60).inherits,i=n(28).Readable,o=n(10);function s(){i.call(this,{objectMode:!0}),this.id=null,this.backend=null,this.agent=null,this.projection=null,this.open=!0}t.exports=s,r(s,i),s.prototype._read=o.doNothing,s.prototype.initProjection=function(t,e,n){this.backend=t,this.agent=e,this.projection=n},s.prototype.pushOp=function(t,e,n){if(this.backend){var r=this;this.backend._sanitizeOp(this.agent,this.projection,t,e,n,function(t){r.open&&r.push(t?{error:t}:n)})}else{if(!this.open)return;this.push(n)}},s.prototype.pushOps=function(t,e,n){for(var r=0;r<n.length;r++)this.pushOp(t,e,n[r])},s.prototype.destroy=function(){this.open&&(this.open=!1,this.push(null),this.emit("close"))}},function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,c=s>0?r-4:r,h=0;h<c;h+=4)e=i[t.charCodeAt(h)]<<18|i[t.charCodeAt(h+1)]<<12|i[t.charCodeAt(h+2)]<<6|i[t.charCodeAt(h+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=i[t.charCodeAt(h)]<<2|i[t.charCodeAt(h+1)]>>4,a[u++]=255&e);1===s&&(e=i[t.charCodeAt(h)]<<10|i[t.charCodeAt(h+1)]<<4|i[t.charCodeAt(h+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(c(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*g}},function(t,e){},function(t,e,n){"use strict";var r=n(20).Buffer,i=n(144);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(e,n(3))},function(t,e,n){"use strict";t.exports=o;var r=n(67),i=n(15);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(13),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(30)},function(t,e,n){t.exports=n(14)},function(t,e,n){t.exports=n(29).Transform},function(t,e,n){t.exports=n(29).PassThrough},function(t,e){function n(t,e){this.index=t,this.values=e}function r(t,e){this.index=t,this.howMany=e}function i(t,e,n){this.from=t,this.to=e,this.howMany=n}function o(t,e){return t===e}function s(t,e,s){s||(s=o);for(var a=t.length,u=e.length,l=[],c={},h={},f=0;f<a;f++)for(var d=t[f],p=0;p<u;p++)if(!h[p]&&s(d,e[p])){var g=f,v=p,m=0;do{c[f++]=h[p++]=!0,m++}while(f<a&&p<u&&s(t[f],e[p])&&!h[p]);l.push(new i(g,v,m)),f--;break}var y=[];for(f=0;f<a;)if(c[f])f++;else{var b=f;for(m=0;f<a&&!c[f++];)m++;y.push(new r(b,m))}var w=[];for(p=0;p<u;)if(h[p])p++;else{for(b=p,m=0;p<u&&!h[p++];)m++;var x=e.slice(b,b+m);w.push(new n(b,x))}var _,S,k=w.length,T=y.length,C=l.length,E=0;for(_=0;_<T;_++){var O=y[_];for(O.index-=E,E+=O.howMany,S=0;S<C;S++){(D=l[S]).from>=O.index&&(D.from-=O.howMany)}}for(_=k;_--;){var M=w[_];m=M.values.length;for(S=C;S--;){(D=l[S]).to>=M.index&&(D.to-=m)}}for(_=C;_-- >1;){if((D=l[_]).to!==D.from)for(S=_;S--;){var A=l[S];A.to>=D.to&&(A.to-=D.howMany),A.to>=D.from&&(A.to+=D.howMany)}}var P=[];for(_=0;_<C;_++){var D;if((D=l[_]).to!==D.from)for(P.push(D),S=_+1;S<C;S++){var N=l[S];N.from>=D.from&&(N.from-=D.howMany),N.from>=D.to&&(N.from+=D.howMany)}}return y.concat(P,w)}t.exports=s,s.InsertDiff=n,s.RemoveDiff=r,s.MoveDiff=i,n.prototype.type="insert",n.prototype.toJSON=function(){return{type:this.type,index:this.index,values:this.values}},r.prototype.type="remove",r.prototype.toJSON=function(){return{type:this.type,index:this.index,howMany:this.howMany}},i.prototype.type="move",i.prototype.toJSON=function(){return{type:this.type,from:this.from,to:this.to,howMany:this.howMany}}},function(t,e){var n=Array.prototype.slice,r="function"===typeof Object.keys?Object.keys:function(t){var e=[];for(var n in t)e.push(n);return e},i=t.exports=function(t,e){return 0===t&&0===e?1/t===1/e:t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():a(t)?a(e):"object"!=typeof t&&"object"!=typeof e?t==e:function(t,e){if(o(t)||o(e))return!1;if(t.prototype!==e.prototype)return!1;if(s(t))return!!s(e)&&(t=n.call(t),e=n.call(e),i(t,e));try{var a,u,l=r(t),c=r(e)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),u=l.length-1;u>=0;u--)if(l[u]!=c[u])return!1;for(u=l.length-1;u>=0;u--)if(a=l[u],!i(t[a],e[a]))return!1;return!0}(t,e))};function o(t){return null===t||void 0===t}function s(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function a(t){return"number"==typeof t&&t!==t}},function(t,e,n){(function(e){var r=n(28).Duplex,i=n(60).inherits,o=n(10);function s(){this.readyState=0,this.stream=new a(this)}function a(t){r.call(this,{objectMode:!0}),this.socket=t,this.on("error",function(e){console.warn("ShareDB client message stream error",e),t.close("stopped")}),this.on("finish",function(){t.close("stopped")})}t.exports=s,s.prototype._open=function(){0===this.readyState&&(this.readyState=1,this.onopen())},s.prototype.close=function(t){3!==this.readyState&&(this.readyState=3,this.stream.push(null),this.onclose(t||"closed"))},s.prototype.send=function(t){this.stream.push(JSON.parse(t))},s.prototype.onmessage=o.doNothing,s.prototype.onclose=o.doNothing,s.prototype.onerror=o.doNothing,s.prototype.onopen=o.doNothing,i(a,r),a.prototype.isServer=!0,a.prototype._read=o.doNothing,a.prototype._write=function(t,n,r){var i=this.socket;e.nextTick(function(){1===i.readyState&&(i.onmessage({data:JSON.stringify(t)}),r())})}}).call(e,n(1))},function(t,e,n){(function(e){var r=n(27),i=n(9);function o(t){r.call(this,t),this._milestoneSnapshots={}}t.exports=o,o.prototype=Object.create(r.prototype),o.prototype.getMilestoneSnapshot=function(t,n,r,o){if(o||(o=function(){}),!t)return e.nextTick(o,new i(4001,"Missing collection"));if(!n)return e.nextTick(o,new i(4001,"Missing ID"));if(!this._isValidVersion(r))return e.nextTick(o,new i(4001,"Invalid version"));for(var s,a=this._getMilestoneSnapshotsSync(t,n),u=0;u<a.length;u++){var l=a[u];if(!(l.v<=r||null===r))break;s=l}e.nextTick(o,null,s)},o.prototype.saveMilestoneSnapshot=function(t,n,r){if(r=r||function(e){if(e)return this.emit("error",e);this.emit("save",t,n)}.bind(this),!t)return r(new i(4001,"Missing collection"));if(!n)return r(new i(4001,"Missing snapshot"));var o=this._getMilestoneSnapshotsSync(t,n.id);o.push(n),o.sort(function(t,e){return t.v-e.v}),e.nextTick(r,null)},o.prototype._getMilestoneSnapshotsSync=function(t,e){var n=this._milestoneSnapshots[t]||(this._milestoneSnapshots[t]={});return n[e]||(n[e]=[])}}).call(e,n(1))},function(t,e,n){e.Connection=n(53),e.Doc=n(54),e.Error=n(9),e.Query=n(55),e.types=n(11)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(157),i=n(47),o=n(158),s=n(46),a=n(28),u=n(25);class l extends s.SDB{constructor(t,e){if(super(),e=u.extend({},e,l.optionDefaults),this.share=new i(e),this.connection=this.share.connect(),t)if(t instanceof r.Server||t.clients&&t.handleUpgrade)this.wssPromise=Promise.resolve(t);else{if(!(t instanceof o.Server))throw new Error(`Could not recognize type of expected server ${t}`);this.wssPromise=Promise.resolve(new r.Server({server:t}))}else this.wssPromise=new Promise((t,e)=>{const n=o.createServer();n.unref(),n.on("error",e),n.listen(()=>{const e=n.address().port;n.close(()=>{t(e)})})}).then(t=>new r.Server({port:t})).catch(t=>{throw t});this.wssPromise.then(t=>{t.on("connection",t=>{const e=new c(t);this.listen(e)})})}address(){return this.wssPromise.then(t=>t.address())}use(t,e){this.share.use(t,e)}close(){return new Promise((t,e)=>{this.share.close(()=>{t()})})}listening(){return this.wssPromise.then(t=>t.readyState===t.OPEN?Promise.resolve():new Promise((e,n)=>{t.once("listening",()=>{e()})}))}listen(t){this.share.listen(t)}}l.optionDefaults={disableDocAction:!0,disableSpaceDelimitedActions:!0},e.SDBServer=l;class c extends a.Duplex{constructor(t){super({objectMode:!0}),this.ws=t,this.ws.on("message",t=>{try{this.push(JSON.parse(t))}catch(t){console.error(t)}}),this.ws.on("close",()=>{this.push(null),this.end(),this.emit("close"),this.emit("end")}),this.on("error",function(){t.close()}),this.on("end",function(){t.close()})}_read(){}_write(t,e,n){this.ws.send(JSON.stringify(t)),n()}}},function(t,e,n){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(t,e){},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),s=n(160),a=n(166),u=n(167),l=n(4),c=function(t){function e(e){var n=t.call(this,e)||this;return n.addTouchGroup=function(t){var e,r=l.keys(n.touchGroups.getData()),i=r.length;do{e="touch_"+ ++i}while(r.indexOf(e)>=0);n.touchGroups.submitObjectInsertOp([e],{})},n.addPath=function(t){var e,r=l.keys(n.paths.getData()),i=r.length;do{e="path_"+ ++i}while(r.indexOf(e)>=0);n.paths.submitObjectInsertOp([e],{})},n.touchGroups=n.props.doc.subDoc(["touchGroups"]),n.paths=n.props.doc.subDoc(["paths"]),n.touchGroups.subscribe(function(){n.setState({touchGroups:n.touchGroups.getData()})}),n.paths.subscribe(function(){n.setState({paths:n.paths.getData()})}),n.state={touchGroups:n.touchGroups.getData(),paths:n.paths.getData()},n}return i(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.doc,r=e.fsm,i=l.map(this.state.touchGroups,function(e,r){return o.createElement("div",{key:r},o.createElement("h5",null,r,o.createElement("button",{className:"float-right btn btn-sm btn-outline-danger",onClick:t.removeTouchGroup.bind(t,r)},"Delete")),o.createElement(a.TouchGroupDisplay,{doc:n,path:["touchGroups",r]}))}),c=l.map(this.state.paths,function(e,r){return o.createElement("div",{key:r},o.createElement("h5",null,r,o.createElement("button",{className:"float-right btn btn-sm btn-outline-danger",onClick:t.removePath.bind(t,r)},"Delete")),o.createElement(u.PathSpecDisplay,{doc:n,path:["paths",r]}))});return o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col"},o.createElement(s.FSMComponent,{doc:n,path:["fsm"],fsm:r}))),o.createElement("hr",null),o.createElement("div",{className:"row"},o.createElement("div",{className:"touchGroups col"},o.createElement("h2",null,"Touch Groups"),o.createElement("div",null,i),o.createElement("button",{className:"btn btn-dark btn-block",onClick:this.addTouchGroup},"+ Touch Group")),o.createElement("div",{className:"paths col"},o.createElement("h2",null,"Paths"),o.createElement("div",null,c),o.createElement("button",{className:"btn btn-dark btn-block",onClick:this.addPath},"+ Path"))))},e.prototype.removePath=function(t){this.paths.submitObjectDeleteOp([t])},e.prototype.removeTouchGroup=function(t){this.touchGroups.submitObjectDeleteOp([t])},e}(o.Component);e.FSMEditor=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),s=n(22),a=n(16),u=n(16),l=n(21),c=n(165);!function(t){t[t.START=0]="START",t[t.TIMEOUT=1]="TIMEOUT",t[t.TOUCH_GROUP=2]="TOUCH_GROUP"}(e.TransitionType||(e.TransitionType={}));var h=function(t){function e(e){var n=t.call(this,e)||this;return n.getForeignObject=function(t){var e=t.getElement(),r=document.createElement("body"),i=document.createElement("div");e.appendChild(r),r.appendChild(i),t.getDisplayType()===u.DISPLAY_TYPE.TRANSITION&&l.render(o.createElement(c.TransitionContents,{fod:t,fsm:n.props.fsm,touchGroups:n.touchGroups,paths:n.paths}),i)},n.divRef=function(t){if(t)new a.StateMachineDisplay(n.getFSM(),t,n.getForeignObject)},n.binding=new s.SDBBinding(n.props.doc,n.props.path,n.getFSM()),n.touchGroups=n.props.doc.subDoc(["touchGroups"]),n.paths=n.props.doc.subDoc(["paths"]),n.state={touchGroups:n.touchGroups.getData(),paths:n.paths.getData()},n}return i(e,t),e.prototype.render=function(){return o.createElement("div",{className:"fsm",ref:this.divRef})},e.prototype.getFSM=function(){return this.props.fsm},e}(o.Component);e.FSMComponent=h},function(t,e,n){var r,i,o;i="undefined"!==typeof window?window:this,o=function(t,e){var n=("undefined"!==typeof this?this:t).SVG=function(t){if(n.supported)return t=new n.Doc(t),n.parser.draw||n.prepare(),t};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=!!e.createElementNS&&!!e.createElementNS(n.ns,"svg").createSVGRect,!n.supported)return!1;n.did=1e3,n.eid=function(t){return"Svgjs"+c(t)+n.did++},n.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},n.extend=function(){var t,e,r,i;for(e=(t=[].slice.call(arguments)).pop(),i=t.length-1;i>=0;i--)if(t[i])for(r in e)t[i].prototype[r]=e[r];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,n.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&n.extend(e,t.extend),t.construct&&n.extend(t.parent||n.Container,t.construct),e},n.adopt=function(e){return e?e.instance?e.instance:((r="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new n.Nested:new n.Doc:"linearGradient"==e.nodeName?new n.Gradient("linear"):"radialGradient"==e.nodeName?new n.Gradient("radial"):n[c(e.nodeName)]?new(n[c(e.nodeName)]):new n.Element(e)).type=e.nodeName,r.node=e,e.instance=r,r instanceof n.Doc&&r.namespace().defs(),r.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),r):null;var r},n.prepare=function(){var t=e.getElementsByTagName("body")[0],r=(t?new n.Doc(t):n.adopt(e.documentElement).nested()).size(2,0);n.parser={body:t||e.documentElement,draw:r.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:r.polyline().node,path:r.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},e.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(t,e){var n,r=t.length,i=[];for(n=0;n<r;n++)i.push(e(t[n]));return i},filter:function(t,e){var n,r=t.length,i=[];for(n=0;n<r;n++)e(t[n])&&i.push(t[n]);return i},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(t){var e,r;(this.r=0,this.g=0,this.b=0,t)&&("string"===typeof t?n.regex.isRgb.test(t)?(e=n.regex.rgb.exec(t.replace(n.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):n.regex.isHex.test(t)&&(e=n.regex.hex.exec(4==(r=t).length?["#",r.substring(1,2),r.substring(1,2),r.substring(2,3),r.substring(2,3),r.substring(3,4),r.substring(3,4)].join(""):r),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+h(this.r)+h(this.g)+h(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new n.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new n.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),n.Color.test=function(t){return t+="",n.regex.isHex.test(t)||n.regex.isRgb.test(t)},n.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},n.Color.isColor=function(t){return n.Color.isRgb(t)||n.Color.test(t)},n.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},n.extend(n.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,r=this.value.length,i=[];e<r;e++)i.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new n.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=function t(e){var n=e.slice(0);for(var r=n.length;r--;)Array.isArray(n[r])&&(n[r]=t(n[r]));return n}(this.value),t}}),n.PointArray=function(t,e){n.Array.call(this,t,e||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,r=this.value.length,i=[];e<r;e++)i.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new n.PointArray(i)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map(function(t){return t.slice()});if(null!=t[0].x)return t.map(function(t){return[t.x,t.y]})}else t=t.trim().split(n.regex.delimiter).map(parseFloat);t.length%2!==0&&t.pop();for(var r=0,i=t.length;r<i;r+=2)e.push([t[r],t[r+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r=this.value.length-1;r>=0;r--)this.value[r]=[this.value[r][0]+t,this.value[r][1]+e];return this},size:function(t,e){var n,r=this.bbox();for(n=this.value.length-1;n>=0;n--)r.width&&(this.value[n][0]=(this.value[n][0]-r.x)*t/r.width+r.x),r.height&&(this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var r={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},i="mlhvqtcsaz".split(""),o=0,s=i.length;o<s;++o)r[i[o]]=function(t){return function(e,n,i){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var o=0,s=e.length;o<s;++o)e[o]=e[o]+(o%2?n.y:n.x);return r[t](e,n,i)}}(i[o].toUpperCase());n.PathArray=function(t,e){n.Array.call(this,t,e||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e][0],null!=t[e][1]&&(r+=t[e][1],null!=t[e][2]&&(r+=" ",r+=t[e][2],null!=t[e][3]&&(r+=" ",r+=t[e][3],r+=" ",r+=t[e][4],null!=t[e][5]&&(r+=" ",r+=t[e][5],r+=" ",r+=t[e][6],null!=t[e][7]&&(r+=" ",r+=t[e][7])))));return r+" "}(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r,i=this.value.length-1;i>=0;i--)"M"==(r=this.value[i][0])||"L"==r||"T"==r?(this.value[i][1]+=t,this.value[i][2]+=e):"H"==r?this.value[i][1]+=t:"V"==r?this.value[i][1]+=e:"C"==r||"S"==r||"Q"==r?(this.value[i][1]+=t,this.value[i][2]+=e,this.value[i][3]+=t,this.value[i][4]+=e,"C"==r&&(this.value[i][5]+=t,this.value[i][6]+=e)):"A"==r&&(this.value[i][6]+=t,this.value[i][7]+=e);return this},size:function(t,e){var n,r,i=this.bbox();for(n=this.value.length-1;n>=0;n--)"M"==(r=this.value[n][0])||"L"==r||"T"==r?(this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*e/i.height+i.y):"H"==r?this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x:"V"==r?this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y:"C"==r||"S"==r||"Q"==r?(this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*e/i.height+i.y,this.value[n][3]=(this.value[n][3]-i.x)*t/i.width+i.x,this.value[n][4]=(this.value[n][4]-i.y)*e/i.height+i.y,"C"==r&&(this.value[n][5]=(this.value[n][5]-i.x)*t/i.width+i.x,this.value[n][6]=(this.value[n][6]-i.y)*e/i.height+i.y)):"A"==r&&(this.value[n][1]=this.value[n][1]*t/i.width,this.value[n][2]=this.value[n][2]*e/i.height,this.value[n][6]=(this.value[n][6]-i.x)*t/i.width+i.x,this.value[n][7]=(this.value[n][7]-i.y)*e/i.height+i.y);return this},equalCommands:function(t){var e,r,i;for(t=new n.PathArray(t),i=this.value.length===t.value.length,e=0,r=this.value.length;i&&e<r;e++)i=this.value[e][0]===t.value[e][0];return i},morph:function(t){return t=new n.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,r,i,o,s=this.value,a=this.destination.value,u=[],l=new n.PathArray;for(e=0,r=s.length;e<r;e++){for(u[e]=[s[e][0]],i=1,o=s[e].length;i<o;i++)u[e][i]=s[e][i]+(a[e][i]-s[e][i])*t;"A"===u[e][0]&&(u[e][4]=+(0!=u[e][4]),u[e][5]=+(0!=u[e][5]))}return l.value=u,l},parse:function(t){if(t instanceof n.PathArray)return t.valueOf();var e,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(n.regex.numbersWithDots,u).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var o=[],s=new n.Point,a=new n.Point,l=0,c=t.length;do{n.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),o.push(r[e].call(null,t.slice(l,l+=i[e.toUpperCase()]).map(parseFloat),s,a))}while(c>l);return o},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(t,e){this.value=0,this.unit=e||"","number"===typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"===typeof t?(e=t.match(n.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof n.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new n.Number(t),new n.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new n.Number(t),new n.Number(this-t,this.unit||t.unit)},times:function(t){return t=new n.Number(t),new n.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new n.Number(t),new n.Number(this/t,this.unit||t.unit)},to:function(t){var e=new n.Number(this);return"string"===typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new n.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new n.Number(this.destination).minus(this).times(t).plus(this):this}}}),n.Element=n.invent({create:function(t){this._stroke=n.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var r=f(this,t,e);return this.width(new n.Number(r.width)).height(new n.Number(r.height))},clone:function(t){this.writeDataToDom();var e=v(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(n.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return n.get(this.attr(t))},parent:function(e){var r=this;if(!r.node.parentNode)return null;if(r=n.adopt(r.node.parentNode),!e)return r;for(;r&&r.node instanceof t.SVGElement;){if("string"===typeof e?r.matches(e):r instanceof e)return r;if(!r.node.parentNode||"#document"==r.node.parentNode.nodeName)return null;r=n.adopt(r.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var r=e.createElement("svg");if(!(t&&this instanceof n.Parent))return r.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),r.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");r.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,o=r.firstChild.childNodes.length;i<o;i++)this.node.appendChild(r.firstChild.firstChild);return this},writeDataToDom:function(){(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()});return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),n.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},n.morph=function(t){return function(e,r){return new n.MorphObj(e,r).at(t)}},n.Situation=n.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(t.duration).valueOf(),this.delay=new n.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,r){"object"==typeof t&&(e=t.ease,r=t.delay,t=t.duration);var i=new n.Situation({duration:t||1e3,delay:r||0,ease:n.easing[e||"-"]||e});return this.queue(i),this},delay:function(t){var e=new n.Situation({duration:t,delay:0,ease:n.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof n.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof n.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,r,i=this.situation;if(i.init)return this;for(t in i.animations)for(r=this.target()[t](),Array.isArray(r)||(r=[r]),Array.isArray(i.animations[t])||(i.animations[t]=[i.animations[t]]),e=r.length;e--;)i.animations[t][e]instanceof n.Number&&(r[e]=new n.Number(r[e])),i.animations[t][e]=r[e].morph(i.animations[t][e]);for(t in i.attrs)i.attrs[t]=new n.MorphObj(this.target().attr(t),i.attrs[t]);for(t in i.styles)i.styles[t]=new n.MorphObj(this.target().style(t),i.styles[t]);return i.initialTransformation=this.target().matrixify(),i.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null==t||t,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed="undefined"==typeof t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last();return this.target().on("finished.fx",function n(r){r.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))}),this._callStart()},during:function(t){var e=this.last(),r=function(r){r.detail.situation==e&&t.call(this,r.detail.pos,n.morph(r.detail.pos),r.detail.eased,e)};return this.target().off("during.fx",r).on("during.fx",r),this.after(function(){this.off("during.fx",r)}),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,n.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){var e,n,r;(t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops)?(e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,r=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,r=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-r)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos);this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var i=this.situation.ease(this.pos);for(var o in this.situation.once)o>this.lastPos&&o<=i&&(this.situation.once[o].call(this.target(),this.pos,i),delete this.situation.once[o]);return this.active&&this.target().fire("during",{pos:this.pos,eased:i,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=i,this):this},eachAt:function(){var t,e,r,i=this,o=this.target(),s=this.situation;for(t in s.animations)r=[].concat(s.animations[t]).map(function(t){return"string"!==typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),o[t].apply(o,r);for(t in s.attrs)r=[t].concat(s.attrs[t]).map(function(t){return"string"!==typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),o.attr.apply(o,r);for(t in s.styles)r=[t].concat(s.styles[t]).map(function(t){return"string"!==typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),o.style.apply(o,r);if(s.transforms.length){for(r=s.initialTransformation,t=0,e=s.transforms.length;t<e;t++){var a=s.transforms[t];a instanceof n.Matrix?r=a.relative?r.multiply((new n.Matrix).morph(a).at(s.ease(this.pos))):r.morph(a).at(s.ease(this.pos)):(a.relative||a.undo(r.extract()),r=r.multiply(a.at(s.ease(this.pos))))}o.matrix(r)}return this},once:function(t,e,n){var r=this.last();return n||(t=r.ease(t)),r.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(t,e,r){return(this.fx||(this.fx=new n.FX(this))).animate(t,e,r)},delay:function(t){return(this.fx||(this.fx=new n.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),n.MorphObj=n.invent({create:function(t,e){return n.Color.isColor(e)?new n.Color(t).morph(e):n.regex.delimiter.test(t)?n.regex.pathLetters.test(t)?new n.PathArray(t).morph(e):new n.Array(t).morph(e):n.regex.numberAndUnit.test(e)?new n.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(t,e,n){if("object"==typeof t)for(var r in t)this.attr(r,t[r]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var n in t)this.style(n,t[n]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof n.G)return this.transform({x:t},e),this;var r=new n.Number(t);return r.relative=e,this.add("x",r)},y:function(t,e){if(this.target()instanceof n.G)return this.transform({y:t},e),this;var r=new n.Number(t);return r.relative=e,this.add("y",r)},cx:function(t){return this.add("cx",new n.Number(t))},cy:function(t){return this.add("cy",new n.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var r;this.target()instanceof n.Text?this.attr("font-size",t):(t&&e||(r=this.target().bbox()),t||(t=r.width/r.height*e),e||(e=r.height/r.width*t),this.add("width",new n.Number(t)).add("height",new n.Number(e)));return this},width:function(t){return this.add("width",new n.Number(t))},height:function(t){return this.add("height",new n.Number(t))},plot:function(t,e,n,r){return 4==arguments.length?this.plot([t,e,n,r]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new n.Number(t)):this},viewbox:function(t,e,r,i){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(t,e,r,i)),this},update:function(t){if(this.target()instanceof n.Stop){if("number"==typeof t||t instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),n.Box=n.invent({create:function(t,e,r,i){if(!("object"!=typeof t||t instanceof n.Element))return n.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=r,this.height=i),m(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,m(e)},transform:function(t){var e,r=1/0,i=-1/0,o=1/0,s=-1/0;return[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)].forEach(function(e){e=e.transform(t),r=Math.min(r,e.x),i=Math.max(i,e.x),o=Math.min(o,e.y),s=Math.max(s,e.y)}),(e=new this.constructor).x=r,e.width=i-r,e.y=o,e.height=s-o,m(e),e}}}),n.BBox=n.invent({create:function(t){if(n.Box.apply(this,[].slice.call(arguments)),t instanceof n.Element){var r;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var i=t.node;i.parentNode;)i=i.parentNode;if(i!=e)throw new Exception("Element not in the dom")}r=t.node.getBBox()}catch(e){if(t instanceof n.Shape){var o=t.clone(n.parser.draw.instance).show();r=o.node.getBBox(),o.remove()}else r={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}n.Box.call(this,r)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),n.RBox=n.invent({create:function(t){n.Box.apply(this,[].slice.call(arguments)),t instanceof n.Element&&n.Box.call(this,t.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new n.RBox(this).transform(t.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(t){var e,r=p([1,0,0,1,0,0]);for(t=t instanceof n.Element?t.matrixify():"string"===typeof t?p(t.split(n.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(t)?p(t):"object"===typeof t?t:r,e=b.length-1;e>=0;--e)this[b[e]]=null!=t[b[e]]?t[b[e]]:r[b[e]]},extend:{extract:function(){var t=d(this,0,1),e=d(this,1,0),r=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(r*Math.PI/180)+this.f*Math.sin(r*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(r*Math.PI/180)+this.e*Math.sin(-r*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-r,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:r,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(t){return this.destination=new n.Matrix(t),this},at:function(t){return this.destination?new n.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new n.Matrix(this.native().multiply(function(t){t instanceof n.Matrix||(t=new n.Matrix(t));return t}(t).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(t,e){return new n.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,r,i){return 1==arguments.length?e=t:3==arguments.length&&(i=r,r=e,e=t),this.around(r,i,new n.Matrix(t,0,0,e,0,0))},rotate:function(t,e,r){return t=n.utils.radians(t),this.around(e,r,new n.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,r,i){return 1==arguments.length?e=t:3==arguments.length&&(i=r,r=e,e=t),t=n.utils.radians(t),e=n.utils.radians(e),this.around(r,i,new n.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,r){return this.multiply(new n.Matrix(1,0,0,1,t||0,e||0)).multiply(r).multiply(new n.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=n.parser.native.createSVGMatrix(),e=b.length-1;e>=0;e--)t[b[e]]=this[b[e]];return t},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new n.Matrix(e)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(t,e){var n;n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(t,e){return this.destination=new n.Point(t,e),this},at:function(t){return this.destination?new n.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=n.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new n.Point(this.native().matrixTransform(t.native()))}}}),n.extend(n.Element,{point:function(t,e){return new n.Point(t,e).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(t,e,r){if(null==t){for(t={},r=(e=this.node.attributes).length-1;r>=0;r--)t[e[r].nodeName]=n.regex.isNumber.test(e[r].nodeValue)?parseFloat(e[r].nodeValue):e[r].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?n.defaults.attrs[t]:n.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(n.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof n.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"===typeof e?e=new n.Number(e):n.Color.isColor(e)?e=new n.Color(e):Array.isArray(e)&&(e=new n.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"===typeof r?this.node.setAttributeNS(r,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),n.extend(n.Element,{transform:function(t,e){var r,i;if("object"!==typeof t)return r=new n.Matrix(this).extract(),"string"===typeof t?r[t]:r;if(r=new n.Matrix(this),e=!!e||!!t.relative,null!=t.a)r=e?r.multiply(new n.Matrix(t)):new n.Matrix(t);else if(null!=t.rotation)g(t,this),r=e?r.rotate(t.rotation,t.cx,t.cy):r.rotate(t.rotation-r.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(g(t,this),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var o=r.extract();t.scaleX=1*t.scaleX/o.scaleX,t.scaleY=1*t.scaleY/o.scaleY}r=r.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(g(t,this),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){o=r.extract();r=r.multiply((new n.Matrix).skew(o.skewX,o.skewY,t.cx,t.cy).inverse())}r=r.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?this.bbox()["c"+t.flip]:t.offset:null==t.offset?(i=this.bbox(),t.flip=i.cx,t.offset=i.cy):t.flip=t.offset,r=(new n.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?r=r.translate(t.x,t.y):(null!=t.x&&(r.e=t.x),null!=t.y&&(r.f=t.y)));return this.attr("transform",r)}}),n.extend(n.FX,{transform:function(t,e){var r,i,o=this.target();return"object"!==typeof t?(r=new n.Matrix(o).extract(),"string"===typeof t?r[t]:r):(e=!!e||!!t.relative,null!=t.a?r=new n.Matrix(t):null!=t.rotation?(g(t,o),r=new n.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(g(t,o),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,r=new n.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(g(t,o),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,r=new n.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?o.bbox()["c"+t.flip]:t.offset:null==t.offset?(i=o.bbox(),t.flip=i.cx,t.offset=i.cy):t.flip=t.offset,r=(new n.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(r=new n.Translate(t.x,t.y)),r?(r.relative=e,this.last().transforms.push(r),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(n.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(p(e[1])):t[e[0]].apply(t,e[1])},new n.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=t[n];else if("object"==typeof t)for(n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=t[this.arguments[n]];this.inversed=!1,!0===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],r=0,i=this.arguments.length;r<i;++r)e.push(this[this.arguments[r]]);var o=this._undo||new n.Matrix;return o=(new n.Matrix).morph(n.Matrix.prototype[this.method].apply(o,e)).at(t),this.inversed?o.inverse():o},undo:function(t){for(var e=0,r=this.arguments.length;e<r;++e)t[this.arguments[e]]="undefined"==typeof this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(n[c(this.method)])(t,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new n.Matrix).rotate((new n.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!n.regex.isCss.test(t))return this.node.style[l(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[l(t)]=null===e||n.regex.isBlank.test(e)?"":e;return this}}),n.Parent=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(t){return n.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return n.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var r,i,o=this.children();for(r=0,i=o.length;r<i;r++)o[r]instanceof n.Element&&t.apply(o[r],[r,o]),e&&o[r]instanceof n.Container&&o[r].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(t,e){return 0===e||this instanceof n.Defs||this.node==n.parser.draw?this:(t=t||(this instanceof n.Doc?this:this.parent(n.Parent)),e=e||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),n.Container=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(t){var e,r,i,o,s,a,u,l=1,c=1,h=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof n.Element){for(a=t,u=t,s=(t.attr("viewBox")||"").match(h),t.bbox,i=new n.Number(t.width()),o=new n.Number(t.height());"%"==i.unit;)l*=i.value,i=new n.Number(a instanceof n.Doc?a.parent().offsetWidth:a.parent().width()),a=a.parent();for(;"%"==o.unit;)c*=o.value,o=new n.Number(u instanceof n.Doc?u.parent().offsetHeight:u.parent().height()),u=u.parent();this.x=0,this.y=0,this.width=i*l,this.height=o*c,this.zoom=1,s&&(e=parseFloat(s[0]),r=parseFloat(s[1]),i=parseFloat(s[2]),o=parseFloat(s[3]),this.zoom=this.width/this.height>i/o?this.height/o:this.width/i,this.x=e,this.y=r,this.width=i,this.height=o)}else t="string"===typeof t?t.match(h).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,r,i){return this.destination=new n.ViewBox(t,e,r,i),this},at:function(t){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:n.Container,construct:{viewbox:function(t,e,r,i){return 0==arguments.length?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(t,e,r,i))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){n.Element.prototype[t]=function(e){return n.on(this.node,t,e),this}}),n.listeners=[],n.handlerMap=[],n.listenerId=0,n.on=function(t,e,r,i,o){var s=r.bind(i||t.instance||t),a=(n.handlerMap.indexOf(t)+1||n.handlerMap.push(t))-1,u=e.split(".")[0],l=e.split(".")[1]||"*";n.listeners[a]=n.listeners[a]||{},n.listeners[a][u]=n.listeners[a][u]||{},n.listeners[a][u][l]=n.listeners[a][u][l]||{},r._svgjsListenerId||(r._svgjsListenerId=++n.listenerId),n.listeners[a][u][l][r._svgjsListenerId]=s,t.addEventListener(u,s,o||!1)},n.off=function(t,e,r){var i=n.handlerMap.indexOf(t),o=e&&e.split(".")[0],s=e&&e.split(".")[1],a="";if(-1!=i)if(r){if("function"==typeof r&&(r=r._svgjsListenerId),!r)return;n.listeners[i][o]&&n.listeners[i][o][s||"*"]&&(t.removeEventListener(o,n.listeners[i][o][s||"*"][r],!1),delete n.listeners[i][o][s||"*"][r])}else if(s&&o){if(n.listeners[i][o]&&n.listeners[i][o][s]){for(r in n.listeners[i][o][s])n.off(t,[o,s].join("."),r);delete n.listeners[i][o][s]}}else if(s)for(e in n.listeners[i])for(a in n.listeners[i][e])s===a&&n.off(t,[e,s].join("."));else if(o){if(n.listeners[i][o]){for(a in n.listeners[i][o])n.off(t,[o,a].join("."));delete n.listeners[i][o]}}else{for(e in n.listeners[i])n.off(t,e);delete n.listeners[i],delete n.handlerMap[i]}},n.extend(n.Element,{on:function(t,e,r,i){return n.on(this.node,t,e,r,i),this},off:function(t,e){return n.off(this.node,t,e),this},fire:function(e,r){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new n.CustomEvent(e,{detail:r,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,n.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var t;this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(t):this._defs=new n.Defs,this.node.appendChild(this._defs.node));return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,n=v(e.cloneNode(!0));return t?(t.node||t).appendChild(n.node):e.parentNode.insertBefore(n.node,e.nextSibling),n}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof n.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof n.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(t){return this.masker=t instanceof n.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(t){return this.clipper=t instanceof n.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(t){this.constructor.call(this,n.create(t+"Gradient")),this.type=t},inherit:n.Container,extend:{at:function(t,e,r){return this.put(new n.Stop).update(t,e,r)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,r){return"transform"==t&&(t="gradientTransform"),n.Container.prototype.attr.call(this,t,e,r)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),n.extend(n.Gradient,n.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(t),fy:new n.Number(e)}):this.attr({x1:new n.Number(t),y1:new n.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(t),cy:new n.Number(e)}):this.attr({x2:new n.Number(t),y2:new n.Number(e)})}}),n.extend(n.Defs,{gradient:function(t,e){return this.put(new n.Gradient(t)).update(e)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(t){return("number"==typeof t||t instanceof n.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new n.Number(t.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,r){return"transform"==t&&(t="patternTransform"),n.Container.prototype.attr.call(this,t,e,r)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),n.extend(n.Defs,{pattern:function(t,e,r){return this.put(new n.Pattern).update(r).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element}),n.Bare=n.invent({create:function(t,e){if(this.constructor.call(this,n.create(t)),e)for(var r in e.prototype)"function"===typeof e.prototype[r]&&(this[r]=e.prototype[r])},inherit:n.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),n.extend(n.Parent,{element:function(t,e){return this.put(new n.Bare(t,e))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,n.xlink)}},construct:{use:function(t,e){return this.put(new n.Use).element(t,e)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(t,e){return this.put(new n.Rect).size(t,e)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(t){return this.put(new n.Circle).rx(new n.Number(t).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(t,e){return this.put(new n.Ellipse).size(t,e).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),n.extend(n.Circle,n.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new n.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new n.Number(t).divide(2))},size:function(t,e){var r=f(this,t,e);return this.rx(new n.Number(r.width).divide(2)).ry(new n.Number(r.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,r,i){return null==t?this.array():(t="undefined"!==typeof e?{x1:t,y1:e,x2:r,y2:i}:new n.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=f(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,r,i){return n.Line.prototype.plot.apply(this.put(new n.Line),null!=t?[t,e,r,i]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(t){return this.put(new n.Polyline).plot(t||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(t){return this.put(new n.Polygon).plot(t||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new n.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=f(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new n.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=f(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new n.Path).plot(t||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(e){if(!e)return this;var r=this,i=new t.Image;return n.on(i,"load",function(){n.off(i);var t=r.parent(n.Pattern);null!==t&&(0==r.width()&&0==r.height()&&r.size(i.width,i.height),t&&0==t.width()&&0==t.height()&&t.size(r.width(),r.height()),"function"===typeof r._loaded&&r._loaded.call(r,{width:i.width,height:i.height,ratio:i.width/i.height,url:e}))}),n.on(i,"error",function(t){n.off(i),"function"===typeof r._error&&r._error.call(r,t)}),this.attr("href",i.src=this.src=e,n.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,r){return this.put(new n.Image).load(t).size(e||0,r||e||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"===typeof e?e-this.bbox().y:0;return null==t?"number"===typeof e?e-n:e:this.attr("y","number"===typeof t.valueOf()?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if("undefined"===typeof t){t="";for(var e=this.node.childNodes,r=0,i=e.length;r<i;++r)0!=r&&3!=e[r].nodeType&&1==n.adopt(e[r]).dom.newLined&&(t+="\n"),t+=e[r].textContent;return t}if(this.clear().build(!0),"function"===typeof t)t.call(this,this);else{r=0;for(var o=(t=t.split("\n")).length;r<o;r++)this.tspan(t[r]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new n.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=n.utils.map(n.utils.filterSVGElements(t.childNodes),function(t){return n.adopt(t)});return new n.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,r=0,i=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?r+=i:(this.attr("dy",i+r),r=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new n.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new n.Text).text(t)},plain:function(t){return this.put(new n.Text).plain(t)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"===typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(n.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,r=new n.Tspan;return!1===this._build&&this.clear(),e.appendChild(r.node),r.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(t){for(var e=new n.TextPath,r=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+r,n.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(t){return this.attr("href",t,n.xlink)},show:function(t){return this.attr("show",t,n.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new n.A).to(t)}}}),n.extend(n.Element,{linkTo:function(t){var e=new n.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),n.extend(n.Defs,{marker:function(t,e,r){return this.put(new n.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(r)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(t,e,r,i){var o=["marker"];return"all"!=t&&o.push(t),o=o.join("-"),t=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(e,r,i),this.attr(o,t)}});var a={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function u(t,e,r,i){return r+i.replace(n.regex.dots," .")}function l(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function f(t,e,n){if(null==e||null==n){var r=t.bbox();null==e?e=r.width/r.height*n:null==n&&(n=r.height/r.width*e)}return{width:e,height:n}}function d(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function g(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function v(e){for(var r=e.childNodes.length-1;r>=0;r--)e.childNodes[r]instanceof t.SVGElement&&v(e.childNodes[r]);return n.adopt(e).id(n.eid(e.nodeName))}function m(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function y(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach(function(t){var e,r={};r[t]=function(r){if("undefined"==typeof r)return this;if("string"==typeof r||n.Color.isRgb(r)||r&&"function"===typeof r.fill)this.attr(t,r);else for(e=a[t].length-1;e>=0;e--)null!=r[a[t][e]]&&this.attr(a.prefix(t,a[t][e]),r[a[t][e]]);return this},n.extend(n.Element,n.FX,r)}),n.extend(n.Element,n.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,r){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:r})},scale:function(t,e,n,r){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:r})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new n.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new n.Number(t).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(t){return this.y(new n.Number(t).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(t,e){var r=(this._target||this).type;return"radial"==r||"circle"==r?this.attr("r",new n.Number(t)):this.rx(t).ry(null==e?t:e)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),n.Set=n.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new n.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new n.Set(t)}}}),n.FX.Set=n.invent({create:function(t){this.set=t}}),n.Set.inherit=function(){var t=[];for(var e in n.Shape.prototype)"function"==typeof n.Shape.prototype[e]&&"function"!=typeof n.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){n.Set.prototype[t]=function(){for(var e=0,r=this.members.length;e<r;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new n.FX.Set(this)):this}}),t=[],n.FX.prototype)"function"==typeof n.FX.prototype[e]&&"function"!=typeof n.FX.Set.prototype[e]&&t.push(e);t.forEach(function(t){n.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},n.extend(n.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"===typeof e||"number"===typeof e?e:JSON.stringify(e));return this}}),n.extend(n.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(t){var r=e.getElementById(function(t){var e=(t||"").toString().match(n.regex.reference);if(e)return e[1]}(t)||t);return n.adopt(r)},n.select=function(t,r){return new n.Set(n.utils.map((r||e).querySelectorAll(t),function(t){return n.adopt(t)}))},n.extend(n.Parent,{select:function(t){return n.select(t,this.node)}});var b="abcdef".split("");if("function"!==typeof t.CustomEvent){var w=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var r=e.createEvent("CustomEvent");return r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),r};w.prototype=t.Event.prototype,n.CustomEvent=w}else n.CustomEvent=t.CustomEvent;return function(e){for(var n=0,r=["moz","webkit"],i=0;i<r.length&&!t.requestAnimationFrame;++i)e.requestAnimationFrame=e[r[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[i]+"CancelAnimationFrame"]||e[r[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=e.setTimeout(function(){t(r+i)},i);return n=r+i,o},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),n},void 0===(r=function(){return o(i,i.document)}.call(e,n,e,t))||(t.exports=r)},function(t,e){!function(){"use strict";function t(t,i,o,s,a,u,l){for(var c=t.slice(i,o||l),h=s.slice(a,u||l),f=0,d={pos:[0,0],start:[0,0]},p={pos:[0,0],start:[0,0]};;){if(c[f]=e.call(d,c[f]),h[f]=e.call(p,h[f]),c[f][0]!=h[f][0]||"M"==c[f][0]||"A"==c[f][0]&&(c[f][4]!=h[f][4]||c[f][5]!=h[f][5])?(Array.prototype.splice.apply(c,[f,1].concat(r.call(d,c[f]))),Array.prototype.splice.apply(h,[f,1].concat(r.call(p,h[f])))):(c[f]=n.call(d,c[f]),h[f]=n.call(p,h[f])),++f==c.length&&f==h.length)break;f==c.length&&c.push(["C",d.pos[0],d.pos[1],d.pos[0],d.pos[1],d.pos[0],d.pos[1]]),f==h.length&&h.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]])}return{start:c,dest:h}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function n(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function r(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":t=(e=function(t,e){var n,r,i,o,s,a,u,l,c,h,f,d,p,g,v,m,y,b,w,x,_,S,k,T,C,E,O=Math.abs(e[1]),M=Math.abs(e[2]),A=e[3]%360,P=e[4],D=e[5],N=e[6],L=e[7],I=new SVG.Point(t),R=new SVG.Point(N,L),j=[];if(0===O||0===M||I.x===R.x&&I.y===R.y)return[["C",I.x,I.y,R.x,R.y,R.x,R.y]];n=new SVG.Point((I.x-R.x)/2,(I.y-R.y)/2).transform((new SVG.Matrix).rotate(A)),(r=n.x*n.x/(O*O)+n.y*n.y/(M*M))>1&&(r=Math.sqrt(r),O*=r,M*=r);i=(new SVG.Matrix).rotate(A).scale(1/O,1/M).rotate(-A),I=I.transform(i),R=R.transform(i),o=[R.x-I.x,R.y-I.y],a=o[0]*o[0]+o[1]*o[1],s=Math.sqrt(a),o[0]/=s,o[1]/=s,u=a<4?Math.sqrt(1-a/4):0,P===D&&(u*=-1);l=new SVG.Point((R.x+I.x)/2+u*-o[1],(R.y+I.y)/2+u*o[0]),c=new SVG.Point(I.x-l.x,I.y-l.y),h=new SVG.Point(R.x-l.x,R.y-l.y),f=Math.acos(c.x/Math.sqrt(c.x*c.x+c.y*c.y)),c.y<0&&(f*=-1);d=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(d*=-1);D&&f>d&&(d+=2*Math.PI);!D&&f<d&&(d-=2*Math.PI);for(g=Math.ceil(2*Math.abs(f-d)/Math.PI),m=[],y=f,p=(d-f)/g,v=4*Math.tan(p/4)/3,_=0;_<=g;_++)w=Math.cos(y),b=Math.sin(y),x=new SVG.Point(l.x+w,l.y+b),m[_]=[new SVG.Point(x.x+v*b,x.y-v*w),x,new SVG.Point(x.x-v*b,x.y+v*w)],y+=p;for(m[0][0]=m[0][1].clone(),m[m.length-1][2]=m[m.length-1][1].clone(),i=(new SVG.Matrix).rotate(A).scale(O,M).rotate(-A),_=0,S=m.length;_<S;_++)m[_][0]=m[_][0].transform(i),m[_][1]=m[_][1].transform(i),m[_][2]=m[_][2].transform(i);for(_=1,S=m.length;_<S;_++)x=m[_-1][2],k=x.x,T=x.y,x=m[_][0],C=x.x,E=x.y,x=m[_][1],N=x.x,L=x.y,j.push(["C",k,T,C,E,N,L]);return j}(this.pos,t))[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function i(t,e){if(!1===e)return!1;for(var n=e,r=t.length;n<r;++n)if("M"==t[n][0])return n;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var n=this.value,r=this.parse(e),o=0,s=0,a=!1,u=!1;!1!==o||!1!==s;){var l;a=i(n,!1!==o&&o+1),u=i(r,!1!==s&&s+1),!1===o&&(o=0==(l=new SVG.PathArray(c.start).bbox()).height||0==l.width?n.push(n[0])-1:n.push(["M",l.x+l.width/2,l.y+l.height/2])-1),!1===s&&(s=0==(l=new SVG.PathArray(c.dest).bbox()).height||0==l.width?r.push(r[0])-1:r.push(["M",l.x+l.width/2,l.y+l.height/2])-1);var c=t(n,o,a,r,s,u);n=n.slice(0,o).concat(c.start,!1===a?[]:n.slice(a)),r=r.slice(0,s).concat(c.dest,!1===u?[]:r.slice(u)),o=!1!==a&&o+c.start.length,s=!1!==u&&s+c.dest.length}return this.value=n,this.destination=new SVG.PathArray,this.destination.value=r,this}})}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(16),i=n(70),o=n(71);e.SVGStateDisplay=class extends i.SVGComponentDisplay{constructor(t,e,n){super(t,e,r.DISPLAY_TYPE.STATE,n),this.onMouseout=(()=>{this.setRemoveControlsTimeout()}),this.showControls=(()=>{const{x:t,y:e,width:n,height:r}=this.graph.node(this.name);this.deleteButton&&this.deleteButton.remove(),this.addOutgoingTransitionButton&&this.addOutgoingTransitionButton.remove();const i=t+n/2+10+5,s=e-r/2+10;this.deleteButton=new o.SVGShapeButton(this.svg,o.getXPath(i,s,10,45),i,s,15,"#000","#F00",2);const a=i,u=s+20+1;this.addOutgoingTransitionButton=new o.SVGShapeButton(this.svg,o.getArrowPath(a,u,10,45,5),a,u,15,"#000","#F00",2),this.deleteButton.addListener("click",()=>{this.emit("delete"),this.hideControls()}),this.addOutgoingTransitionButton.addListener("click",()=>{this.emit("addOutgoingTransition"),this.hideControls()}),this.deleteButton.addListener("mouseover",()=>{this.clearRemoveControlsTimeout()}),this.deleteButton.addListener("mouseout",()=>{this.setRemoveControlsTimeout()}),this.addOutgoingTransitionButton.addListener("mouseover",()=>{this.clearRemoveControlsTimeout()}),this.addOutgoingTransitionButton.addListener("mouseout",()=>{this.setRemoveControlsTimeout()})}),this.hideControls=(()=>{this.deleteButton&&(this.deleteButton.remove(),this.deleteButton=null),this.addOutgoingTransitionButton&&(this.addOutgoingTransitionButton.remove(),this.addOutgoingTransitionButton=null)}),this.rect=this.group.rect(n.width,n.height),this.foreignObject.front(),this.updateColors(),this.stateMachineDisplay.options.showControls&&(this.group.mouseover(this.showControls),this.group.mouseout(this.onMouseout))}clearRemoveControlsTimeout(){clearTimeout(this.removeControlsTimeout)}setRemoveControlsTimeout(){this.clearRemoveControlsTimeout(),this.removeControlsTimeout=setTimeout(this.hideControls,1e3)}updateStateDisplay(){const{foreground:t,background:e}=this.stateMachineDisplay.getStateColors(this.name);this.rect.stroke(t).fill(e)}updateLayout(){const{x:t,y:e,width:n,height:r}=this.graph.node(this.name);this.rect.size(n,r),this.stateMachineDisplay.options.animationDuration>0?this.rect.animate(this.stateMachineDisplay.options.animationDuration).center(t,e):this.rect.center(t,e),this.stateMachineDisplay.options.animationDuration>0?(this.foreignObject.animate(this.stateMachineDisplay.options.animationDuration).x(t-n/2).y(e-r/2),this.foreignObject.animate(this.stateMachineDisplay.options.animationDuration).size(n,r)):(this.foreignObject.x(t-n/2).y(e-r/2),this.foreignObject.size(n,r))}updateColors(t=0){const{foreground:e,background:n}=this.stateMachineDisplay.getStateColors(this.name);t>0?setTimeout(()=>this.rect.stroke(e).fill(n),t):this.rect.stroke(e).fill(n)}};e.SVGStartStateDisplay=class extends i.SVGComponentDisplay{constructor(t,e,n){super(t,e,r.DISPLAY_TYPE.STATE,n),this.showControls=(()=>{const{x:t,y:e,width:n,height:r}=this.graph.node(this.name);this.addOutgoingTransitionButton&&this.addOutgoingTransitionButton.remove();const i=t+n/2+10+5,s=e-r/2+10;this.addOutgoingTransitionButton=new o.SVGShapeButton(this.svg,o.getArrowPath(i,s,10,45,5),i,s,15,"#000","#F00",2),this.addOutgoingTransitionButton.addListener("click",()=>{this.emit("addOutgoingTransition"),this.hideControls()}),this.addOutgoingTransitionButton.addListener("mouseover",()=>{this.clearRemoveControlsTimeout()}),this.addOutgoingTransitionButton.addListener("mouseout",()=>{this.setRemoveControlsTimeout()})}),this.hideControls=(()=>{this.addOutgoingTransitionButton&&(this.addOutgoingTransitionButton.remove(),this.addOutgoingTransitionButton=null)}),this.onMouseout=(()=>{this.setRemoveControlsTimeout()}),this.circle=this.group.circle(n.width),this.foreignObject.front(),this.updateColors(),this.stateMachineDisplay.options.showControls&&(this.group.mouseover(this.showControls),this.group.mouseout(this.onMouseout))}clearRemoveControlsTimeout(){clearTimeout(this.removeControlsTimeout)}setRemoveControlsTimeout(){this.clearRemoveControlsTimeout(),this.removeControlsTimeout=setTimeout(this.hideControls,1e3)}updateStateDisplay(){const{foreground:t,background:e}=this.stateMachineDisplay.getStateColors(this.name);this.circle.stroke(t).fill(e)}updateLayout(){const{x:t,y:e,width:n,height:r}=this.graph.node(this.name);this.circle.radius(n),this.stateMachineDisplay.options.animationDuration>0?this.circle.animate(this.stateMachineDisplay.options.animationDuration).center(t,e):this.circle.center(t,e),this.stateMachineDisplay.options.animationDuration>0?(this.foreignObject.animate(this.stateMachineDisplay.options.animationDuration).x(t-n/2).y(e-r/2),this.foreignObject.animate(this.stateMachineDisplay.options.animationDuration).size(n,r)):(this.foreignObject.x(t-n/2).y(e-r/2),this.foreignObject.size(n,r))}updateColors(t=0){const{foreground:e,background:n}=this.stateMachineDisplay.getStateColors(this.name);t>0?setTimeout(()=>this.circle.stroke(e).fill(n),t):this.circle.stroke(e).fill(n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(33),o=n(16),s=n(70),a=n(71);class u extends s.SVGComponentDisplay{constructor(t,e,n,s){super(t,e.name,o.DISPLAY_TYPE.TRANSITION,n),this.onMouseout=(()=>{this.setRemoveControlsTimeout()}),this.showControls=(()=>{const t=this.getEdge(),{points:e,x:n,y:r,width:i,height:o}=this.graph.edge(t);this.deleteButton&&this.deleteButton.remove();const s=n+i/2+10+5,u=r-o/2+10;this.deleteButton=new a.SVGShapeButton(this.svg,a.getXPath(s,u,10,45),s,u,15,"#000","#F00",2),this.deleteButton.addListener("click",()=>{this.emit("delete"),this.hideControls()}),this.deleteButton.addListener("mouseover",()=>{this.clearRemoveControlsTimeout()}),this.deleteButton.addListener("mouseout",()=>{this.setRemoveControlsTimeout()})}),this.hideControls=(()=>{this.deleteButton&&(this.deleteButton.remove(),this.deleteButton=null)}),s?this.forEachInGroup(s,"path",t=>{s.removeElement(t),this.group.add(t),t.stroke({color:this.stateMachineDisplay.colors.transitionLineColor}).removeClass("nopointer"),this.path=t}):this.path=this.group.path("").stroke({color:this.stateMachineDisplay.colors.transitionLineColor,width:this.stateMachineDisplay.options.transitionThickness}).fill("none").removeClass("nopointer"),this.rect=this.group.rect(this.dimensions.width,this.dimensions.height).fill(this.stateMachineDisplay.colors.transitionBackgroundColor).stroke(this.stateMachineDisplay.colors.transitionLineColor),this.foreignObjectElement=this.group.element("foreignObject"),new i.ForeignObjectDisplay(this.fsm,this.foreignObjectElement.node,this.name,o.DISPLAY_TYPE.TRANSITION).on("setDimensions",t=>{const n=this.graph.edge(e);r.extend(n,{width:t.width,height:t.height})}),this.foreignObject.front(),this.updateColors(),this.stateMachineDisplay.options.showControls&&(this.group.mouseover(this.showControls),this.group.mouseout(this.onMouseout))}clearRemoveControlsTimeout(){clearTimeout(this.removeControlsTimeout)}setRemoveControlsTimeout(){this.clearRemoveControlsTimeout(),this.removeControlsTimeout=setTimeout(this.hideControls,1e3)}animateFiring(){const t=this.stateMachineDisplay.options.transitionAnimationDuration;this.forEachInGroup(this.group,"path",e=>{const n=e.length();let r=e.pointAt(0);const i=this.svg.path(`M ${r.x} ${r.y} l 0 0`).stroke({color:this.stateMachineDisplay.colors.activeColor,width:2*this.stateMachineDisplay.options.transitionThickness});for(let o=0;o<10;o++){const r=o*(n/10),s=(o+1)*(n/10),a=e.pointAt(r),u=e.pointAt(s);setTimeout(()=>{i.animate(t/10).plot(`M ${a.x} ${a.y} L ${u.x} ${u.y}`)},o*t/10)}setTimeout(()=>{i.remove()},t)}),setTimeout(()=>{this.rect.stroke({color:this.stateMachineDisplay.colors.activeColor}).fill(this.stateMachineDisplay.colors.activeBackgroundColor)},t/3),setTimeout(()=>{this.updateColors()},2*t/3),this.rect.front(),this.foreignObject.front()}animateIneligibleFiring(){const t=this.rect.cx(),e=this.rect.cy(),n=this.rect.width(),r=this.rect.height();this.rect.animate(25).size(n+10,r+10).center(t,e),this.rect.animate(75).size(n,r).center(t,e),setTimeout(()=>this.updateLayout(),110)}updateColors(){const{foreground:t,background:e}=this.stateMachineDisplay.getTransitionColors(this.name);this.path.stroke(t),this.rect.stroke(t).fill(e)}getGroup(){return this.group}getPath(){return this.path}getEdge(){let t;return r.each(this.graph.edges(),e=>{e.name===this.name&&(t=e)}),t}updateLayout(){const t=this.getEdge(),{points:e,x:n,y:r,width:i,height:o}=this.graph.edge(t),s=e.map(t=>`${t.x} ${t.y}`);let a=`M ${s[0]}`;for(let u=1;u<s.length-1;u+=2)a+=` Q ${s[u]} ${s[u+1]}`;const l=e[e.length-2],c=e[e.length-1];a+=u.getArrowPath(l,c),this.stateMachineDisplay.options.animationDuration>0?this.path.animate(this.stateMachineDisplay.options.animationDuration).plot(a):this.path.plot(a),this.rect.width(i).height(o),this.stateMachineDisplay.options.animationDuration>0?this.rect.animate(this.stateMachineDisplay.options.animationDuration).center(n,r):this.rect.center(n,r),this.rect.front(),this.stateMachineDisplay.options.animationDuration>0?(this.foreignObject.animate(this.stateMachineDisplay.options.animationDuration).x(n-i/2).y(r-o/2),this.foreignObject.animate(this.stateMachineDisplay.options.animationDuration).size(i,o)):(this.foreignObject.x(n-i/2).y(r-o/2),this.foreignObject.size(i,o)),this.foreignObject.front()}static getArrowPath(t,e){const n=Math.atan2(t.y-e.y,t.x-e.x),r=20*Math.PI/180;return` m ${10*Math.cos(n+r)} ${10*Math.sin(n+r)}`+` L ${e.x} ${e.y}`+` l ${10*Math.cos(n-r)} ${10*Math.sin(n-r)}`}}e.SVGTransitionDisplay=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),s=n(4),a=function(t){function e(e){var n=t.call(this,e)||this;n.containerRef=function(t){n.containerElement=t,n.updateFODDimensions()},n.onTimeoutChange=function(t){var e=t.currentTarget.value;n.setState({timeoutDelay:parseInt(e,null)})},n.handleSelectChange=function(t){var e=t.currentTarget.value;n.setState({type:e})},n.handleTouchGroupChange=function(t){var e=t.currentTarget.value;n.setState({selectedTouchGroup:e})},n.handleTouchEventChange=function(t){var e=t.currentTarget.value;n.setState({touchEventType:e})},n.handlePathChange=function(t){var e=t.currentTarget.value;n.setState({selectedPath:e})};var r=n.props.fsm.getTransitionPayload(n.props.fod.getName());return n.state=r?s.extend({paths:n.props.paths.getData(),touchGroups:n.props.touchGroups.getData()},r):{type:"none",timeoutDelay:1e3,paths:n.props.paths.getData(),touchGroups:n.props.touchGroups.getData()},n.props.paths.subscribe(function(){n.setState({paths:n.props.paths.getData()})}),n.props.touchGroups.subscribe(function(){n.setState({touchGroups:n.props.touchGroups.getData()})}),n.props.fod.setDimensions(200,570),n}return i(e,t),e.prototype.render=function(){var t,e=this.state.type;if("none"===e)t=o.createElement("span",null);else if("timeout"===e)t=o.createElement("input",{type:"number",value:this.state.timeoutDelay,onChange:this.onTimeoutChange});else if("touchgroup"===e){var n=void 0,r=s.map(this.state.touchGroups,function(t,e){return o.createElement("option",{key:e,value:e},e)});if("cross"===this.state.touchEventType){var i=s.map(this.state.paths,function(t,e){return o.createElement("option",{key:e,value:e},e)});n=o.createElement("span",null,o.createElement("label",null,"Path:"),o.createElement("select",{value:this.state.selectedPath,onChange:this.handlePathChange},o.createElement("option",{value:"none"},"(none)"),i))}t=o.createElement("span",null,o.createElement("select",{value:this.state.selectedTouchGroup,onChange:this.handleTouchGroupChange},o.createElement("option",{value:"none"},"(none)"),r),o.createElement("select",{value:this.state.touchEventType,onChange:this.handleTouchEventChange},o.createElement("option",{value:"start"},"Start"),o.createElement("option",{value:"end"},"End"),o.createElement("option",{value:"cross"},"Cross")),n)}return o.createElement("div",{ref:this.containerRef},o.createElement("select",{value:this.state.type,onChange:this.handleSelectChange},o.createElement("option",{value:"none"},"(none)"),o.createElement("option",{value:"timeout"},"timeout"),o.createElement("option",{value:"touchgroup"},"touch group")),t)},e.prototype.componentDidUpdate=function(t,e,n){var r=s.extend({},this.state,{paths:void 0,touchGroups:void 0});this.props.fsm.setTransitionPayload(this.props.fod.getName(),r),this.updateFODDimensions()},e.prototype.updateFODDimensions=function(){var t=this.containerElement;t.clientWidth,t.clientHeight},e}(o.Component);e.TransitionContents=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),u=n(72),l=n(4),c=function(t){function e(e){var n=t.call(this,e)||this;return n.onNFChange=function(t){return o(n,void 0,void 0,function(){return s(this,function(e){return this.subDoc.submitObjectReplaceOp(["numFingers"],t.value),this.setState(this.subDoc.getData()),[2]})})},n.initialize(),n}return i(e,t),e.prototype.render=function(){e.defaults;return a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,"Fingers"),a.createElement("td",{colSpan:3},a.createElement(u.Cell,{text:""+this.state.numFingers,onChange:this.onNFChange}))),a.createElement("tr",null,a.createElement("th",null,"x"),a.createElement("td",null,this.state.$xConstraint),a.createElement("th",null,"y"),a.createElement("td",null,this.state.$yConstraint)),a.createElement("tr",null,a.createElement("th",null,"startX"),a.createElement("td",null,this.state.$startXConstraint),a.createElement("th",null,"startY"),a.createElement("td",null,this.state.$startYConstraint)),a.createElement("tr",null,a.createElement("th",null,"endX"),a.createElement("td",null,this.state.$startXConstraint),a.createElement("th",null,"endY"),a.createElement("td",null,this.state.$endYConstraint))))},e.prototype.initialize=function(){return o(this,void 0,Promise,function(){var t,n=this;return s(this,function(r){return this.subDoc=this.props.doc.subDoc(this.props.path),(t=this.subDoc.getData())&&!l.isEqual(t,{})?this.state=l.clone(t):(this.subDoc.submitObjectReplaceOp([],e.defaults),this.state=e.defaults),this.subDoc.subscribe(function(t,e){"op"===t&&e.forEach(function(t){var e=t.p,r=t.oi;if(1===e.length&&r){var i={};i[e[0]]=r,n.setState(i)}})}),[2]})})},e.defaults={numFingers:1,downInside:null,downOutside:null,maxRadius:null,maxTouchInterval:null,greedy:!1},e}(a.Component);e.TouchGroupDisplay=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),s=n(72),a=n(4),u=function(t){function e(n){var r=t.call(this,n)||this;r.handleSelectChange=function(t){var e=t.currentTarget.value;r.props.doc.submitObjectReplaceOp(r.props.path.concat("type"),e),r.setState({type:e})},r.subDoc=r.props.doc.subDoc(r.props.path);var i=r.subDoc.getData();return i&&!a.isEqual(i,{})?r.state=a.clone(i):(r.subDoc.submitObjectReplaceOp([],e.defaults),r.state=a.clone(e.defaults)),r}return i(e,t),e.prototype.onCellChange=function(t,e){this.props.doc.submitObjectReplaceOp(this.props.path.concat(t),e.value)},e.prototype.render=function(){var t,e=this.state.type;return"line"===e?t=o.createElement("table",{className:"table"},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("th",null,"startX"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.lsx,onChange:this.onCellChange.bind(this,"lsx"),key:"lineStartX",placeholder:"x"})),o.createElement("th",null,"startY"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.lsy,onChange:this.onCellChange.bind(this,"lsy"),key:"lineStartY",placeholder:"y"}))),o.createElement("tr",null,o.createElement("th",null,"endX"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.lex,onChange:this.onCellChange.bind(this,"lex"),key:"lineEndX",placeholder:"x"})),o.createElement("th",null,"endY"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.ley,onChange:this.onCellChange.bind(this,"ley"),key:"lineEndY",placeholder:"y"}))))):"circle"===e?t=o.createElement("table",{className:"table"},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("th",null,"cx"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.ccx,onChange:this.onCellChange.bind(this,"ccx"),key:"circleCenterX",placeholder:"x"})),o.createElement("th",null,"cy"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.ccy,onChange:this.onCellChange.bind(this,"ccy"),key:"circleCenterY",placeholder:"y"}))),o.createElement("tr",null,o.createElement("th",null,"r"),o.createElement("td",{colSpan:3},o.createElement(s.Cell,{text:""+this.state.ccr,onChange:this.onCellChange.bind(this,"ccr"),key:"circleRadius",placeholder:"r"}))))):"rectangle"===e&&(t=o.createElement("table",{className:"table"},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("th",null,"x"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.rcx,onChange:this.onCellChange.bind(this,"rcx"),key:"rectX",placeholder:"x"})),o.createElement("th",null,"y"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.rcy,onChange:this.onCellChange.bind(this,"rcy"),key:"rectY",placeholder:"y"}))),o.createElement("tr",null,o.createElement("th",null,"width"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.rcw,onChange:this.onCellChange.bind(this,"rcw"),key:"rectWidth",placeholder:"width"})),o.createElement("th",null,"height"),o.createElement("td",null,o.createElement(s.Cell,{text:""+this.state.rch,onChange:this.onCellChange.bind(this,"rch"),key:"rectHeight",placeholder:"height"})))))),o.createElement("div",null,o.createElement("select",{className:"form-control",value:this.state.type,onChange:this.handleSelectChange},o.createElement("option",{value:"line"},"Line"),o.createElement("option",{value:"circle"},"Circle"),o.createElement("option",{value:"rectangle"},"Rectangle")),t)},e.defaults={type:"line",lsx:"0",lsy:"0",lex:"999",ley:"999"},e}(o.Component);e.PathSpecDisplay=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),n(169);var o=n(6),s=n(170);n(181);var a=function(t){function e(e){var n=t.call(this,e)||this;n.updateCode=function(t){n.setState({code:t})},n.runCode=function(){var t=n.state.code;n.props.doc.submitObjectReplaceOp(["code"],t)},n.state={code:"// Write your code here",codeErrors:[]};var r=n.props.doc;return r.subscribe(function(t,e){var i=r.getData(),o=i.code,s=i.codeErrors;null===t?(n.state={code:o,codeErrors:s},n.setState({code:o,codeErrors:s})):"op"===t&&e.forEach(function(t){var e=t.p;1===e.length&&"codeErrors"===e[0]&&n.setState({codeErrors:s})})}),n}return i(e,t),e.prototype.render=function(){var t=this.state.codeErrors.length>0,e=this.state.codeErrors.map(function(t,e){return o.createElement("li",{key:e},t)}),n=t?o.createElement("div",{className:"col"},o.createElement("h5",null,"Errors"),o.createElement("ul",null,e)):null;return o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col"},o.createElement("h5",null,"Code ",o.createElement("button",{className:"btn btn-dark btn-sm float-right",onClick:this.runCode},"Run")),o.createElement(s,{onChange:this.updateCode,value:this.state.code,options:{lineNumbers:!0,tabSize:4,mode:"javascript"}}))),o.createElement("div",{className:"row"},n))},e}(o.Component);e.CodeEditor=a},function(t,e){},function(t,e,n){"use strict";var r=n(6),i=(n(21),n(171)),o=n(174),s=n(175),a=n(176);function u(t){return t?t.replace(/\r\n|\r/g,"\n"):t}var l=n(177)({propTypes:{autoFocus:i.bool,className:i.any,codeMirrorInstance:i.func,defaultValue:i.string,name:i.string,onChange:i.func,onCursorActivity:i.func,onFocusChange:i.func,onScroll:i.func,options:i.object,path:i.string,value:i.string,preserveScrollPosition:i.bool},getDefaultProps:function(){return{preserveScrollPosition:!1}},getCodeMirrorInstance:function(){return this.props.codeMirrorInstance||n(73)},getInitialState:function(){return{isFocused:!1}},componentWillMount:function(){this.componentWillReceiveProps=s(this.componentWillReceiveProps,0),this.props.path&&console.error("Warning: react-codemirror: the `path` prop has been changed to `name`")},componentDidMount:function(){var t=this.getCodeMirrorInstance();this.codeMirror=t.fromTextArea(this.textareaNode,this.props.options),this.codeMirror.on("change",this.codemirrorValueChanged),this.codeMirror.on("cursorActivity",this.cursorActivity),this.codeMirror.on("focus",this.focusChanged.bind(this,!0)),this.codeMirror.on("blur",this.focusChanged.bind(this,!1)),this.codeMirror.on("scroll",this.scrollChanged),this.codeMirror.setValue(this.props.defaultValue||this.props.value||"")},componentWillUnmount:function(){this.codeMirror&&this.codeMirror.toTextArea()},componentWillReceiveProps:function(t){if(this.codeMirror&&void 0!==t.value&&t.value!==this.props.value&&u(this.codeMirror.getValue())!==u(t.value))if(this.props.preserveScrollPosition){var e=this.codeMirror.getScrollInfo();this.codeMirror.setValue(t.value),this.codeMirror.scrollTo(e.left,e.top)}else this.codeMirror.setValue(t.value);if("object"===typeof t.options)for(var n in t.options)t.options.hasOwnProperty(n)&&this.setOptionIfChanged(n,t.options[n])},setOptionIfChanged:function(t,e){var n=this.codeMirror.getOption(t);a(n,e)||this.codeMirror.setOption(t,e)},getCodeMirror:function(){return this.codeMirror},focus:function(){this.codeMirror&&this.codeMirror.focus()},focusChanged:function(t){this.setState({isFocused:t}),this.props.onFocusChange&&this.props.onFocusChange(t)},cursorActivity:function(t){this.props.onCursorActivity&&this.props.onCursorActivity(t)},scrollChanged:function(t){this.props.onScroll&&this.props.onScroll(t.getScrollInfo())},codemirrorValueChanged:function(t,e){this.props.onChange&&"setValue"!==e.origin&&this.props.onChange(t.getValue(),e)},render:function(){var t=this,e=o("ReactCodeMirror",this.state.isFocused?"ReactCodeMirror--focused":null,this.props.className);return r.createElement("div",{className:e},r.createElement("textarea",{ref:function(e){return t.textareaNode=e},name:this.props.name||this.props.path,defaultValue:this.props.value,autoComplete:"off",autoFocus:this.props.autoFocus}))}});t.exports=l},function(t,e,n){t.exports=n(172)()},function(t,e,n){"use strict";var r=n(173);function i(){}t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var s=i.apply(null,r);s&&t.push(s)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}"undefined"!==typeof t&&t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,f=c||h||Function("return this")(),d=Object.prototype.toString,p=Math.max,g=Math.min,v=function(){return f.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&d.call(t)==i}(t))return r;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=a.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):s.test(t)?r:+t}t.exports=function(t,e,r){var i,o,s,a,u,l,c=0,h=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError(n);function b(e){var n=i,r=o;return i=o=void 0,c=e,a=t.apply(r,n)}function w(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-c>=s}function x(){var t=v();if(w(t))return _(t);u=setTimeout(x,function(t){var n=e-(t-l);return f?g(n,s-(t-c)):n}(t))}function _(t){return u=void 0,d&&i?b(t):(i=o=void 0,a)}function S(){var t=v(),n=w(t);if(i=arguments,o=this,l=t,n){if(void 0===u)return function(t){return c=t,u=setTimeout(x,e),h?b(t):a}(l);if(f)return u=setTimeout(x,e),b(l)}return void 0===u&&(u=setTimeout(x,e)),a}return e=y(e)||0,m(r)&&(h=!!r.leading,s=(f="maxWait"in r)?p(y(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},S.flush=function(){return void 0===u?a:_(v())},S}}).call(e,n(3))},function(t,e,n){(function(t,n){var r=200,i="__lodash_hash_undefined__",o=1,s=2,a=9007199254740991,u="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",g="[object GeneratorFunction]",v="[object Map]",m="[object Number]",y="[object Null]",b="[object Object]",w="[object Proxy]",x="[object RegExp]",_="[object Set]",S="[object String]",k="[object Symbol]",T="[object Undefined]",C="[object ArrayBuffer]",E="[object DataView]",O=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[u]=A[l]=A[C]=A[h]=A[E]=A[f]=A[d]=A[p]=A[v]=A[m]=A[b]=A[x]=A[_]=A[S]=A["[object WeakMap]"]=!1;var P="object"==typeof t&&t&&t.Object===Object&&t,D="object"==typeof self&&self&&self.Object===Object&&self,N=P||D||Function("return this")(),L="object"==typeof e&&e&&!e.nodeType&&e,I=L&&"object"==typeof n&&n&&!n.nodeType&&n,R=I&&I.exports===L,j=R&&P.process,F=function(){try{return j&&j.binding&&j.binding("util")}catch(t){}}(),B=F&&F.isTypedArray;function z(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function U(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var V,G,q,H=Array.prototype,$=Function.prototype,Y=Object.prototype,X=N["__core-js_shared__"],K=$.toString,Q=Y.hasOwnProperty,J=(V=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",Z=Y.toString,tt=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=R?N.Buffer:void 0,nt=N.Symbol,rt=N.Uint8Array,it=Y.propertyIsEnumerable,ot=H.splice,st=nt?nt.toStringTag:void 0,at=Object.getOwnPropertySymbols,ut=et?et.isBuffer:void 0,lt=(G=Object.keys,q=Object,function(t){return G(q(t))}),ct=Ft(N,"DataView"),ht=Ft(N,"Map"),ft=Ft(N,"Promise"),dt=Ft(N,"Set"),pt=Ft(N,"WeakMap"),gt=Ft(Object,"create"),vt=Ut(ct),mt=Ut(ht),yt=Ut(ft),bt=Ut(dt),wt=Ut(pt),xt=nt?nt.prototype:void 0,_t=xt?xt.valueOf:void 0;function St(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function kt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ct(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Tt;++e<n;)this.add(t[e])}function Et(t){var e=this.__data__=new kt(t);this.size=e.size}function Ot(t,e){var n=qt(t),r=!n&&Gt(t),i=!n&&!r&&Ht(t),o=!n&&!r&&!i&&Qt(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=a.length;for(var l in t)!e&&!Q.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Wt(l,u))||a.push(l);return a}function Mt(t,e){for(var n=t.length;n--;)if(Vt(t[n][0],e))return n;return-1}function At(t){return null==t?void 0===t?T:y:st&&st in Object(t)?function(t){var e=Q.call(t,st),n=t[st];try{t[st]=void 0;var r=!0}catch(t){}var i=Z.call(t);r&&(e?t[st]=n:delete t[st]);return i}(t):function(t){return Z.call(t)}(t)}function Pt(t){return Kt(t)&&At(t)==u}function Dt(t,e,n,r,i){return t===e||(null==t||null==e||!Kt(t)&&!Kt(e)?t!==t&&e!==e:function(t,e,n,r,i,a){var c=qt(t),p=qt(e),g=c?l:zt(t),y=p?l:zt(e),w=(g=g==u?b:g)==b,T=(y=y==u?b:y)==b,O=g==y;if(O&&Ht(t)){if(!Ht(e))return!1;c=!0,w=!1}if(O&&!w)return a||(a=new Et),c||Qt(t)?It(t,e,n,r,i,a):function(t,e,n,r,i,a,u){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case C:return!(t.byteLength!=e.byteLength||!a(new rt(t),new rt(e)));case h:case f:case m:return Vt(+t,+e);case d:return t.name==e.name&&t.message==e.message;case x:case S:return t==e+"";case v:var l=W;case _:var c=r&o;if(l||(l=U),t.size!=e.size&&!c)return!1;var p=u.get(t);if(p)return p==e;r|=s,u.set(t,e);var g=It(l(t),l(e),r,i,a,u);return u.delete(t),g;case k:if(_t)return _t.call(t)==_t.call(e)}return!1}(t,e,g,n,r,i,a);if(!(n&o)){var M=w&&Q.call(t,"__wrapped__"),A=T&&Q.call(e,"__wrapped__");if(M||A){var P=M?t.value():t,D=A?e.value():e;return a||(a=new Et),i(P,D,n,r,a)}}if(!O)return!1;return a||(a=new Et),function(t,e,n,r,i,s){var a=n&o,u=Rt(t),l=u.length,c=Rt(e).length;if(l!=c&&!a)return!1;for(var h=l;h--;){var f=u[h];if(!(a?f in e:Q.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++h<l;){f=u[h];var v=t[f],m=e[f];if(r)var y=a?r(m,v,f,e,t,s):r(v,m,f,t,e,s);if(!(void 0===y?v===m||i(v,m,n,r,s):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,i,a)}(t,e,n,r,Dt,i))}function Nt(t){return!(!Xt(t)||J&&J in t)&&($t(t)?tt:O).test(Ut(t))}function Lt(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||Y,e!==r)return lt(t);var e,n,r,i=[];for(var o in Object(t))Q.call(t,o)&&"constructor"!=o&&i.push(o);return i}function It(t,e,n,r,i,a){var u=n&o,l=t.length,c=e.length;if(l!=c&&!(u&&c>l))return!1;var h=a.get(t);if(h&&a.get(e))return h==e;var f=-1,d=!0,p=n&s?new Ct:void 0;for(a.set(t,e),a.set(e,t);++f<l;){var g=t[f],v=e[f];if(r)var m=u?r(v,g,f,e,t,a):r(g,v,f,t,e,a);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!z(e,function(t,e){if(o=e,!p.has(o)&&(g===t||i(g,t,n,r,a)))return p.push(e);var o})){d=!1;break}}else if(g!==v&&!i(g,v,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Rt(t){return function(t,e,n){var r=e(t);return qt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Jt,Bt)}function jt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Ft(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Nt(n)?n:void 0}St.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},St.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},St.prototype.get=function(t){var e=this.__data__;if(gt){var n=e[t];return n===i?void 0:n}return Q.call(e,t)?e[t]:void 0},St.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:Q.call(e,t)},St.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gt&&void 0===e?i:e,this},kt.prototype.clear=function(){this.__data__=[],this.size=0},kt.prototype.delete=function(t){var e=this.__data__,n=Mt(e,t);return!(n<0)&&(n==e.length-1?e.pop():ot.call(e,n,1),--this.size,!0)},kt.prototype.get=function(t){var e=this.__data__,n=Mt(e,t);return n<0?void 0:e[n][1]},kt.prototype.has=function(t){return Mt(this.__data__,t)>-1},kt.prototype.set=function(t,e){var n=this.__data__,r=Mt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Tt.prototype.clear=function(){this.size=0,this.__data__={hash:new St,map:new(ht||kt),string:new St}},Tt.prototype.delete=function(t){var e=jt(this,t).delete(t);return this.size-=e?1:0,e},Tt.prototype.get=function(t){return jt(this,t).get(t)},Tt.prototype.has=function(t){return jt(this,t).has(t)},Tt.prototype.set=function(t,e){var n=jt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ct.prototype.add=Ct.prototype.push=function(t){return this.__data__.set(t,i),this},Ct.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new kt,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof kt){var i=n.__data__;if(!ht||i.length<r-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Tt(i)}return n.set(t,e),this.size=n.size,this};var Bt=at?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(at(t),function(e){return it.call(t,e)}))}:function(){return[]},zt=At;function Wt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function Ut(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Vt(t,e){return t===e||t!==t&&e!==e}(ct&&zt(new ct(new ArrayBuffer(1)))!=E||ht&&zt(new ht)!=v||ft&&"[object Promise]"!=zt(ft.resolve())||dt&&zt(new dt)!=_||pt&&"[object WeakMap]"!=zt(new pt))&&(zt=function(t){var e=At(t),n=e==b?t.constructor:void 0,r=n?Ut(n):"";if(r)switch(r){case vt:return E;case mt:return v;case yt:return"[object Promise]";case bt:return _;case wt:return"[object WeakMap]"}return e});var Gt=Pt(function(){return arguments}())?Pt:function(t){return Kt(t)&&Q.call(t,"callee")&&!it.call(t,"callee")},qt=Array.isArray;var Ht=ut||function(){return!1};function $t(t){if(!Xt(t))return!1;var e=At(t);return e==p||e==g||e==c||e==w}function Yt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Xt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Kt(t){return null!=t&&"object"==typeof t}var Qt=B?function(t){return function(e){return t(e)}}(B):function(t){return Kt(t)&&Yt(t.length)&&!!A[At(t)]};function Jt(t){return null!=(e=t)&&Yt(e.length)&&!$t(e)?Ot(t):Lt(t);var e}n.exports=function(t,e){return Dt(t,e)}}).call(e,n(3),n(36)(t))},function(t,e,n){"use strict";var r=n(6),i=n(178);if("undefined"===typeof r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var o=(new r.Component).updater;t.exports=i(r.Component,r.isValidElement,o)},function(t,e,n){"use strict";var r=n(17),i=n(179),o=n(180),s="mixins";t.exports=function(t,e,n){var a=[],u={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},l={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},c={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)f(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=r({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=r({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=p(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=r({},t.propTypes,e)},statics:function(t,e){!function(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var i=n in c;o(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var s=n in t;if(s){var a=l.hasOwnProperty(n)?l[n]:null;return o("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=p(t[n],r))}t[n]=r}}}(t,e)},autobind:function(){}};function h(t,e){var n=u.hasOwnProperty(e)?u[e]:null;b.hasOwnProperty(e)&&o("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&o("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function f(t,n){if(n){o("function"!==typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),o(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=t.prototype,i=r.__reactAutoBindPairs;for(var a in n.hasOwnProperty(s)&&c.mixins(t,n.mixins),n)if(n.hasOwnProperty(a)&&a!==s){var l=n[a],f=r.hasOwnProperty(a);if(h(f,a),c.hasOwnProperty(a))c[a](t,l);else{var d=u.hasOwnProperty(a);if("function"!==typeof l||d||f||!1===n.autobind)if(f){var v=u[a];o(d&&("DEFINE_MANY_MERGED"===v||"DEFINE_MANY"===v),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",v,a),"DEFINE_MANY_MERGED"===v?r[a]=p(r[a],l):"DEFINE_MANY"===v&&(r[a]=g(r[a],l))}else r[a]=l;else i.push(a,l),r[a]=l}}}}function d(t,e){for(var n in o(t&&e&&"object"===typeof t&&"object"===typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),e)e.hasOwnProperty(n)&&(o(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function p(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return d(i,n),d(i,r),i}}function g(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function v(t,e){var n=e.bind(t);return n}var m={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},w=function(){};return r(w.prototype,t.prototype,b),function(t){var e=function(t,r,s){this.__reactAutoBindPairs.length&&function(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=v(t,i)}}(this),this.props=t,this.context=r,this.refs=i,this.updater=s||n,this.state=null;var a=this.getInitialState?this.getInitialState():null;o("object"===typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=a};for(var r in e.prototype=new w,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],a.forEach(f.bind(null,e)),f(e,m),f(e,t),f(e,y),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),o(e.prototype.render,"createClass(...): Class specification must implement a `render` method."),u)e.prototype[r]||(e.prototype[r]=null);return e}}},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";var r=function(t){};t.exports=function(t,e,n,i,o,s,a,u){if(r(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,s,a,u],h=0;(l=new Error(e.replace(/%s/g,function(){return c[h++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(t,e,n){(function(t){"use strict";t.defineMode("javascript",function(e,n){var r,i,o=e.indentUnit,s=n.statementIndent,a=n.jsonld,u=n.json||a,l=n.typescript,c=n.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),r=t("keyword c"),i=t("keyword d"),o=t("operator"),s={type:"atom",style:"atom"};return{if:t("if"),while:e,with:e,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:t("new"),delete:r,void:r,throw:r,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:t("this"),class:t("class"),super:t("atom"),yield:r,export:t("export"),import:t("import"),extends:r,await:r}}(),f=/[+\-*&%=<>!?|~^@]/,d=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(t,e,n){return r=t,i=n,e}function g(t,e){var n,r=t.next();if('"'==r||"'"==r)return e.tokenize=(n=r,function(t,e){var r,i=!1;if(a&&"@"==t.peek()&&t.match(d))return e.tokenize=g,p("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(e.tokenize=g),p("string","string")}),e.tokenize(t,e);if("."==r&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return p("number","number");if("."==r&&t.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return p(r);if("="==r&&t.eat(">"))return p("=>","operator");if("0"==r&&t.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return p("number","number");if(/\d/.test(r))return t.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),p("number","number");if("/"==r)return t.eat("*")?(e.tokenize=v,v(t,e)):t.eat("/")?(t.skipToEnd(),p("comment","comment")):Ht(t,e,1)?(function(t){for(var e,n=!1,r=!1;null!=(e=t.next());){if(!n){if("/"==e&&!r)return;"["==e?r=!0:r&&"]"==e&&(r=!1)}n=!n&&"\\"==e}}(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),p("regexp","string-2")):(t.eat("="),p("operator","operator",t.current()));if("`"==r)return e.tokenize=m,m(t,e);if("#"==r)return t.skipToEnd(),p("error","error");if(f.test(r))return">"==r&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=r&&"="!=r||t.eat("="):/[<>*+\-]/.test(r)&&(t.eat(r),">"==r&&t.eat(r))),p("operator","operator",t.current());if(c.test(r)){t.eatWhile(c);var i=t.current();if("."!=e.lastType){if(h.propertyIsEnumerable(i)){var o=h[i];return p(o.type,o.style,i)}if("async"==i&&t.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return p("async","keyword",i)}return p("variable","variable",i)}}function v(t,e){for(var n,r=!1;n=t.next();){if("/"==n&&r){e.tokenize=g;break}r="*"==n}return p("comment","comment")}function m(t,e){for(var n,r=!1;null!=(n=t.next());){if(!r&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=g;break}r=!r&&"\\"==n}return p("quasi","string-2",t.current())}var y="([{}])";function b(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){if(l){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,n));r&&(n=r.index)}for(var i=0,o=!1,s=n-1;s>=0;--s){var a=t.string.charAt(s),u=y.indexOf(a);if(u>=0&&u<3){if(!i){++s;break}if(0==--i){"("==a&&(o=!0);break}}else if(u>=3&&u<6)++i;else if(c.test(a))o=!0;else{if(/["'\/]/.test(a))return;if(o&&!i){++s;break}}}o&&!i&&(e.fatArrowAt=s)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function x(t,e,n,r,i,o){this.indented=t,this.column=e,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function _(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var r=t.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==e)return!0}var S={state:null,column:null,marked:null,cc:null};function k(){for(var t=arguments.length-1;t>=0;t--)S.cc.push(arguments[t])}function T(){return k.apply(null,arguments),!0}function C(t,e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}function E(t){var e=S.state;if(S.marked="def",e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var r=function t(e,n){if(n){if(n.block){var r=t(e,n.prev);return r?r==n.prev?n:new M(r,n.vars,!0):null}return C(e,n.vars)?n:new M(n.prev,new A(e,n.vars),!1)}return null}(t,e.context);if(null!=r)return void(e.context=r)}else if(!C(t,e.localVars))return void(e.localVars=new A(t,e.localVars));n.globalVars&&!C(t,e.globalVars)&&(e.globalVars=new A(t,e.globalVars))}function O(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function M(t,e,n){this.prev=t,this.vars=e,this.block=n}function A(t,e){this.name=t,this.next=e}var P=new A("this",new A("arguments",null));function D(){S.state.context=new M(S.state.context,S.state.localVars,!1),S.state.localVars=P}function N(){S.state.context=new M(S.state.context,S.state.localVars,!0),S.state.localVars=null}function L(){S.state.localVars=S.state.context.vars,S.state.context=S.state.context.prev}function I(t,e){var n=function(){var n=S.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new x(r,S.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function R(){var t=S.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function j(t){return function e(n){return n==t?T():";"==t||"}"==n||")"==n||"]"==n?k():T(e)}}function F(t,e){return"var"==t?T(I("vardef",e),yt,j(";"),R):"keyword a"==t?T(I("form"),U,F,R):"keyword b"==t?T(I("form"),F,R):"keyword d"==t?S.stream.match(/^\s*$/,!1)?T():T(I("stat"),G,j(";"),R):"debugger"==t?T(j(";")):"{"==t?T(I("}"),N,st,R,L):";"==t?T():"if"==t?("else"==S.state.lexical.info&&S.state.cc[S.state.cc.length-1]==R&&S.state.cc.pop()(),T(I("form"),U,F,R,St)):"function"==t?T(Mt):"for"==t?T(I("form"),kt,F,R):"class"==t||l&&"interface"==e?(S.marked="keyword",T(I("form"),Dt,R)):"variable"==t?l&&"declare"==e?(S.marked="keyword",T(F)):l&&("module"==e||"enum"==e||"type"==e)&&S.stream.match(/^\s*\w/,!1)?(S.marked="keyword","enum"==e?T(Gt):"type"==e?T(ct,j("operator"),ct,j(";")):T(I("form"),bt,j("{"),I("}"),st,R,R)):l&&"namespace"==e?(S.marked="keyword",T(I("form"),z,st,R)):l&&"abstract"==e?(S.marked="keyword",T(F)):T(I("stat"),Z):"switch"==t?T(I("form"),U,j("{"),I("}","switch"),N,st,R,R,L):"case"==t?T(z,j(":")):"default"==t?T(j(":")):"catch"==t?T(I("form"),D,B,F,R,L):"export"==t?T(I("stat"),Rt,R):"import"==t?T(I("stat"),Ft,R):"async"==t?T(F):"@"==e?T(z,F):k(I("stat"),z,j(";"),R)}function B(t){if("("==t)return T(At,j(")"))}function z(t,e){return V(t,e,!1)}function W(t,e){return V(t,e,!0)}function U(t){return"("!=t?k():T(I(")"),z,j(")"),R)}function V(t,e,n){if(S.state.fatArrowAt==S.stream.start){var r=n?K:X;if("("==t)return T(D,I(")"),it(At,")"),R,j("=>"),r,L);if("variable"==t)return k(D,bt,j("=>"),r,L)}var i=n?H:q;return w.hasOwnProperty(t)?T(i):"function"==t?T(Mt,i):"class"==t||l&&"interface"==e?(S.marked="keyword",T(I("form"),Pt,R)):"keyword c"==t||"async"==t?T(n?W:z):"("==t?T(I(")"),G,j(")"),R,i):"operator"==t||"spread"==t?T(n?W:z):"["==t?T(I("]"),Vt,R,i):"{"==t?ot(et,"}",null,i):"quasi"==t?k($,i):"new"==t?T(function(t){return function(e){return"."==e?T(t?J:Q):"variable"==e&&l?T(gt,t?H:q):k(t?W:z)}}(n)):"import"==t?T(z):T()}function G(t){return t.match(/[;\}\)\],]/)?k():k(z)}function q(t,e){return","==t?T(z):H(t,e,!1)}function H(t,e,n){var r=0==n?q:H,i=0==n?z:W;return"=>"==t?T(D,n?K:X,L):"operator"==t?/\+\+|--/.test(e)||l&&"!"==e?T(r):l&&"<"==e&&S.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?T(I(">"),it(ct,">"),R,r):"?"==e?T(z,j(":"),i):T(i):"quasi"==t?k($,r):";"!=t?"("==t?ot(W,")","call",r):"."==t?T(tt,r):"["==t?T(I("]"),G,j("]"),R,r):l&&"as"==e?(S.marked="keyword",T(ct,r)):"regexp"==t?(S.state.lastType=S.marked="operator",S.stream.backUp(S.stream.pos-S.stream.start-1),T(i)):void 0:void 0}function $(t,e){return"quasi"!=t?k():"${"!=e.slice(e.length-2)?T($):T(z,Y)}function Y(t){if("}"==t)return S.marked="string-2",S.state.tokenize=m,T($)}function X(t){return b(S.stream,S.state),k("{"==t?F:z)}function K(t){return b(S.stream,S.state),k("{"==t?F:W)}function Q(t,e){if("target"==e)return S.marked="keyword",T(q)}function J(t,e){if("target"==e)return S.marked="keyword",T(H)}function Z(t){return":"==t?T(R,F):k(q,j(";"),R)}function tt(t){if("variable"==t)return S.marked="property",T()}function et(t,e){if("async"==t)return S.marked="property",T(et);if("variable"==t||"keyword"==S.style){return S.marked="property","get"==e||"set"==e?T(nt):(l&&S.state.fatArrowAt==S.stream.start&&(n=S.stream.match(/^\s*:\s*/,!1))&&(S.state.fatArrowAt=S.stream.pos+n[0].length),T(rt));var n}else{if("number"==t||"string"==t)return S.marked=a?"property":S.style+" property",T(rt);if("jsonld-keyword"==t)return T(rt);if(l&&O(e))return S.marked="keyword",T(et);if("["==t)return T(z,at,j("]"),rt);if("spread"==t)return T(W,rt);if("*"==e)return S.marked="keyword",T(et);if(":"==t)return k(rt)}}function nt(t){return"variable"!=t?k(rt):(S.marked="property",T(Mt))}function rt(t){return":"==t?T(W):"("==t?k(Mt):void 0}function it(t,e,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var s=S.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),T(function(n,r){return n==e||r==e?k():k(t)},r)}return i==e||o==e?T():T(j(e))}return function(n,i){return n==e||i==e?T():k(t,r)}}function ot(t,e,n){for(var r=3;r<arguments.length;r++)S.cc.push(arguments[r]);return T(I(e,n),it(t,e),R)}function st(t){return"}"==t?T():k(F,st)}function at(t,e){if(l){if(":"==t)return T(ct);if("?"==e)return T(at)}}function ut(t){if(l&&":"==t)return S.stream.match(/^\s*\w+\s+is\b/,!1)?T(z,lt,ct):T(ct)}function lt(t,e){if("is"==e)return S.marked="keyword",T()}function ct(t,e){return"keyof"==e||"typeof"==e?(S.marked="keyword",T("keyof"==e?ct:W)):"variable"==t||"void"==e?(S.marked="type",T(pt)):"string"==t||"number"==t||"atom"==t?T(pt):"["==t?T(I("]"),it(ct,"]",","),R,pt):"{"==t?T(I("}"),it(ft,"}",",;"),R,pt):"("==t?T(it(dt,")"),ht):"<"==t?T(it(ct,">"),ct):void 0}function ht(t){if("=>"==t)return T(ct)}function ft(t,e){return"variable"==t||"keyword"==S.style?(S.marked="property",T(ft)):"?"==e?T(ft):":"==t?T(ct):"["==t?T(z,at,j("]"),ft):void 0}function dt(t,e){return"variable"==t&&S.stream.match(/^\s*[?:]/,!1)||"?"==e?T(dt):":"==t?T(ct):k(ct)}function pt(t,e){return"<"==e?T(I(">"),it(ct,">"),R,pt):"|"==e||"."==t||"&"==e?T(ct):"["==t?T(j("]"),pt):"extends"==e||"implements"==e?(S.marked="keyword",T(ct)):void 0}function gt(t,e){if("<"==e)return T(I(">"),it(ct,">"),R,pt)}function vt(){return k(ct,mt)}function mt(t,e){if("="==e)return T(ct)}function yt(t,e){return"enum"==e?(S.marked="keyword",T(Gt)):k(bt,at,xt,_t)}function bt(t,e){return l&&O(e)?(S.marked="keyword",T(bt)):"variable"==t?(E(e),T()):"spread"==t?T(bt):"["==t?ot(bt,"]"):"{"==t?ot(wt,"}"):void 0}function wt(t,e){return"variable"!=t||S.stream.match(/^\s*:/,!1)?("variable"==t&&(S.marked="property"),"spread"==t?T(bt):"}"==t?k():T(j(":"),bt,xt)):(E(e),T(xt))}function xt(t,e){if("="==e)return T(W)}function _t(t){if(","==t)return T(yt)}function St(t,e){if("keyword b"==t&&"else"==e)return T(I("form","else"),F,R)}function kt(t,e){return"await"==e?T(kt):"("==t?T(I(")"),Tt,j(")"),R):void 0}function Tt(t){return"var"==t?T(yt,j(";"),Et):";"==t?T(Et):"variable"==t?T(Ct):k(z,j(";"),Et)}function Ct(t,e){return"in"==e||"of"==e?(S.marked="keyword",T(z)):T(q,Et)}function Et(t,e){return";"==t?T(Ot):"in"==e||"of"==e?(S.marked="keyword",T(z)):k(z,j(";"),Ot)}function Ot(t){")"!=t&&T(z)}function Mt(t,e){return"*"==e?(S.marked="keyword",T(Mt)):"variable"==t?(E(e),T(Mt)):"("==t?T(D,I(")"),it(At,")"),R,ut,F,L):l&&"<"==e?T(I(">"),it(vt,">"),R,Mt):void 0}function At(t,e){return"@"==e&&T(z,At),"spread"==t?T(At):l&&O(e)?(S.marked="keyword",T(At)):k(bt,at,xt)}function Pt(t,e){return"variable"==t?Dt(t,e):Nt(t,e)}function Dt(t,e){if("variable"==t)return E(e),T(Nt)}function Nt(t,e){return"<"==e?T(I(">"),it(vt,">"),R,Nt):"extends"==e||"implements"==e||l&&","==t?("implements"==e&&(S.marked="keyword"),T(l?ct:z,Nt)):"{"==t?T(I("}"),Lt,R):void 0}function Lt(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||l&&O(e))&&S.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(S.marked="keyword",T(Lt)):"variable"==t||"keyword"==S.style?(S.marked="property",T(l?It:Mt,Lt)):"["==t?T(z,at,j("]"),l?It:Mt,Lt):"*"==e?(S.marked="keyword",T(Lt)):";"==t?T(Lt):"}"==t?T():"@"==e?T(z,Lt):void 0}function It(t,e){return"?"==e?T(It):":"==t?T(ct,xt):"="==e?T(W):k(Mt)}function Rt(t,e){return"*"==e?(S.marked="keyword",T(Ut,j(";"))):"default"==e?(S.marked="keyword",T(z,j(";"))):"{"==t?T(it(jt,"}"),Ut,j(";")):k(F)}function jt(t,e){return"as"==e?(S.marked="keyword",T(j("variable"))):"variable"==t?k(W,jt):void 0}function Ft(t){return"string"==t?T():"("==t?k(z):k(Bt,zt,Ut)}function Bt(t,e){return"{"==t?ot(Bt,"}"):("variable"==t&&E(e),"*"==e&&(S.marked="keyword"),T(Wt))}function zt(t){if(","==t)return T(Bt,zt)}function Wt(t,e){if("as"==e)return S.marked="keyword",T(Bt)}function Ut(t,e){if("from"==e)return S.marked="keyword",T(z)}function Vt(t){return"]"==t?T():k(it(W,"]"))}function Gt(){return k(I("form"),bt,j("{"),I("}"),it(qt,"}"),R,R)}function qt(){return k(bt,xt)}function Ht(t,e,n){return e.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(n||0)))}return L.lex=!0,R.lex=!0,{startState:function(t){var e={tokenize:g,lastType:"sof",cc:[],lexical:new x((t||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new M(null,null,!1),indented:t||0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),b(t,e)),e.tokenize!=v&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==r?n:(e.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",function(t,e,n,r,i){var o=t.cc;for(S.state=t,S.stream=i,S.marked=null,S.cc=o,S.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;)if((o.length?o.pop():u?z:F)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return S.marked?S.marked:"variable"==n&&_(t,r)?"variable-2":e}}(e,n,r,i,t))},indent:function(e,r){if(e.tokenize==v)return t.Pass;if(e.tokenize!=g)return 0;var i,a=r&&r.charAt(0),u=e.lexical;if(!/^\s*else\b/.test(r))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==R)u=u.prev;else if(c!=St)break}for(;("stat"==u.type||"form"==u.type)&&("}"==a||(i=e.cc[e.cc.length-1])&&(i==q||i==H)&&!/^[,\.=+\-*:?[\(]/.test(r));)u=u.prev;s&&")"==u.type&&"stat"==u.prev.type&&(u=u.prev);var h=u.type,d=a==h;return"vardef"==h?u.indented+("operator"==e.lastType||","==e.lastType?u.info.length+1:0):"form"==h&&"{"==a?u.indented:"form"==h?u.indented+o:"stat"==h?u.indented+(function(t,e){return"operator"==t.lastType||","==t.lastType||f.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}(e,r)?s||o:0):"switch"!=u.info||d||0==n.doubleIndentSwitch?u.align?u.column+(d?0:1):u.indented+(d?0:o):u.indented+(/^(?:case|default)\b/.test(r)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:a,jsonMode:u,expressionAllowed:Ht,skipExpression:function(t){var e=t.cc[t.cc.length-1];e!=z&&e!=W||t.cc.pop()}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(n(73))}]);
//# sourceMappingURL=main.a5bfcd44.js.map